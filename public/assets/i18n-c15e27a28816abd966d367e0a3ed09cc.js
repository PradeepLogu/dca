var I18n=I18n||{};I18n.defaultLocale="en",I18n.fallbacks=!1,I18n.defaultSeparator=".",I18n.locale=null,I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,I18n.isValidNode=function(e,t,i){return null!==e[t]&&e[t]!==i},I18n.lookup=function(e,t){var i,t=t||{},n=e,a=this.prepareOptions(I18n.translations),s=a[t.locale||I18n.currentLocale()],t=this.prepareOptions(t);if(s){for("object"==typeof e&&(e=e.join(this.defaultSeparator)),t.scope&&(e=t.scope.toString()+this.defaultSeparator+e),e=e.split(this.defaultSeparator);e.length>0;)if(i=e.shift(),s=s[i],!s){I18n.fallbacks&&!t.fallback&&(s=I18n.lookup(n,this.prepareOptions({locale:I18n.defaultLocale,fallback:!0},t)));break}return!s&&this.isValidNode(t,"defaultValue")&&(s=t.defaultValue),s}},I18n.prepareOptions=function(){for(var e,t={},i=arguments.length,n=0;i>n;n++)if(e=arguments[n])for(var a in e)this.isValidNode(t,a)||(t[a]=e[a]);return t},I18n.interpolate=function(e,t){t=this.prepareOptions(t);var i,n,a,s=e.match(this.PLACEHOLDER);if(!s)return e;for(var r=0;i=s[r];r++)a=i.replace(this.PLACEHOLDER,"$1"),n=t[a],this.isValidNode(t,a)||(n="[missing "+i+" value]"),regex=new RegExp(i.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(regex,n);return e},I18n.translate=function(e,t){t=this.prepareOptions(t);var i=this.lookup(e,t);try{return"object"==typeof i?"number"==typeof t.count?this.pluralize(t.count,e,t):i:this.interpolate(i,t)}catch(n){return this.missingTranslation(e)}},I18n.localize=function(e,t){switch(e){case"currency":return this.toCurrency(t);case"number":return e=this.lookup("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:return e.match(/^(date|time)/)?this.toTime(e,t):t.toString()}},I18n.parseDate=function(e){var t,i;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/)){for(var n=1;6>=n;n++)t[n]=parseInt(t[n],10)||0;t[2]-=1,i=t[7]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6])):new Date(t[1],t[2],t[3],t[4],t[5],t[6])}else"number"==typeof e?(i=new Date,i.setTime(e)):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(i=new Date,i.setTime(Date.parse(e))):(i=new Date,i.setTime(Date.parse(e)));return i},I18n.toTime=function(e,t){var i=this.parseDate(t),n=this.lookup(e);return i.toString().match(/invalid/i)?i.toString():n?this.strftime(i,n):i.toString()},I18n.strftime=function(e,t){var i=this.lookup("date");if(!i)return e.toString();i.meridian=i.meridian||["AM","PM"];var n=e.getDay(),a=e.getDate(),s=e.getFullYear(),r=e.getMonth()+1,o=e.getHours(),l=o,c=o>11?1:0,u=e.getSeconds(),h=e.getMinutes(),d=e.getTimezoneOffset(),p=Math.floor(Math.abs(d/60)),f=Math.abs(d)-60*p,m=(d>0?"-":"+")+(p.toString().length<2?"0"+p:p)+(f.toString().length<2?"0"+f:f);l>12?l-=12:0===l&&(l=12);var g=function(e){var t="0"+e.toString();return t.substr(t.length-2)},v=t;return v=v.replace("%a",i.abbr_day_names[n]),v=v.replace("%A",i.day_names[n]),v=v.replace("%b",i.abbr_month_names[r]),v=v.replace("%B",i.month_names[r]),v=v.replace("%d",g(a)),v=v.replace("%e",a),v=v.replace("%-d",a),v=v.replace("%H",g(o)),v=v.replace("%-H",o),v=v.replace("%I",g(l)),v=v.replace("%-I",l),v=v.replace("%m",g(r)),v=v.replace("%-m",r),v=v.replace("%M",g(h)),v=v.replace("%-M",h),v=v.replace("%p",i.meridian[c]),v=v.replace("%S",g(u)),v=v.replace("%-S",u),v=v.replace("%w",n),v=v.replace("%y",g(s)),v=v.replace("%-y",g(s).replace(/^0+/,"")),v=v.replace("%Y",s),v=v.replace("%z",m)},I18n.toNumber=function(e,t){t=this.prepareOptions(t,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1});var i,n,a=0>e,s=Math.abs(e).toFixed(t.precision).toString(),r=s.split("."),o=[];for(e=r[0],i=r[1];e.length>0;)o.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);if(n=o.join(t.delimiter),t.precision>0&&(n+=t.separator+r[1]),a&&(n="-"+n),t.strip_insignificant_zeros){var l={separator:new RegExp(t.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};n=n.replace(l.zeros,"").replace(l.separator,"")}return n},I18n.toCurrency=function(e,t){return t=this.prepareOptions(t,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."}),e=this.toNumber(e,t),e=t.format.replace("%u",t.unit).replace("%n",e)},I18n.toHumanSize=function(e,t){for(var i,n,a=1024,s=e,r=0;s>=a&&4>r;)s/=a,r+=1;return 0===r?(i=this.t("number.human.storage_units.units.byte",{count:s}),n=0):(i=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][r]),n=s-Math.floor(s)===0?0:1),t=this.prepareOptions(t,{precision:n,format:"%n%u",delimiter:""}),e=this.toNumber(s,t),e=t.format.replace("%u",i).replace("%n",e)},I18n.toPercentage=function(e,t){return t=this.prepareOptions(t,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""}),e=this.toNumber(e,t),e+"%"},I18n.pluralize=function(e,t,i){var n;try{n=this.lookup(t,i)}catch(a){}if(!n)return this.missingTranslation(t);var s;switch(i=this.prepareOptions(i),i.count=e.toString(),Math.abs(e)){case 0:s=this.isValidNode(n,"zero")?n.zero:this.isValidNode(n,"none")?n.none:this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"zero");break;case 1:s=this.isValidNode(n,"one")?n.one:this.missingTranslation(t,"one");break;default:s=this.isValidNode(n,"other")?n.other:this.missingTranslation(t,"other")}return this.interpolate(s,i)},I18n.missingTranslation=function(){for(var e='[missing "'+this.currentLocale(),t=arguments.length,i=0;t>i;i++)e+="."+arguments[i];return e+='" translation]'},I18n.currentLocale=function(){return I18n.locale||I18n.defaultLocale},I18n.t=I18n.translate,I18n.l=I18n.localize,I18n.p=I18n.pluralize;