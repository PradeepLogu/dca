(function(){var e,t,i,n,a,s,r,o,l,c,u,d,h,p,f,m,g,v,b,_,y,w,k,x,C,S,D,T,M,A,E,P,N,I,z,H,R,L,j,F,$,B,O,W,q,V,K,U,G,J=[].slice,Y={}.hasOwnProperty,Q=function(e,t){function i(){this.constructor=e}for(var n in t)Y.call(t,n)&&(e[n]=t[n]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},X=[].indexOf||function(e){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===e)return t;return-1};for(y={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},M=function(){var e;return null!=(e="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?e:+new Date},E=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,_=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==E&&(E=function(e){return setTimeout(e,50)},_=function(e){return clearTimeout(e)}),N=function(e){var t,i;return t=M(),(i=function(){var n;return n=M()-t,n>=33?(t=M(),e(n,function(){return E(i)})):setTimeout(i,33-n)})()},P=function(){var e,t,i;return i=arguments[0],t=arguments[1],e=3<=arguments.length?J.call(arguments,2):[],"function"==typeof i[t]?i[t].apply(i,e):i[t]},w=function(){var e,t,i,n,a,s,r;for(t=arguments[0],n=2<=arguments.length?J.call(arguments,1):[],s=0,r=n.length;r>s;s++)if(i=n[s])for(e in i)Y.call(i,e)&&(a=i[e],null!=t[e]&&"object"==typeof t[e]&&null!=a&&"object"==typeof a?w(t[e],a):t[e]=a);return t},g=function(e){var t,i,n,a,s;for(i=t=0,a=0,s=e.length;s>a;a++)n=e[a],i+=Math.abs(n),t++;return i/t},x=function(e,t){var i,n,a;if(null==e&&(e="options"),null==t&&(t=!0),a=document.querySelector("[data-pace-"+e+"]")){if(i=a.getAttribute("data-pace-"+e),!t)return i;try{return JSON.parse(i)}catch(s){return n=s,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",n):void 0}}},r=function(){function e(){}return e.prototype.on=function(e,t,i,n){var a;return null==n&&(n=!1),null==this.bindings&&(this.bindings={}),null==(a=this.bindings)[e]&&(a[e]=[]),this.bindings[e].push({handler:t,ctx:i,once:n})},e.prototype.once=function(e,t,i){return this.on(e,t,i,!0)},e.prototype.off=function(e,t){var i,n,a;if(null!=(null!=(n=this.bindings)?n[e]:void 0)){if(null==t)return delete this.bindings[e];for(i=0,a=[];i<this.bindings[e].length;)a.push(this.bindings[e][i].handler===t?this.bindings[e].splice(i,1):i++);return a}},e.prototype.trigger=function(){var e,t,i,n,a,s,r,o,l;if(i=arguments[0],e=2<=arguments.length?J.call(arguments,1):[],null!=(r=this.bindings)?r[i]:void 0){for(a=0,l=[];a<this.bindings[i].length;)o=this.bindings[i][a],n=o.handler,t=o.ctx,s=o.once,n.apply(null!=t?t:this,e),l.push(s?this.bindings[i].splice(a,1):a++);return l}},e}(),c=window.Pace||{},window.Pace=c,w(c,r.prototype),A=c.options=w({},y,window.paceOptions,x()),K=["ajax","document","eventLag","elements"],O=0,q=K.length;q>O;O++)R=K[O],A[R]===!0&&(A[R]=y[R]);l=function(e){function t(){return U=t.__super__.constructor.apply(this,arguments)}return Q(t,e),t}(Error),t=function(){function e(){this.progress=0}return e.prototype.getElement=function(){var e;if(null==this.el){if(e=document.querySelector(A.target),!e)throw new l;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=e.firstChild?e.insertBefore(this.el,e.firstChild):e.appendChild(this.el)}return this.el},e.prototype.finish=function(){var e;return e=this.getElement(),e.className=e.className.replace("pace-active",""),e.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},e.prototype.update=function(e){return this.progress=e,this.render()},e.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(e){l=e}return this.el=void 0},e.prototype.render=function(){var e,t,i,n,a,s,r;if(null==document.querySelector(A.target))return!1;for(e=this.getElement(),n="translate3d("+this.progress+"%, 0, 0)",r=["webkitTransform","msTransform","transform"],a=0,s=r.length;s>a;a++)t=r[a],e.children[0].style[t]=n;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(e.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),e.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress},e.prototype.done=function(){return this.progress>=100},e}(),o=function(){function e(){this.bindings={}}return e.prototype.trigger=function(e,t){var i,n,a,s,r;if(null!=this.bindings[e]){for(s=this.bindings[e],r=[],n=0,a=s.length;a>n;n++)i=s[n],r.push(i.call(this,t));return r}},e.prototype.on=function(e,t){var i;return null==(i=this.bindings)[e]&&(i[e]=[]),this.bindings[e].push(t)},e}(),B=window.XMLHttpRequest,$=window.XDomainRequest,F=window.WebSocket,k=function(e,t){var i,n,a;a=[];for(n in t.prototype)try{a.push(null==e[n]&&"function"!=typeof t[n]?"function"==typeof Object.defineProperty?Object.defineProperty(e,n,{get:function(){return t.prototype[n]},configurable:!0,enumerable:!0}):e[n]=t.prototype[n]:void 0)}catch(s){i=s}return a},D=[],c.ignore=function(){var e,t,i;return t=arguments[0],e=2<=arguments.length?J.call(arguments,1):[],D.unshift("ignore"),i=t.apply(null,e),D.shift(),i},c.track=function(){var e,t,i;return t=arguments[0],e=2<=arguments.length?J.call(arguments,1):[],D.unshift("track"),i=t.apply(null,e),D.shift(),i},H=function(e){var t;if(null==e&&(e="GET"),"track"===D[0])return"force";if(!D.length&&A.ajax){if("socket"===e&&A.ajax.trackWebSockets)return!0;if(t=e.toUpperCase(),X.call(A.ajax.trackMethods,t)>=0)return!0}return!1},u=function(e){function t(){var e,i=this;t.__super__.constructor.apply(this,arguments),e=function(e){var t;return t=e.open,e.open=function(n,a){return H(n)&&i.trigger("request",{type:n,url:a,request:e}),t.apply(e,arguments)}},window.XMLHttpRequest=function(t){var i;return i=new B(t),e(i),i};try{k(window.XMLHttpRequest,B)}catch(n){}if(null!=$){window.XDomainRequest=function(){var t;return t=new $,e(t),t};try{k(window.XDomainRequest,$)}catch(n){}}if(null!=F&&A.ajax.trackWebSockets){window.WebSocket=function(e,t){var n;return n=null!=t?new F(e,t):new F(e),H("socket")&&i.trigger("request",{type:"socket",url:e,protocols:t,request:n}),n};try{k(window.WebSocket,F)}catch(n){}}}return Q(t,e),t}(o),W=null,C=function(){return null==W&&(W=new u),W},z=function(e){var t,i,n,a;for(a=A.ajax.ignoreURLs,i=0,n=a.length;n>i;i++)if(t=a[i],"string"==typeof t){if(-1!==e.indexOf(t))return!0}else if(t.test(e))return!0;return!1},C().on("request",function(t){var i,n,a,s,r;return s=t.type,a=t.request,r=t.url,z(r)?void 0:c.running||A.restartOnRequestAfter===!1&&"force"!==H(s)?void 0:(n=arguments,i=A.restartOnRequestAfter||0,"boolean"==typeof i&&(i=0),setTimeout(function(){var t,i,r,o,l,u;if(t="socket"===s?a.readyState<2:0<(o=a.readyState)&&4>o){for(c.restart(),l=c.sources,u=[],i=0,r=l.length;r>i;i++){if(R=l[i],R instanceof e){R.watch.apply(R,n);break}u.push(void 0)}return u}},i))}),e=function(){function e(){var e=this;this.elements=[],C().on("request",function(){return e.watch.apply(e,arguments)})}return e.prototype.watch=function(e){var t,i,n,a;return n=e.type,t=e.request,a=e.url,z(a)?void 0:(i="socket"===n?new p(t):new f(t),this.elements.push(i))},e}(),f=function(){function e(e){var t,i,n,a,s,r,o=this;if(this.progress=0,null!=window.ProgressEvent)for(i=null,e.addEventListener("progress",function(e){return o.progress=e.lengthComputable?100*e.loaded/e.total:o.progress+(100-o.progress)/2},!1),r=["load","abort","timeout","error"],n=0,a=r.length;a>n;n++)t=r[n],e.addEventListener(t,function(){return o.progress=100},!1);else s=e.onreadystatechange,e.onreadystatechange=function(){var t;return 0===(t=e.readyState)||4===t?o.progress=100:3===e.readyState&&(o.progress=50),"function"==typeof s?s.apply(null,arguments):void 0}}return e}(),p=function(){function e(e){var t,i,n,a,s=this;for(this.progress=0,a=["error","open"],i=0,n=a.length;n>i;i++)t=a[i],e.addEventListener(t,function(){return s.progress=100},!1)}return e}(),n=function(){function e(e){var t,i,n,s;for(null==e&&(e={}),this.elements=[],null==e.selectors&&(e.selectors=[]),s=e.selectors,i=0,n=s.length;n>i;i++)t=s[i],this.elements.push(new a(t))}return e}(),a=function(){function e(e){this.selector=e,this.progress=0,this.check()}return e.prototype.check=function(){var e=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return e.check()},A.elements.checkInterval)},e.prototype.done=function(){return this.progress=100},e}(),i=function(){function e(){var e,t,i=this;this.progress=null!=(t=this.states[document.readyState])?t:100,e=document.onreadystatechange,document.onreadystatechange=function(){return null!=i.states[document.readyState]&&(i.progress=i.states[document.readyState]),"function"==typeof e?e.apply(null,arguments):void 0}}return e.prototype.states={loading:0,interactive:50,complete:100},e}(),s=function(){function e(){var e,t,i,n,a,s=this;this.progress=0,e=0,a=[],n=0,i=M(),t=setInterval(function(){var r;return r=M()-i-50,i=M(),a.push(r),a.length>A.eventLag.sampleCount&&a.shift(),e=g(a),++n>=A.eventLag.minSamples&&e<A.eventLag.lagThreshold?(s.progress=100,clearInterval(t)):s.progress=100*(3/(e+3))},50)}return e}(),h=function(){function e(e){this.source=e,this.last=this.sinceLastUpdate=0,this.rate=A.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=P(this.source,"progress"))}return e.prototype.tick=function(e,t){var i;return null==t&&(t=P(this.source,"progress")),t>=100&&(this.done=!0),t===this.last?this.sinceLastUpdate+=e:(this.sinceLastUpdate&&(this.rate=(t-this.last)/this.sinceLastUpdate),this.catchup=(t-this.progress)/A.catchupTime,this.sinceLastUpdate=0,this.last=t),t>this.progress&&(this.progress+=this.catchup*e),i=1-Math.pow(this.progress/100,A.easeFactor),this.progress+=i*this.rate*e,this.progress=Math.min(this.lastProgress+A.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},e}(),L=null,I=null,v=null,j=null,m=null,b=null,c.running=!1,S=function(){return A.restartOnPushState?c.restart():void 0},null!=window.history.pushState&&(V=window.history.pushState,window.history.pushState=function(){return S(),V.apply(window.history,arguments)}),null!=window.history.replaceState&&(G=window.history.replaceState,window.history.replaceState=function(){return S(),G.apply(window.history,arguments)}),d={ajax:e,elements:n,document:i,eventLag:s},(T=function(){var e,i,n,a,s,r,o,l;for(c.sources=L=[],r=["ajax","elements","document","eventLag"],i=0,a=r.length;a>i;i++)e=r[i],A[e]!==!1&&L.push(new d[e](A[e]));for(l=null!=(o=A.extraSources)?o:[],n=0,s=l.length;s>n;n++)R=l[n],L.push(new R(A));return c.bar=v=new t,I=[],j=new h})(),c.stop=function(){return c.trigger("stop"),c.running=!1,v.destroy(),b=!0,null!=m&&("function"==typeof _&&_(m),m=null),T()},c.restart=function(){return c.trigger("restart"),c.stop(),c.start()},c.go=function(){var e;return c.running=!0,v.render(),e=M(),b=!1,m=N(function(t,i){var n,a,s,r,o,l,u,d,p,f,m,g,_,y,w,k;for(d=100-v.progress,a=m=0,s=!0,l=g=0,y=L.length;y>g;l=++g)for(R=L[l],f=null!=I[l]?I[l]:I[l]=[],o=null!=(k=R.elements)?k:[R],u=_=0,w=o.length;w>_;u=++_)r=o[u],p=null!=f[u]?f[u]:f[u]=new h(r),s&=p.done,p.done||(a++,m+=p.tick(t));return n=m/a,v.update(j.tick(t,n)),v.done()||s||b?(v.update(100),c.trigger("done"),setTimeout(function(){return v.finish(),c.running=!1,c.trigger("hide")},Math.max(A.ghostTime,Math.max(A.minTime-(M()-e),0)))):i()})},c.start=function(e){w(A,e),c.running=!0;try{v.render()}catch(t){l=t}return document.querySelector(".pace")?(c.trigger("start"),c.go()):setTimeout(c.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return c}):"object"==typeof exports?module.exports=c:A.startOnPageLoad&&c.start()}).call(this);