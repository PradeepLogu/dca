(function(){this.module("Dchq",function(){return this.module("Services",function(){var e,t,i,a;return this.init=function(){var e,t;return $("form").on("nested:fieldAdded",function(){return Dchq.Services.init()}),$('select[data-type="type_of_service_id"]').length>0&&i(),$('select[data-type="type_of_service_id"]').change(function(){return i()}),$("#service_complimentary_service").change(function(){return Dchq.Services.recalculate_sub_total()}),$(".remove_nested_fields").live("click",function(){return Dchq.Services.recalculate_sub_total()}),$(".add_item_to_service_button").click(function(){return $(this).closest(".modal").modal("hide"),$.get("/services/add_item",{product_id:$("#add-product-to-service").find("select").val()})}),$('a[href="#add_item_confirmation"]').click(function(){return $(this).closest(".modal").modal("hide")}),$('form.simple_form button[type="submit"]').click(function(e){return $(this).closest("form").hasClass("new_service")?(e.preventDefault(),$("#service-agreement").modal("show")):void 0}),$('form.simple_form input[type="text"]').keydown(function(e){return $(this).closest("form").hasClass("new_service")&&13===e.keyCode?(e.preventDefault(),$("#service-agreement").modal("show")):void 0}),$("button.submit").click(function(){return $("#service_terms_and_conditions").val("1").closest("form").submit()}),$("input:checkbox.main").change(function(){return $("form input:checkbox").attr("checked",$(this).is(":checked"))}),$("#counter").length?(e=gon.SECONDS,t=$.timer(function(){return $("#counter").html(a(++e))}),t.set({time:1e3,autostart:gon.CONTINUE_TIMER}),$("a.play").click(function(e){return e.preventDefault(),t.play(),$(this).addClass("hide"),$("a.pause").removeClass("hide"),$.post("/services/"+$("#service_id").val()+"/time_intervals")}),$("a.pause").click(function(e){return e.preventDefault(),t.pause(),$(this).addClass("hide"),$("a.play").removeClass("hide"),$.post("/services/"+$("#service_id").val()+"/time_intervals/stop")})):void 0},a=function(e){var t,i,a,n,r,o;return a=Math.floor(e/3600),t=e%3600,n=Math.floor(t/60),i=t%60,o=Math.ceil(i),10>o&&(o="0"+o),r={h:a,m:n,s:o},""+r.h+":"+r.m+":"+r.s},i=function(){return $.get("/services/get_type_of_service",{service_id:$('select[data-type="type_of_service_id"]').map(function(){return this.value}).get().join()})},this.recalculate_sub_total=function(){return $("#sub_total_price").html(gon.currency+currency_formatted(t()+e()))},t=function(){var e;return e=0,$("#service_complimentary_service").is(":checked")||$("ul.products-list li.type_of_service span").each(function(t,i){return e+=parseFloat($(i).text().replace(/[^0-9\.]+/g,""))}),e},e=function(){var e;return e=0,$("ul.products-list li.product span").each(function(t,i){return $(i).is(":visible")?e+=parseFloat($(i).text().replace(/[^0-9\.]+/g,"")):void 0}),e}})}),$(function(){return Dchq.Services.init()})}).call(this);