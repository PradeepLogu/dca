!function(e,t){function i(t){e.extend(!0,kt,t)}function n(i,n,c){function u(e){at?g()&&(S(),x(e)):h()}function h(){st=n.theme?"ui":"fc",i.addClass("fc"),i.addClass(n.isRTL?"fc-rtl":"fc-ltr"),n.theme&&i.addClass("ui-widget"),at=e("<div class='fc-content' style='position:relative'/>").prependTo(i),it=new a(tt,n),nt=it.render(),nt&&i.prepend(nt),b(n.defaultView),n.handleWindowResize&&e(window).resize(T),v()||p()}function p(){setTimeout(function(){!rt.start&&v()&&k()},0)}function f(){rt&&(et("viewDestroy",rt,rt,rt.element),rt.triggerEventDestroy()),e(window).unbind("resize",T),it.destroy(),at.remove(),i.removeClass("fc fc-rtl ui-widget")}function g(){return i.is(":visible")}function v(){return e("body").is(":visible")}function b(e){rt&&e==rt.name||w(e)}function w(t){ft++,rt&&(et("viewDestroy",rt,rt,rt.element),$(),rt.triggerEventDestroy(),J(),rt.element.remove(),it.deactivateButton(rt.name)),it.activateButton(t),rt=new St[t](e("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(at),tt),k(),Q(),ft--}function k(e){(!rt.start||e||mt<rt.start||mt>=rt.end)&&g()&&x(e)}function x(e){ft++,rt.start&&(et("viewDestroy",rt,rt,rt.element),$(),N()),J(),rt.render(mt,e||0),D(),Q(),(rt.afterRender||H)(),L(),F(),et("viewRender",rt,rt,rt.element),rt.trigger("viewDisplay",dt),ft--,I()}function C(){g()&&($(),N(),S(),D(),E())}function S(){lt=n.contentHeight?n.contentHeight:n.height?n.height-(nt?nt.height():0)-P(at):Math.round(at.width()/Math.max(n.aspectRatio,.5))}function D(){lt===t&&S(),ft++,rt.setHeight(lt),rt.setWidth(at.width()),ft--,ot=i.outerWidth()}function T(){if(!ft)if(rt.start){var e=++pt;setTimeout(function(){e==pt&&!ft&&g()&&ot!=(ot=i.outerWidth())&&(ft++,C(),rt.trigger("windowResize",dt),ft--)},200)}else p()}function M(){N(),z()}function A(e){N(),E(e)}function E(e){g()&&(rt.setEventData(gt),rt.renderEvents(gt,e),rt.trigger("eventAfterAllRender"))}function N(){rt.triggerEventDestroy(),rt.clearEvents(),rt.clearEventData()}function I(){!n.lazyFetching||ut(rt.visStart,rt.visEnd)?z():E()}function z(){ht(rt.visStart,rt.visEnd)}function j(e){gt=e,E()}function R(e){A(e)}function L(){it.updateTitle(rt.title)}function F(){var e=new Date;e>=rt.start&&e<rt.end?it.disableButton("today"):it.enableButton("today")}function O(e,i,n){rt.select(e,i,n===t?!0:n)}function $(){rt&&rt.unselect()}function W(){k(-1)}function B(){k(1)}function q(){r(mt,-1),k()}function V(){r(mt,1),k()}function K(){mt=new Date,k()}function U(e,t,i){e instanceof Date?mt=d(e):m(mt,e,t,i),k()}function G(e,i,n){e!==t&&r(mt,e),i!==t&&o(mt,i),n!==t&&l(mt,n),k()}function Y(){return d(mt)}function J(){at.css({width:"100%",height:at.height(),overflow:"hidden"})}function Q(){at.css({width:"",height:"",overflow:""})}function X(){return rt}function Z(e,i){return i===t?n[e]:void(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(n[e]=i,C()))}function et(e,t){return n[e]?n[e].apply(t||dt,Array.prototype.slice.call(arguments,2)):void 0}var tt=this;tt.options=n,tt.render=u,tt.destroy=f,tt.refetchEvents=M,tt.reportEvents=j,tt.reportEventChange=R,tt.rerenderEvents=A,tt.changeView=b,tt.select=O,tt.unselect=$,tt.prev=W,tt.next=B,tt.prevYear=q,tt.nextYear=V,tt.today=K,tt.gotoDate=U,tt.incrementDate=G,tt.formatDate=function(e,t){return _(e,t,n)},tt.formatDates=function(e,t,i){return y(e,t,i,n)},tt.getDate=Y,tt.getView=X,tt.option=Z,tt.trigger=et,s.call(tt,n,c);var it,nt,at,st,rt,ot,lt,ct,ut=tt.isFetchNeeded,ht=tt.fetchEvents,dt=i[0],pt=0,ft=0,mt=new Date,gt=[];m(mt,n.year,n.month,n.date),n.droppable&&e(document).bind("dragstart",function(t,i){var a=t.target,s=e(a);if(!s.parents(".fc").length){var r=n.dropAccept;(e.isFunction(r)?r.call(a,s):s.is(r))&&(ct=a,rt.dragStart(ct,t,i))}}).bind("dragstop",function(e,t){ct&&(rt.dragStop(ct,e,t),ct=null)})}function a(t,i){function n(){d=i.theme?"ui":"fc";var t=i.header;return t?p=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(s("left")).append(s("center")).append(s("right"))):void 0}function a(){p.remove()}function s(n){var a=e("<td class='fc-header-"+n+"'/>"),s=i.header[n];return s&&e.each(s.split(" "),function(n){n>0&&a.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(n,r){if("title"==r)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(d+"-corner-right"),s=null;else{var o;if(t[r]?o=t[r]:St[r]&&(o=function(){u.removeClass(d+"-state-hover"),t.changeView(r)}),o){var l=i.theme?F(i.buttonIcons,r):null,c=F(i.buttonText,r),u=e("<span class='fc-button fc-button-"+r+" "+d+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":c)+"</span>").click(function(){u.hasClass(d+"-state-disabled")||o()}).mousedown(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){u.removeClass(d+"-state-down")}).hover(function(){u.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){u.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(a);$(u),s||u.addClass(d+"-corner-left"),s=u}}}),s&&s.addClass(d+"-corner-right")}),a}function r(e){p.find("h2").html(e)}function o(e){p.find("span.fc-button-"+e).addClass(d+"-state-active")}function l(e){p.find("span.fc-button-"+e).removeClass(d+"-state-active")}function c(e){p.find("span.fc-button-"+e).addClass(d+"-state-disabled")}function u(e){p.find("span.fc-button-"+e).removeClass(d+"-state-disabled")}var h=this;h.render=n,h.destroy=a,h.updateTitle=r,h.activateButton=o,h.deactivateButton=l,h.disableButton=c,h.enableButton=u;var d,p=e([])}function s(i,n){function a(e,t){return!C||C>e||t>S}function s(e,t){C=e,S=t,z=[];var i=++P,n=E.length;N=n;for(var a=0;n>a;a++)r(E[a],i)}function r(t,n){o(t,function(a){if(n==P){if(a){i.eventDataTransform&&(a=e.map(a,i.eventDataTransform)),t.eventDataTransform&&(a=e.map(a,t.eventDataTransform));for(var s=0;s<a.length;s++)a[s].source=t,_(a[s]);z=z.concat(a)}N--,N||M(z)}})}function o(t,n){var a,s,r=Ct.sourceFetchers;for(a=0;a<r.length;a++){if(s=r[a](t,C,S,n),s===!0)return;if("object"==typeof s)return void o(s,n)}var l=t.events;if(l)e.isFunction(l)?(v(),l(d(C),d(S),function(e){n(e),b()})):e.isArray(l)?n(l):n();else{var c=t.url;if(c){var u,h=t.success,p=t.error,f=t.complete;u=e.isFunction(t.data)?t.data():t.data;var m=e.extend({},u||{}),g=V(t.startParam,i.startParam),_=V(t.endParam,i.endParam);g&&(m[g]=Math.round(+C/1e3)),_&&(m[_]=Math.round(+S/1e3)),v(),e.ajax(e.extend({},Dt,t,{data:m,success:function(t){t=t||[];var i=q(h,this,arguments);e.isArray(i)&&(t=i),n(t)},error:function(){q(p,this,arguments),n()},complete:function(){q(f,this,arguments),b()}}))}else n()}}function l(e){e=c(e),e&&(N++,r(e,P))}function c(t){return e.isFunction(t)||e.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t?(y(t),E.push(t),t):void 0}function u(t){E=e.grep(E,function(e){return!w(e,t)}),z=e.grep(z,function(e){return!w(e.source,t)}),M(z)}function h(e){var t,i,n=z.length,a=T().defaultEventEnd,s=e.start-e._start,r=e.end?e.end-(e._end||a(e)):0;for(t=0;n>t;t++)i=z[t],i._id==e._id&&i!=e&&(i.start=new Date(+i.start+s),i.end=e.end?new Date(i.end?+i.end+r:+a(i)+r):null,i.title=e.title,i.url=e.url,i.allDay=e.allDay,i.className=e.className,i.editable=e.editable,i.color=e.color,i.backgroundColor=e.backgroundColor,i.borderColor=e.borderColor,i.textColor=e.textColor,_(i));_(e),M(z)}function p(e,t){_(e),e.source||(t&&(A.events.push(e),e.source=A),z.push(e)),M(z)}function f(t){if(t){if(!e.isFunction(t)){var i=t+"";t=function(e){return e._id==i}}z=e.grep(z,t,!0);for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=e.grep(E[n].events,t,!0))}else{z=[];for(var n=0;n<E.length;n++)e.isArray(E[n].events)&&(E[n].events=[])}M(z)}function m(t){return e.isFunction(t)?e.grep(z,t):t?(t+="",e.grep(z,function(e){return e._id==t})):z}function v(){I++||D("loading",null,!0,T())}function b(){--I||D("loading",null,!1,T())}function _(e){var n=e.source||{},a=V(n.ignoreTimezone,i.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+Tt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=d(e.start=g(e.start,a)),e.end=g(e.end,a),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?d(e.end):null,e.allDay===t&&(e.allDay=V(n.allDayDefault,i.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function y(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=Ct.sourceNormalizers,i=0;i<t.length;i++)t[i](e)}function w(e,t){return e&&t&&k(e)==k(t)}function k(e){return("object"==typeof e?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=a,x.fetchEvents=s,x.addEventSource=l,x.removeEventSource=u,x.updateEvent=h,x.renderEvent=p,x.removeEvents=f,x.clientEvents=m,x.normalizeEvent=_;for(var C,S,D=x.trigger,T=x.getView,M=x.reportEvents,A={events:[]},E=[A],P=0,N=0,I=0,z=[],H=0;H<n.length;H++)c(n[H])}function r(e,t,i){return e.setFullYear(e.getFullYear()+t),i||h(e),e}function o(e,t,i){if(+e){var n=e.getMonth()+t,a=d(e);for(a.setDate(1),a.setMonth(n),e.setMonth(n),i||h(e);e.getMonth()!=a.getMonth();)e.setDate(e.getDate()+(a>e?1:-1))}return e}function l(e,t,i){if(+e){var n=e.getDate()+t,a=d(e);a.setHours(9),a.setDate(n),e.setDate(n),i||h(e),c(e,a)}return e}function c(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*Et)}function u(e,t){return e.setMinutes(e.getMinutes()+t),e}function h(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function d(e,t){return t?h(new Date(+e)):new Date(+e)}function p(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function f(e,t){return Math.round((d(e,!0)-d(t,!0))/At)}function m(e,i,n,a){i!==t&&i!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(i)),n!==t&&n!=e.getMonth()&&(e.setDate(1),e.setMonth(n)),a!==t&&e.setDate(a)}function g(e,i){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(i===t&&(i=!0),v(e,i)||(e?new Date(e):null)):null}function v(e,t){var i=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(t||!i[13]){var a=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),a.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),a.setDate(i[5])),c(n,a),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,a)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+60*s*1e3)}return n}function b(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var i=parseInt(t[1],10);return t[3]&&(i%=12,"p"==t[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(t[2]?parseInt(t[2],10):0)}}function _(e,t,i){return y(e,null,t,i)}function y(e,t,i,n){n=n||kt;var a,s,r,o,l=e,c=t,u=i.length,h="";for(a=0;u>a;a++)if(s=i.charAt(a),"'"==s){for(r=a+1;u>r;r++)if("'"==i.charAt(r)){l&&(h+=r==a+1?"'":i.substring(a+1,r),a=r);break}}else if("("==s){for(r=a+1;u>r;r++)if(")"==i.charAt(r)){var d=_(l,i.substring(a+1,r),n);parseInt(d.replace(/\D/,""),10)&&(h+=d),a=r;break}}else if("["==s){for(r=a+1;u>r;r++)if("]"==i.charAt(r)){var p=i.substring(a+1,r),d=_(l,p,n);d!=_(c,p,n)&&(h+=d),a=r;break}}else if("{"==s)l=t,c=e;else if("}"==s)l=e,c=t;else{for(r=u;r>a;r--)if(o=Nt[i.substring(a,r)]){l&&(h+=o(l,n)),a=r-1;break}r==a&&l&&(h+=s)}return h}function w(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1}function k(e){return e.end?x(e.end,e.allDay):l(d(e.start),1)}function x(e,t){return e=d(e),t||e.getHours()||e.getMinutes()?l(e,1):h(e)}function C(i,n,a){i.unbind("mouseover").mouseover(function(i){for(var s,r,o,l=i.target;l!=this;)s=l,l=l.parentNode;(r=s._fci)!==t&&(s._fci=t,o=n[r],a(o.event,o.element,o),e(i.target).trigger(i)),i.stopPropagation()})}function S(t,i,n){for(var a,s=0;s<t.length;s++)a=e(t[s]),a.width(Math.max(0,i-T(a,n)))}function D(t,i,n){for(var a,s=0;s<t.length;s++)a=e(t[s]),a.height(Math.max(0,i-P(a,n)))}function T(e,t){return M(e)+E(e)+(t?A(e):0)}function M(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function E(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function P(e,t){return N(e)+z(e)+(t?I(e):0)}function N(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function I(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function z(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function H(){}function j(e,t){return e-t}function R(e){return Math.max.apply(Math,e)}function L(e){return(10>e?"0":"")+e}function F(e,i){if(e[i]!==t)return e[i];for(var n,a=i.split(/(?=[A-Z])/),s=a.length-1;s>=0;s--)if(n=e[a[s].toLowerCase()],n!==t)return n;return e[""]}function O(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function $(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function W(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function B(e,t){var i=e.source||{},n=e.color,a=i.color,s=t("eventColor"),r=e.backgroundColor||n||i.backgroundColor||a||t("eventBackgroundColor")||s,o=e.borderColor||n||i.borderColor||a||t("eventBorderColor")||s,l=e.textColor||i.textColor||t("eventTextColor"),c=[];return r&&c.push("background-color:"+r),o&&c.push("border-color:"+o),l&&c.push("color:"+l),c.join(";")}function q(t,i,n){if(e.isFunction(t)&&(t=[t]),t){var a,s;for(a=0;a<t.length;a++)s=t[a].apply(i,n)||s;return s}}function V(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==t)return arguments[e]}function K(e,t){function i(e,t){t&&(o(e,t),e.setDate(1));var i=a("firstDay"),h=d(e,!0);h.setDate(1);var p=o(d(h),1),m=d(h);l(m,-((m.getDay()-i+7)%7)),r(m);var g=d(p);l(g,(7-g.getDay()+i)%7),r(g,-1,!0);var v=c(),b=Math.round(f(g,m)/7);"fixed"==a("weekMode")&&(l(g,7*(6-b)),b=6),n.title=u(h,a("titleFormat")),n.start=h,n.end=p,n.visStart=m,n.visEnd=g,s(b,v,!0)}var n=this;n.render=i,Y.call(n,e,t,"month");var a=n.opt,s=n.renderBasic,r=n.skipHiddenDays,c=n.getCellsPerWeek,u=t.formatDate}function U(e,t){function i(e,t){t&&l(e,7*t);var i=l(d(e),-((e.getDay()-a("firstDay")+7)%7)),u=l(d(i),7),h=d(i);r(h);var p=d(u);r(p,-1,!0);var f=o();n.start=i,n.end=u,n.visStart=h,n.visEnd=p,n.title=c(h,l(d(p),-1),a("titleFormat")),s(1,f,!1)}var n=this;n.render=i,Y.call(n,e,t,"basicWeek");var a=n.opt,s=n.renderBasic,r=n.skipHiddenDays,o=n.getCellsPerWeek,c=t.formatDates}function G(e,t){function i(e,t){t&&l(e,t),r(e,0>t?-1:1);var i=d(e,!0),c=l(d(i),1);n.title=o(e,a("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,s(1,1,!1)}var n=this;n.render=i,Y.call(n,e,t,"basicDay");var a=n.opt,s=n.renderBasic,r=n.skipHiddenDays,o=t.formatDate}function Y(t,i,n){function a(e,t,i){tt=e,it=t,nt=i,s(),B||r(),o()}function s(){lt=ft("theme")?"ui":"fc",ct=ft("columnFormat"),ut=ft("weekNumbers"),dt=ft("weekNumberTitle"),pt="iso"!=ft("weekNumberCalculation")?"w":"W"}function r(){Y=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function o(){var i=c();R&&R.remove(),R=e(i).appendTo(t),L=R.find("thead"),F=L.find(".fc-day-header"),B=R.find("tbody"),q=B.find("tr"),V=B.find(".fc-day"),K=q.find("td:first-child"),U=q.eq(0).find(".fc-day > div"),G=q.eq(0).find(".fc-day-content > div"),W(L.add(L.find("tr"))),W(q),q.eq(0).addClass("fc-first"),q.filter(":last").addClass("fc-last"),V.each(function(t,i){var n=Ct(Math.floor(t/it),t%it);mt("dayRender",j,n,e(i))}),b(V)}function c(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+u()+p()+"</table>";return e}function u(){var e,t,i=lt+"-widget-header",n="";for(n+="<thead><tr>",ut&&(n+="<th class='fc-week-number "+i+"'>"+O(dt)+"</th>"),e=0;it>e;e++)t=Ct(0,e),n+="<th class='fc-day-header fc-"+Mt[t.getDay()]+" "+i+"'>"+O(Tt(t,ct))+"</th>";return n+="</tr></thead>"}function p(){var e,t,i,n=lt+"-widget-content",a="";for(a+="<tbody>",e=0;tt>e;e++){for(a+="<tr class='fc-week'>",ut&&(i=Ct(e,0),a+="<td class='fc-week-number "+n+"'><div>"+O(Tt(i,pt))+"</div></td>"),t=0;it>t;t++)i=Ct(e,t),a+=f(i);a+="</tr>"}return a+="</tbody>"}function f(e){var t=lt+"-widget-content",i=j.start.getMonth(),n=h(new Date),a="",s=["fc-day","fc-"+Mt[e.getDay()],t];return e.getMonth()!=i&&s.push("fc-other-month"),+e==+n?s.push("fc-today",lt+"-state-highlight"):s.push(n>e?"fc-past":"fc-future"),a+="<td class='"+s.join(" ")+"' data-date='"+Tt(e,"yyyy-MM-dd")+"'><div>",nt&&(a+="<div class='fc-day-number'>"+e.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function m(t){X=t;var i,n,a,s=X-L.height();"variable"==ft("weekMode")?i=n=Math.floor(s/(1==tt?2:6)):(i=Math.floor(s/tt),n=s-i*(tt-1)),K.each(function(t,s){tt>t&&(a=e(s),a.find("> div").css("min-height",(t==tt-1?n:i)-P(a)))})}function g(e){Q=e,rt.clear(),ot.clear(),et=0,ut&&(et=L.find("th.fc-week-number").outerWidth()),Z=Math.floor((Q-et)/it),S(F.slice(0,-1),Z)}function b(e){e.click(_).mousedown(xt)}function _(t){if(!ft("selectable")){var i=v(e(this).data("date"));mt("dayClick",this,i,!0,t)}}function y(e,t,i){i&&at.build();for(var n=Dt(e,t),a=0;a<n.length;a++){var s=n[a];b(w(s.row,s.leftCol,s.row,s.rightCol))}}function w(e,i,n,a){var s=at.rect(e,i,n,a,t);return yt(s,t)}function k(e){return d(e)}function x(e,t){y(e,l(d(t),1),!0)}function C(){kt()}function D(e,t,i){var n=St(e),a=V[n.row*it+n.col];mt("dayClick",a,e,t,i)}function T(e,t){st.start(function(e){kt(),e&&w(e.row,e.col,e.row,e.col)},t)}function M(e,t,i){var n=st.stop();if(kt(),n){var a=Ct(n);mt("drop",e,a,!0,t,i)}}function A(e){return d(e.start)}function E(e){return rt.left(e)}function N(e){return rt.right(e)}function I(e){return ot.left(e)}function z(e){return ot.right(e)}function H(e){return q.eq(e)}var j=this;j.renderBasic=a,j.setHeight=m,j.setWidth=g,j.renderDayOverlay=y,j.defaultSelectionEnd=k,j.renderSelection=x,j.clearSelection=C,j.reportDayClick=D,j.dragStart=T,j.dragStop=M,j.defaultEventEnd=A,j.getHoverListener=function(){return st},j.colLeft=E,j.colRight=N,j.colContentLeft=I,j.colContentRight=z,j.getIsCellAllDay=function(){return!0},j.allDayRow=H,j.getRowCnt=function(){return tt},j.getColCnt=function(){return it},j.getColWidth=function(){return Z},j.getDaySegmentContainer=function(){return Y},ht.call(j,t,i,n),vt.call(j),gt.call(j),J.call(j);var R,L,F,B,q,V,K,U,G,Y,Q,X,Z,et,tt,it,nt,at,st,rt,ot,lt,ct,ut,dt,pt,ft=j.opt,mt=j.trigger,yt=j.renderOverlay,kt=j.clearOverlays,xt=j.daySelectionMousedown,Ct=j.cellToDate,St=j.dateToCell,Dt=j.rangeToSegments,Tt=i.formatDate;$(t.addClass("fc-grid")),at=new bt(function(t,i){var n,a,s;F.each(function(t,r){n=e(r),a=n.offset().left,t&&(s[1]=a),s=[a],i[t]=s}),s[1]=a+n.outerWidth(),q.each(function(i,r){tt>i&&(n=e(r),a=n.offset().top,i&&(s[1]=a),s=[a],t[i]=s)}),s[1]=a+n.outerHeight()}),st=new _t(at),rt=new wt(function(e){return U.eq(e)}),ot=new wt(function(e){return G.eq(e)})}function J(){function e(e,t){i.renderDayEvents(e,t)}function t(){i.getDaySegmentContainer().empty()}var i=this;i.renderEvents=e,i.clearEvents=t,dt.call(i)}function Q(e,t){function i(e,t){t&&l(e,7*t);var i=l(d(e),-((e.getDay()-a("firstDay")+7)%7)),u=l(d(i),7),h=d(i);r(h);var p=d(u);r(p,-1,!0);var f=o();n.title=c(h,l(d(p),-1),a("titleFormat")),n.start=i,n.end=u,n.visStart=h,n.visEnd=p,s(f)}var n=this;n.render=i,Z.call(n,e,t,"agendaWeek");var a=n.opt,s=n.renderAgenda,r=n.skipHiddenDays,o=n.getCellsPerWeek,c=t.formatDates}function X(e,t){function i(e,t){t&&l(e,t),r(e,0>t?-1:1);var i=d(e,!0),c=l(d(i),1);n.title=o(e,a("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=c,s(1)}var n=this;n.render=i,Z.call(n,e,t,"agendaDay");var a=n.opt,s=n.renderAgenda,r=n.skipHiddenDays,o=t.formatDate}function Z(i,n,a){function s(e){zt=e,r(),Z?c():o()}function r(){Ot=Gt("theme")?"ui":"fc",$t=Gt("isRTL"),Wt=b(Gt("minTime")),Bt=b(Gt("maxTime")),qt=Gt("columnFormat"),Vt=Gt("weekNumbers"),Kt=Gt("weekNumberTitle"),Ut="iso"!=Gt("weekNumberCalculation")?"w":"W",Pt=Gt("snapMinutes")||Gt("slotMinutes")}function o(){var t,n,a,s,r,o=Ot+"-widget-header",l=Ot+"-widget-content",h=Gt("slotMinutes")%15==0;for(c(),ct=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),Gt("allDaySlot")?(ut=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ct),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+Gt("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",dt=e(t).appendTo(ct),pt=dt.find("tr"),k(pt.find("td")),ct.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):ut=e([]),ft=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ct),mt=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(ft),yt=e("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(mt),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",n=p(),s=u(d(n),Bt),u(n,Wt),Ht=0,a=0;s>n;a++)r=n.getMinutes(),t+="<tr class='fc-slot"+a+" "+(r?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(h&&r?"&nbsp;":si(n,Gt("axisFormat")))+"</th><td class='"+l+"'><div style='position:relative'>&nbsp;</div></td></tr>",u(n,Gt("slotMinutes")),Ht++;t+="</tbody></table>",kt=e(t).appendTo(mt),x(kt.find("td"))}function c(){var t=f();Z&&Z.remove(),Z=e(t).appendTo(i),tt=Z.find("thead"),it=tt.find("th").slice(1,-1),nt=Z.find("tbody"),at=nt.find("td").slice(0,-1),st=at.find("> div"),rt=at.find(".fc-day-content > div"),ot=at.eq(0),lt=st.eq(0),W(tt.add(tt.find("tr"))),W(nt.add(nt.find("tr")))}function f(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+m()+g()+"</table>";return e}function m(){var e,t,i,n=Ot+"-widget-header",a="";for(a+="<thead><tr>",Vt?(e=ii(0,0),t=si(e,Ut),$t?t+=Kt:t=Kt+t,a+="<th class='fc-agenda-axis fc-week-number "+n+"'>"+O(t)+"</th>"):a+="<th class='fc-agenda-axis "+n+"'>&nbsp;</th>",i=0;zt>i;i++)e=ii(0,i),a+="<th class='fc-"+Mt[e.getDay()]+" fc-col"+i+" "+n+"'>"+O(si(e,qt))+"</th>";return a+="<th class='fc-agenda-gutter "+n+"'>&nbsp;</th></tr></thead>"}function g(){var e,t,i,n,a,s=Ot+"-widget-header",r=Ot+"-widget-content",o=h(new Date),l="";for(l+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",i="",t=0;zt>t;t++)e=ii(0,t),a=["fc-col"+t,"fc-"+Mt[e.getDay()],r],+e==+o?a.push(Ot+"-state-highlight","fc-today"):a.push(o>e?"fc-past":"fc-future"),n="<td class='"+a.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",i+=n;return l+=i,l+="<td class='fc-agenda-gutter "+r+"'>&nbsp;</td></tr></tbody>"}function v(e){e===t&&(e=St),St=e,ri={};var i=nt.position().top,n=ft.position().top,a=Math.min(e-i,kt.height()+n+1);lt.height(a-P(ot)),ct.css("top",i),ft.height(a-n-1),Et=kt.find("tr:first").height()+1,Nt=Gt("slotMinutes")/Pt,It=Et/Nt}function _(t){Ct=t,Lt.clear(),Ft.clear();var i=tt.find("th:first");dt&&(i=i.add(dt.find("th:first"))),i=i.add(kt.find("th:first")),Dt=0,S(i.width("").each(function(t,i){Dt=Math.max(Dt,e(i).outerWidth())}),Dt);var n=Z.find(".fc-agenda-gutter");dt&&(n=n.add(dt.find("th.fc-agenda-gutter")));var a=ft[0].clientWidth;At=ft.width()-a,At?(S(n,At),n.show().prev().removeClass("fc-last")):n.hide().prev().addClass("fc-last"),Tt=Math.floor((a-Dt)/zt),S(it.slice(0,-1),Tt)}function y(){function e(){ft.scrollTop(n)}var t=p(),i=d(t);i.setHours(Gt("firstHour"));var n=L(t,i)+1;e(),setTimeout(e,0)}function w(){y()}function k(e){e.click(C).mousedown(ei)}function x(e){e.click(C).mousedown(G)}function C(e){if(!Gt("selectable")){var t=Math.min(zt-1,Math.floor((e.pageX-Z.offset().left-Dt)/Tt)),i=ii(0,t),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var a=parseInt(n[1])*Gt("slotMinutes"),s=Math.floor(a/60);i.setHours(s),i.setMinutes(a%60+Wt),Yt("dayClick",at[t],i,!1,e)}else Yt("dayClick",at[t],i,!0,e)}}function T(e,t,i){i&&jt.build();for(var n=ai(e,t),a=0;a<n.length;a++){var s=n[a];k(M(s.row,s.leftCol,s.row,s.rightCol))}}function M(e,t,i,n){var a=jt.rect(e,t,i,n,ct);return Jt(a,ct)}function A(e,t){for(var i=0;zt>i;i++){var n=ii(0,i),a=l(d(n),1),s=new Date(Math.max(n,e)),r=new Date(Math.min(a,t));if(r>s){var o=jt.rect(0,i,0,i,mt),c=L(n,s),u=L(n,r);o.top=c,o.height=u-c,x(Jt(o,mt))}}}function E(e){return Lt.left(e)}function N(e){return Ft.left(e)}function I(e){return Lt.right(e)}function z(e){return Ft.right(e)}function H(e){return Gt("allDaySlot")&&!e.row}function R(e){var t=ii(0,e.col),i=e.row;return Gt("allDaySlot")&&i--,i>=0&&u(t,Wt+i*Pt),t}function L(e,i){if(e=d(e,!0),i<u(d(e),Wt))return 0;if(i>=u(d(e),Bt))return kt.height();var n=Gt("slotMinutes"),a=60*i.getHours()+i.getMinutes()-Wt,s=Math.floor(a/n),r=ri[s];return r===t&&(r=ri[s]=kt.find("tr").eq(s).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+Et*(a%n/n)))}function F(){return pt}function B(e){var t=d(e.start);return e.allDay?t:u(t,Gt("defaultEventMinutes"))}function q(e,t){return t?d(e):u(d(e),Gt("slotMinutes"))}function V(e,t,i){i?Gt("allDaySlot")&&T(e,l(d(t),1),!0):K(e,t)}function K(t,i){var n=Gt("selectHelper");if(jt.build(),n){var a=ni(t).col;if(a>=0&&zt>a){var s=jt.rect(0,a,0,a,mt),r=L(t,t),o=L(t,i);if(o>r){if(s.top=r,s.height=o-r,s.left+=2,s.width-=5,e.isFunction(n)){var l=n(t,i);l&&(s.position="absolute",xt=e(l).css(s).appendTo(mt))}else s.isStart=!0,s.isEnd=!0,xt=e(ti({title:"",start:t,end:i,className:["fc-select-helper"],editable:!1},s)),xt.css("opacity",Gt("dragOpacity"));xt&&(x(xt),mt.append(xt),S(xt,s.width,!0),D(xt,s.height,!0))}}}else A(t,i)}function U(){Qt(),xt&&(xt.remove(),xt=null)}function G(t){if(1==t.which&&Gt("selectable")){Zt(t);var i;Rt.start(function(e,t){if(U(),e&&e.col==t.col&&!H(e)){var n=R(t),a=R(e);i=[n,u(d(n),Pt),a,u(d(a),Pt)].sort(j),K(i[0],i[3])}else i=null},t),e(document).one("mouseup",function(e){Rt.stop(),i&&(+i[0]==+i[1]&&Y(i[0],!1,e),Xt(i[0],i[3],!1,e))})}}function Y(e,t,i){Yt("dayClick",at[ni(e).col],e,t,i)}function J(e,t){Rt.start(function(e){if(Qt(),e)if(H(e))M(e.row,e.col,e.row,e.col);else{var t=R(e),i=u(d(t),Gt("defaultEventMinutes"));A(t,i)}},t)}function Q(e,t,i){var n=Rt.stop();Qt(),n&&Yt("drop",e,R(n),H(n),t,i)}var X=this;X.renderAgenda=s,X.setWidth=_,X.setHeight=v,X.afterRender=w,X.defaultEventEnd=B,X.timePosition=L,X.getIsCellAllDay=H,X.allDayRow=F,X.getCoordinateGrid=function(){return jt},X.getHoverListener=function(){return Rt},X.colLeft=E,X.colRight=I,X.colContentLeft=N,X.colContentRight=z,X.getDaySegmentContainer=function(){return ut},X.getSlotSegmentContainer=function(){return yt},X.getMinMinute=function(){return Wt},X.getMaxMinute=function(){return Bt},X.getSlotContainer=function(){return mt},X.getRowCnt=function(){return 1},X.getColCnt=function(){return zt},X.getColWidth=function(){return Tt},X.getSnapHeight=function(){return It},X.getSnapMinutes=function(){return Pt},X.defaultSelectionEnd=q,X.renderDayOverlay=T,X.renderSelection=V,X.clearSelection=U,X.reportDayClick=Y,X.dragStart=J,X.dragStop=Q,ht.call(X,i,n,a),vt.call(X),gt.call(X),et.call(X);var Z,tt,it,nt,at,st,rt,ot,lt,ct,ut,dt,pt,ft,mt,yt,kt,xt,Ct,St,Dt,Tt,At,Et,Pt,Nt,It,zt,Ht,jt,Rt,Lt,Ft,Ot,$t,Wt,Bt,qt,Vt,Kt,Ut,Gt=X.opt,Yt=X.trigger,Jt=X.renderOverlay,Qt=X.clearOverlays,Xt=X.reportSelection,Zt=X.unselect,ei=X.daySelectionMousedown,ti=X.slotSegHtml,ii=X.cellToDate,ni=X.dateToCell,ai=X.rangeToSegments,si=n.formatDate,ri={};$(i.addClass("fc-agenda")),jt=new bt(function(t,i){function n(e){return Math.max(l,Math.min(c,e))}var a,s,r;it.each(function(t,n){a=e(n),s=a.offset().left,t&&(r[1]=s),r=[s],i[t]=r}),r[1]=s+a.outerWidth(),Gt("allDaySlot")&&(a=pt,s=a.offset().top,t[0]=[s,s+a.outerHeight()]);for(var o=mt.offset().top,l=ft.offset().top,c=l+ft.outerHeight(),u=0;Ht*Nt>u;u++)t.push([n(o+It*u),n(o+It*(u+1))])}),Rt=new _t(jt),Lt=new wt(function(e){return st.eq(e)}),Ft=new wt(function(e){return rt.eq(e)})}function et(){function i(e,t){var i,n=e.length,s=[],r=[];for(i=0;n>i;i++)e[i].allDay?s.push(e[i]):r.push(e[i]);b("allDaySlot")&&(et(s,t),M()),o(a(r),t)}function n(){A().empty(),E().empty()}function a(t){var i,n,a,o,l,c=$(),h=z(),p=I(),f=e.map(t,r),m=[];for(n=0;c>n;n++)for(i=F(0,n),u(i,h),l=s(t,f,i,u(d(i),p-h)),l=tt(l),a=0;a<l.length;a++)o=l[a],o.col=n,m.push(o);return m}function s(e,t,i,n){var a,s,r,o,l,c,u,h,p=[],f=e.length;for(a=0;f>a;a++)s=e[a],r=s.start,o=t[a],o>i&&n>r&&(i>r?(l=d(i),u=!1):(l=r,u=!0),o>n?(c=d(n),h=!1):(c=o,h=!0),p.push({event:s,start:l,end:c,isStart:u,isEnd:h}));return p.sort(ut)}function r(e){return e.end?d(e.end):u(d(e.start),b("defaultEventMinutes"))}function o(i,n){var a,s,r,o,l,u,d,p,f,m,g,v,y,w,k,x,S=i.length,D="",M=E(),A=b("isRTL");for(a=0;S>a;a++)s=i[a],r=s.event,o=H(s.start,s.start),l=H(s.start,s.end),u=R(s.col),d=L(s.col),p=d-u,d-=.025*p,p=d-u,f=p*(s.forwardCoord-s.backwardCoord),b("slotEventOverlap")&&(f=Math.max(2*(f-10),f)),A?(g=d-s.backwardCoord*p,m=g-f):(m=u+s.backwardCoord*p,g=m+f),m=Math.max(m,u),g=Math.min(g,d),f=g-m,s.top=o,s.left=m,s.outerWidth=f,s.outerHeight=l-o,D+=c(r,s);for(M[0].innerHTML=D,v=M.children(),a=0;S>a;a++)s=i[a],r=s.event,y=e(v[a]),w=_("eventRender",r,r,y),w===!1?y.remove():(w&&w!==!0&&(y.remove(),y=e(w).css({position:"absolute",top:s.top,left:s.left}).appendTo(M)),s.element=y,r._id===n?h(r,y,s):y[0]._fci=a,U(r,y));for(C(M,i,h),a=0;S>a;a++)s=i[a],(y=s.element)&&(s.vsides=P(y,!0),s.hsides=T(y,!0),k=y.find(".fc-event-title"),k.length&&(s.contentTop=k[0].offsetTop));for(a=0;S>a;a++)s=i[a],(y=s.element)&&(y[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",x=Math.max(0,s.outerHeight-s.vsides),y[0].style.height=x+"px",r=s.event,s.contentTop!==t&&x-s.contentTop<10&&(y.find("div.fc-event-time").text(nt(r.start,b("timeFormat"))+" - "+r.title),y.find("div.fc-event-title").remove()),_("eventAfterRender",r,r,y))}function c(e,t){var i="<",n=e.url,a=B(e,b),s=["fc-event","fc-event-vert"];return y(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),i+=n?"a href='"+O(e.url)+"'":"div",i+=" class='"+s.join(" ")+"' style='position:absolute;top:"+t.top+"px;left:"+t.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+O(at(e.start,e.end,b("timeFormat")))+"</div><div class='fc-event-title'>"+O(e.title||"")+"</div></div><div class='fc-event-bg'></div>",t.isEnd&&w(e)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function h(e,t,i){var n=t.find("div.fc-event-time");y(e)&&m(e,t,n),i.isEnd&&w(e)&&g(e,t,n),S(e,t)}function p(e,t,i){function n(){c||(t.width(a).height("").draggable("option","grid",null),c=!0)}var a,s,r,o=i.isStart,c=!0,u=N(),h=W(),p=q(),m=V(),g=z();t.draggable({opacity:b("dragOpacity","month"),revertDuration:b("dragRevertDuration"),start:function(i,g){_("eventDragStart",t,e,i,g),Y(e,t),a=t.width(),u.start(function(i,a){if(Z(),i){s=!1;var u=F(0,a.col),g=F(0,i.col);r=f(g,u),i.row?o?c&&(t.width(h-10),D(t,p*Math.round((e.end?(e.end-e.start)/Pt:b("defaultEventMinutes"))/m)),t.draggable("option","grid",[h,1]),c=!1):s=!0:(X(l(d(e.start),r),l(k(e),r)),n()),s=s||c&&!r}else n(),s=!0;t.draggable("option","revert",s)},i,"drag")},stop:function(i,a){if(u.stop(),Z(),_("eventDragStop",t,e,i,a),s)n(),t.css("filter",""),G(e,t);else{var o=0;c||(o=Math.round((t.offset().top-K().offset().top)/p)*m+g-(60*e.start.getHours()+e.start.getMinutes())),J(this,e,r,o,c,i,a)}}})}function m(e,t,i){function n(){Z(),o&&(h?(i.hide(),t.draggable("option","grid",null),X(l(d(e.start),y),l(k(e),y))):(a(w),i.css("display",""),t.draggable("option","grid",[D,T])))}function a(t){var n,a=u(d(e.start),t);e.end&&(n=u(d(e.end),t)),i.text(at(a,n,b("timeFormat")))}var s,r,o,c,h,p,m,g,y,w,x,C=v.getCoordinateGrid(),S=$(),D=W(),T=q(),M=V();t.draggable({scroll:!1,grid:[D,T],axis:1==S?"y":!1,opacity:b("dragOpacity"),revertDuration:b("dragRevertDuration"),start:function(i,n){_("eventDragStart",t,e,i,n),Y(e,t),C.build(),s=t.position(),r=C.cell(i.pageX,i.pageY),o=c=!0,h=p=j(r),m=g=0,y=0,w=x=0
},drag:function(e,i){var a=C.cell(e.pageX,e.pageY);if(o=!!a){if(h=j(a),m=Math.round((i.position.left-s.left)/D),m!=g){var l=F(0,r.col),u=r.col+m;u=Math.max(0,u),u=Math.min(S-1,u);var d=F(0,u);y=f(d,l)}h||(w=Math.round((i.position.top-s.top)/T)*M)}(o!=c||h!=p||m!=g||w!=x)&&(n(),c=o,p=h,g=m,x=w),t.draggable("option","revert",!o)},stop:function(i,a){Z(),_("eventDragStop",t,e,i,a),o&&(h||y||w)?J(this,e,y,h?0:w,h,i,a):(o=!0,h=!1,m=0,y=0,w=0,n(),t.css("filter",""),t.css(s),G(e,t))}})}function g(e,t,i){var n,a,s=q(),r=V();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(i,s){n=a=0,Y(e,t),_("eventResizeStart",this,e,i,s)},resize:function(o,l){n=Math.round((Math.max(s,t.height())-l.originalSize.height)/s),n!=a&&(i.text(at(e.start,n||e.end?u(x(e),r*n):null,b("timeFormat"))),a=n)},stop:function(i,a){_("eventResizeStop",this,e,i,a),n?Q(this,e,0,r*n,i,a):G(e,t)}})}var v=this;v.renderEvents=i,v.clearEvents=n,v.slotSegHtml=c,dt.call(v);var b=v.opt,_=v.trigger,y=v.isEventDraggable,w=v.isEventResizable,x=v.eventEnd,S=v.eventElementHandlers,M=v.setHeight,A=v.getDaySegmentContainer,E=v.getSlotSegmentContainer,N=v.getHoverListener,I=v.getMaxMinute,z=v.getMinMinute,H=v.timePosition,j=v.getIsCellAllDay,R=v.colContentLeft,L=v.colContentRight,F=v.cellToDate,$=v.getColCnt,W=v.getColWidth,q=v.getSnapHeight,V=v.getSnapMinutes,K=v.getSlotContainer,U=v.reportEventElement,G=v.showEvents,Y=v.hideEvents,J=v.eventDrop,Q=v.eventResize,X=v.renderDayOverlay,Z=v.clearOverlays,et=v.renderDayEvents,it=v.calendar,nt=it.formatDate,at=it.formatDates;v.draggableDayEvent=p}function tt(e){var t,i=it(e),n=i[0];if(nt(i),n){for(t=0;t<n.length;t++)at(n[t]);for(t=0;t<n.length;t++)st(n[t],0,0)}return rt(i)}function it(e){var t,i,n,a=[];for(t=0;t<e.length;t++){for(i=e[t],n=0;n<a.length&&ot(i,a[n]).length;n++);(a[n]||(a[n]=[])).push(i)}return a}function nt(e){var t,i,n,a,s;for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],a.forwardSegs=[],s=t+1;s<e.length;s++)ot(a,e[s],a.forwardSegs)}function at(e){var i,n,a=e.forwardSegs,s=0;if(e.forwardPressure===t){for(i=0;i<a.length;i++)n=a[i],at(n),s=Math.max(s,1+n.forwardPressure);e.forwardPressure=s}}function st(e,i,n){var a,s=e.forwardSegs;if(e.forwardCoord===t)for(s.length?(s.sort(ct),st(s[0],i+1,n),e.forwardCoord=s[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-n)/(i+1),a=0;a<s.length;a++)st(s[a],0,e.forwardCoord)}function rt(e){var t,i,n,a=[];for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)a.push(i[n]);return a}function ot(e,t,i){i=i||[];for(var n=0;n<t.length;n++)lt(e,t[n])&&i.push(t[n]);return i}function lt(e,t){return e.end>t.start&&e.start<t.end}function ct(e,t){return t.forwardPressure-e.forwardPressure||(e.backwardCoord||0)-(t.backwardCoord||0)||ut(e,t)}function ut(e,t){return e.start-t.start||t.end-t.start-(e.end-e.start)||(e.event.title||"").localeCompare(t.event.title)}function ht(i,n,a){function s(t,i){var n=U[t];return e.isPlainObject(n)?F(n,i||a):n}function r(e,t){return n.trigger.apply(n,[e,t||L].concat(Array.prototype.slice.call(arguments,2),[L]))}function o(e){var t=e.source||{};return V(e.startEditable,t.startEditable,s("eventStartEditable"),e.editable,t.editable,s("editable"))&&!s("disableDragging")}function c(e){var t=e.source||{};return V(e.durationEditable,t.durationEditable,s("eventDurationEditable"),e.editable,t.editable,s("editable"))&&!s("disableResizing")}function h(e){B={};var t,i,n=e.length;for(t=0;n>t;t++)i=e[t],B[i._id]?B[i._id].push(i):B[i._id]=[i]}function p(){B={},q={},K=[]}function m(e){return e.end?d(e.end):O(e)}function g(e,t){K.push({event:e,element:t}),q[e._id]?q[e._id].push(t):q[e._id]=[t]}function v(){e.each(K,function(e,t){L.trigger("eventDestroy",t.event,t.event,t.element)})}function b(e,t){t.click(function(i){return t.hasClass("ui-draggable-dragging")||t.hasClass("ui-resizable-resizing")?void 0:r("eventClick",this,e,i)}).hover(function(t){r("eventMouseover",this,e,t)},function(t){r("eventMouseout",this,e,t)})}function _(e,t){w(e,t,"show")}function y(e,t){w(e,t,"hide")}function w(e,t,i){var n,a=q[e._id],s=a.length;for(n=0;s>n;n++)t&&a[n][0]==t[0]||a[n][i]()}function k(e,t,i,n,a,s,o){var l=t.allDay,c=t._id;C(B[c],i,n,a),r("eventDrop",e,t,i,n,a,function(){C(B[c],-i,-n,l),W(c)},s,o),W(c)}function x(e,t,i,n,a,s){var o=t._id;S(B[o],i,n),r("eventResize",e,t,i,n,function(){S(B[o],-i,-n),W(o)},a,s),W(o)}function C(e,i,n,a){n=n||0;for(var s,r=e.length,o=0;r>o;o++)s=e[o],a!==t&&(s.allDay=a),u(l(s.start,i,!0),n),s.end&&(s.end=u(l(s.end,i,!0),n)),$(s,U)}function S(e,t,i){i=i||0;for(var n,a=e.length,s=0;a>s;s++)n=e[s],n.end=u(l(m(n),t,!0),i),$(n,U)}function D(e){return"object"==typeof e&&(e=e.getDay()),J[e]}function T(){return G}function M(e,t,i){for(t=t||1;J[(e.getDay()+(i?t:0)+7)%7];)l(e,t)}function A(){var e=E.apply(null,arguments),t=P(e),i=N(t);return i}function E(e,t){var i=L.getColCnt(),n=Z?-1:1,a=Z?i-1:0;"object"==typeof e&&(t=e.col,e=e.row);var s=e*i+(t*n+a);return s}function P(e){var t=L.visStart.getDay();return e+=Q[t],7*Math.floor(e/G)+X[(e%G+G)%G]-t}function N(e){var t=d(L.visStart);return l(t,e),t}function I(e){var t=z(e),i=H(t),n=j(i);return n}function z(e){return f(e,L.visStart)}function H(e){var t=L.visStart.getDay();return e+=t,Math.floor(e/7)*G+Q[(e%7+7)%7]-Q[t]}function j(e){var t=L.getColCnt(),i=Z?-1:1,n=Z?t-1:0,a=Math.floor(e/t),s=(e%t+t)%t*i+n;return{row:a,col:s}}function R(e,t){for(var i=L.getRowCnt(),n=L.getColCnt(),a=[],s=z(e),r=z(t),o=H(s),l=H(r)-1,c=0;i>c;c++){var u=c*n,h=u+n-1,d=Math.max(o,u),p=Math.min(l,h);if(p>=d){var f=j(d),m=j(p),g=[f.col,m.col].sort(),v=P(d)==s,b=P(p)+1==r;a.push({row:c,leftCol:g[0],rightCol:g[1],isStart:v,isEnd:b})}}return a}var L=this;L.element=i,L.calendar=n,L.name=a,L.opt=s,L.trigger=r,L.isEventDraggable=o,L.isEventResizable=c,L.setEventData=h,L.clearEventData=p,L.eventEnd=m,L.reportEventElement=g,L.triggerEventDestroy=v,L.eventElementHandlers=b,L.showEvents=_,L.hideEvents=y,L.eventDrop=k,L.eventResize=x;var O=L.defaultEventEnd,$=n.normalizeEvent,W=n.reportEventChange,B={},q={},K=[],U=n.options;L.isHiddenDay=D,L.skipHiddenDays=M,L.getCellsPerWeek=T,L.dateToCell=I,L.dateToDayOffset=z,L.dayOffsetToCellOffset=H,L.cellOffsetToCell=j,L.cellToDate=A,L.cellToCellOffset=E,L.cellOffsetToDayOffset=P,L.dayOffsetToDate=N,L.rangeToSegments=R;var G,Y=s("hiddenDays")||[],J=[],Q=[],X=[],Z=s("isRTL");!function(){s("weekends")===!1&&Y.push(0,6);for(var t=0,i=0;7>t;t++)Q[t]=i,J[t]=-1!=e.inArray(t,Y),J[t]||(X[i]=t,i++);if(G=i,!G)throw"invalid hiddenDays"}()}function dt(){function t(e,t){var i=n(e,!1,!0);ft(i,function(e,t){N(e.event,t)}),_(i,t),ft(i,function(e,t){M("eventAfterRender",e.event,e.event,t)})}function i(e,t,i){var a=n([e],!0,!1),s=[];return ft(a,function(e,n){e.row===t&&n.css("top",i),s.push(n[0])}),s}function n(t,i,n){var s,l,c=Y(),d=i?e("<div/>"):c,p=a(t);return r(p),s=o(p),d[0].innerHTML=s,l=d.children(),i&&c.append(l),u(p,l),ft(p,function(e,t){e.hsides=T(t,!0)}),ft(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),ft(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),h(p,n),p}function a(e){for(var t=[],i=0;i<e.length;i++){var n=s(e[i]);t.push.apply(t,n)}return t}function s(e){for(var t=e.start,i=k(e),n=tt(t,i),a=0;a<n.length;a++)n[a].event=e;return n}function r(e){for(var t=D("isRTL"),i=0;i<e.length;i++){var n=e[i],a=(t?n.isEnd:n.isStart)?U:V,s=(t?n.isStart:n.isEnd)?G:K,r=a(n.leftCol),o=s(n.rightCol);n.left=r,n.outerWidth=o-r}}function o(e){for(var t="",i=0;i<e.length;i++)t+=c(e[i]);return t}function c(e){var t="",i=D("isRTL"),n=e.event,a=n.url,s=["fc-event","fc-event-hori"];A(n)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(n.className),n.source&&(s=s.concat(n.source.className||[]));var r=B(n,D);return t+=a?"<a href='"+O(a)+"'":"<div",t+=" class='"+s.join(" ")+"' style='position:absolute;left:"+e.left+"px;"+r+"'><div class='fc-event-inner'>",!n.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+O(J(n.start,n.end,D("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+O(n.title||"")+"</span></div>",e.isEnd&&E(n)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(i?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),t+="</"+(a?"a":"div")+">"}function u(t,i){for(var n=0;n<t.length;n++){var a=t[n],s=a.event,r=i.eq(n),o=M("eventRender",s,s,r);o===!1?r.remove():(o&&o!==!0&&(o=e(o).css({position:"absolute",left:a.left}),r.replaceWith(o),r=o),a.element=r)}}function h(e,t){var i=p(e),n=b(),a=[];if(t)for(var s=0;s<n.length;s++)n[s].height(i[s]);for(var s=0;s<n.length;s++)a.push(n[s].position().top);ft(e,function(e,t){t.css("top",a[e.row]+e.top)})}function p(e){for(var t=F(),i=W(),n=[],a=m(e),s=0;t>s;s++){for(var r=a[s],o=[],l=0;i>l;l++)o.push(0);for(var c=0;c<r.length;c++){var u=r[c];u.top=R(o.slice(u.leftCol,u.rightCol+1));for(var l=u.leftCol;l<=u.rightCol;l++)o[l]=u.top+u.outerHeight}n.push(R(o))}return n}function m(e){var t,i,n,a=F(),s=[];for(t=0;t<e.length;t++)i=e[t],n=i.row,i.element&&(s[n]?s[n].push(i):s[n]=[i]);for(n=0;a>n;n++)s[n]=g(s[n]||[]);return s}function g(e){for(var t=[],i=v(e),n=0;n<i.length;n++)t.push.apply(t,i[n]);return t}function v(e){e.sort(mt);for(var t=[],i=0;i<e.length;i++){for(var n=e[i],a=0;a<t.length&&pt(n,t[a]);a++);t[a]?t[a].push(n):t[a]=[n]}return t}function b(){var e,t=F(),i=[];for(e=0;t>e;e++)i[e]=q(e).find("div.fc-day-content > div");return i}function _(e,t){var i=Y();ft(e,function(e,i,n){var a=e.event;a._id===t?y(a,i,e):i[0]._fci=n}),C(i,e,y)}function y(e,t,i){A(e)&&S.draggableDayEvent(e,t,i),i.isEnd&&E(e)&&S.resizableDayEvent(e,t,i),I(e,t)}function w(e,t){var i,n=et();t.draggable({delay:50,opacity:D("dragOpacity"),revertDuration:D("dragRevertDuration"),start:function(a,s){M("eventDragStart",t,e,a,s),H(e,t),n.start(function(n,a,s,r){if(t.draggable("option","revert",!n||!s&&!r),X(),n){var o=it(a),c=it(n);i=f(c,o),Q(l(d(e.start),i),l(k(e),i))}else i=0},a,"drag")},stop:function(a,s){n.stop(),X(),M("eventDragStop",t,e,a,s),i?j(this,e,i,0,e.allDay,a,s):(t.css("filter",""),z(e,t))}})}function x(t,n,a){var s=D("isRTL"),r=s?"w":"e",o=n.find(".ui-resizable-"+r),c=!1;$(n),n.mousedown(function(e){e.preventDefault()}).click(function(e){c&&(e.preventDefault(),e.stopImmediatePropagation())}),o.mousedown(function(s){function o(i){M("eventResizeStop",this,t,i),e("body").css("cursor",""),d.stop(),X(),u&&L(this,t,u,0,i),setTimeout(function(){c=!1},0)}if(1==s.which){c=!0;var u,h,d=et(),p=(F(),W(),n.css("top")),f=e.extend({},t),m=rt(st(t.start));Z(),e("body").css("cursor",r+"-resize").one("mouseup",o),M("eventResizeStart",this,t,s),d.start(function(n,s){if(n){var o=nt(s),c=nt(n);if(c=Math.max(c,m),u=at(c)-at(o)){f.end=l(P(t),u,!0);var d=h;h=i(f,a.row,p),h=e(h),h.find("*").css("cursor",r+"-resize"),d&&d.remove(),H(t)}else h&&(z(t),h.remove(),h=null);X(),Q(t.start,l(k(t),u))}},s)}})}var S=this;S.renderDayEvents=t,S.draggableDayEvent=w,S.resizableDayEvent=x;var D=S.opt,M=S.trigger,A=S.isEventDraggable,E=S.isEventResizable,P=S.eventEnd,N=S.reportEventElement,I=S.eventElementHandlers,z=S.showEvents,H=S.hideEvents,j=S.eventDrop,L=S.eventResize,F=S.getRowCnt,W=S.getColCnt,q=(S.getColWidth,S.allDayRow),V=S.colLeft,K=S.colRight,U=S.colContentLeft,G=S.colContentRight,Y=(S.dateToCell,S.getDaySegmentContainer),J=S.calendar.formatDates,Q=S.renderDayOverlay,X=S.clearOverlays,Z=S.clearSelection,et=S.getHoverListener,tt=S.rangeToSegments,it=S.cellToDate,nt=S.cellToCellOffset,at=S.cellOffsetToDayOffset,st=S.dateToDayOffset,rt=S.dayOffsetToCellOffset}function pt(e,t){for(var i=0;i<t.length;i++){var n=t[i];if(n.leftCol<=e.rightCol&&n.rightCol>=e.leftCol)return!0}return!1}function ft(e,t){for(var i=0;i<e.length;i++){var n=e[i],a=n.element;a&&t(n,a,i)}}function mt(e,t){return t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function gt(){function t(e,t,a){i(),t||(t=l(e,a)),c(e,t,a),n(e,t,a)}function i(e){h&&(h=!1,u(),o("unselect",null,e))}function n(e,t,i,n){h=!0,o("select",null,e,t,i,n)}function a(t){var a=s.cellToDate,o=s.getIsCellAllDay,l=s.getHoverListener(),h=s.reportDayClick;if(1==t.which&&r("selectable")){i(t);var d;l.start(function(e,t){u(),e&&o(e)?(d=[a(t),a(e)].sort(j),c(d[0],d[1],!0)):d=null},t),e(document).one("mouseup",function(e){l.stop(),d&&(+d[0]==+d[1]&&h(d[0],!0,e),n(d[0],d[1],!0,e))})}}var s=this;s.select=t,s.unselect=i,s.reportSelection=n,s.daySelectionMousedown=a;var r=s.opt,o=s.trigger,l=s.defaultSelectionEnd,c=s.renderSelection,u=s.clearSelection,h=!1;r("selectable")&&r("unselectAuto")&&e(document).mousedown(function(t){var n=r("unselectCancel");n&&e(t.target).parents(n).length||i(t)})}function vt(){function t(t,i){var n=s.shift();return n||(n=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),a.push(n.css(t).show()),n}function i(){for(var e;e=a.shift();)s.push(e.hide().unbind())}var n=this;n.renderOverlay=t,n.clearOverlays=i;var a=[],s=[]}function bt(e){var t,i,n=this;n.build=function(){t=[],i=[],e(t,i)},n.cell=function(e,n){var a,s=t.length,r=i.length,o=-1,l=-1;for(a=0;s>a;a++)if(n>=t[a][0]&&n<t[a][1]){o=a;break}for(a=0;r>a;a++)if(e>=i[a][0]&&e<i[a][1]){l=a;break}return o>=0&&l>=0?{row:o,col:l}:null},n.rect=function(e,n,a,s,r){var o=r.offset();return{top:t[e][0]-o.top,left:i[n][0]-o.left,width:i[s][1]-i[n][0],height:t[a][1]-t[e][0]}}}function _t(t){function i(e){yt(e);var i=t.cell(e.pageX,e.pageY);(!i!=!r||i&&(i.row!=r.row||i.col!=r.col))&&(i?(s||(s=i),a(i,s,i.row-s.row,i.col-s.col)):a(i,s),r=i)}var n,a,s,r,o=this;o.start=function(o,l,c){a=o,s=r=null,t.build(),i(l),n=c||"mousemove",e(document).bind(n,i)},o.stop=function(){return e(document).unbind(n,i),r}}function yt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function wt(e){function i(t){return a[t]=a[t]||e(t)}var n=this,a={},s={},r={};n.left=function(e){return s[e]=s[e]===t?i(e).position().left:s[e]},n.right=function(e){return r[e]=r[e]===t?n.left(e)+i(e).width():r[e]},n.clear=function(){a={},s={},r={}}}var kt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},xt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},Ct=e.fullCalendar={version:"1.6.4"},St=Ct.views={};e.fn.fullCalendar=function(i){if("string"==typeof i){var a,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e.data(this,"fullCalendar");if(n&&e.isFunction(n[i])){var r=n[i].apply(n,s);a===t&&(a=r),"destroy"==i&&e.removeData(this,"fullCalendar")}}),a!==t?a:this}i=i||{};var r=i.eventSources||[];return delete i.eventSources,i.events&&(r.push(i.events),delete i.events),i=e.extend(!0,{},kt,i.isRTL||i.isRTL===t&&kt.isRTL?xt:{},i),this.each(function(t,a){var s=e(a),o=new n(s,i,r);s.data("fullCalendar",o),o.render()}),this},Ct.sourceNormalizers=[],Ct.sourceFetchers=[];var Dt={dataType:"json",cache:!1},Tt=1;Ct.addDays=l,Ct.cloneDate=d,Ct.parseDate=g,Ct.parseISO8601=v,Ct.parseTime=b,Ct.formatDate=_,Ct.formatDates=y;var Mt=["sun","mon","tue","wed","thu","fri","sat"],At=864e5,Et=36e5,Pt=6e4,Nt={s:function(e){return e.getSeconds()},ss:function(e){return L(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return L(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return L(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return L(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return L(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return L(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return e.getHours()<12?"a":"p"},tt:function(e){return e.getHours()<12?"am":"pm"},T:function(e){return e.getHours()<12?"A":"P"},TT:function(e){return e.getHours()<12?"AM":"PM"},u:function(e){return _(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return w(e)}};Ct.dateFormatters=Nt,Ct.applyAll=q,St.month=K,St.basicWeek=U,St.basicDay=G,i({weekMode:"fixed"}),St.agendaWeek=Q,St.agendaDay=X,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);