(function(){this.module("Dchq",function(){return this.module("Events",function(){return this.init=function(){var e;return $("#calendar").fullCalendar({monthNames:I18n.t("js.full_calendar.monthNames"),buttonText:{month:I18n.t("js.full_calendar.buttonText.month"),week:I18n.t("js.full_calendar.buttonText.week"),day:I18n.t("js.full_calendar.buttonText.day"),today:I18n.t("js.full_calendar.buttonText.today")},monthNamesShort:I18n.t("js.full_calendar.monthNamesShort"),dayNames:I18n.t("js.full_calendar.dayNames"),dayNamesShort:I18n.t("js.full_calendar.dayNamesShort"),editable:!0,disableDragging:!0,disableResizing:!0,header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay"},defaultView:gon.CALENDAR_VIEW_TYPE,firstDay:1,slotMinutes:30,loading:function(e){return e?$("#loading").show():$("#loading").hide()},events:"/events/get_events",timeFormat:"h:mm t{ - h:mm t} ",dragOpacity:"0.5",firstHour:8,eventClick:function(e){var t,i,a;if(e.url)return window.location.href=e.url;for(a=$("#staff-availability-modal"),a.find("h3").html("Staff Availability for "+new Date(e.start).toString("dddd, dS MMM")),i=$("<ul/>"),t=0;t<e.users.length;)i.append($("<li><a href='"+e.users[t].url+"'>"+e.users[t].name+"</a></li>")),t++;return a.find(".modal-body").html(i),a.modal()}}),$("#calendar").fullCalendar("gotoDate",new Date(gon.SHOW_DATE)),$(".unassigned").length>0&&(e=$(".filter-bar form .uniformjs"),e.find("input[type='checkbox']").change(function(){var t;return""===e.closest("form").attr("action")?(t={type:"GET",url:"/events/get_events",data:{unassigned:e.find("#boats_all:checked").val(),boat_ids:e.find("input.checkbox:checked").map(function(){return this.value}).get().join(",")}},$("#calendar").fullCalendar("removeEventSource"),$("#calendar").fullCalendar("removeEvents"),$("#calendar").fullCalendar("addEventSource",t)):$.ajax({type:"GET",url:"/events/list",data:{unassigned:e.find("#boats_all:checked").val(),boat_ids:e.find("input.checkbox:checked").map(function(){return this.value}).get().join(",")}})})),$("#toggle_staff").on("click",function(){var t,i,a,n;return i=$("#staff_toggler"),a=null!=(n="false"===i.val())?n:{"true":!1},i.val(a),t={type:"GET",url:"/events/get_events",data:{staff:a,unassigned:e.find("#boats_all:checked").val(),boat_ids:e.find("input.checkbox:checked").map(function(){return this.value}).get().join(",")}},$("#calendar").fullCalendar("removeEventSource"),$("#calendar").fullCalendar("removeEvents"),$("#calendar").fullCalendar("addEventSource",t),!1})}})}),$(function(){return $("body#events-index").length?Dchq.Events.init():void 0})}).call(this);