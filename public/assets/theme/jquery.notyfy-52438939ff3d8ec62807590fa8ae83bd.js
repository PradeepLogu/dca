!function(e){function t(t){var n=this;e.extend(n,{container:e("#notyfy_container_"+t.layout),closed:!1,shown:!1,_triggerEvent:function(t,i){var a=e.Event("notyfy"+t);return n.wrapper.trigger(a,[n].concat(i||[])),!a.isDefaultPrevented()},_generateID:function(){var e;do e="notyfy_"+(new Date).getTime()*Math.floor(1e6*Math.random());while(document.getElementById(e));return e},init:function(){var i;return n.options=e.extend({},e.notyfy.defaults,{id:n._generateID()},t),n.container.length?n.container.removeClass("i-am-new"):(n.container=t.custom?t.custom.addClass("notyfy_container_inline"):e("<ul />",{id:"notyfy_container_"+n.options.layout,"class":"notyfy_container"}).appendTo(n.options.custom||document.body),(i=e.notyfy.layouts[n.options.layout])&&e(window).bind("resize."+n.options.id,function(){i.call(n.container)}).triggerHandler("resize."+n.options.id),n.container.addClass("i-am-new")),n._build(),n},_build:function(){var t=e("<div />",{id:n.options.id,"class":"notyfy_bar"}).append(n.options.template).find(".notyfy_text").html(n.options.text).end();n.wrapper=e("<li />",{"class":["notyfy_wrapper","notyfy_"+n.options.type].join(" ")}).hide().append(t),n.options.theme&&n.wrapper.addClass("notyfytheme_"+n.options.theme),n.options.buttons&&(n.options.closeWith=[],n.options.timeout=!1,n.buttons=e("<div/>",{"class":"notyfy_buttons"}).appendTo(e(".notyfy_bar",n.wrapper)).append(e.map(n.options.buttons,function(t){return e("<button/>",{"class":t.addClass||"gray",html:t.text,click:function(){e.isFunction(t.onClick)&&t.onClick.call(e(this),n)}})[0]}))),e.each(n.options.events,function(t,i){e.isFunction(i)&&n.wrapper.bind("notyfy"+t,i)}),n.message=n.wrapper.find(".notyfy_message"),n.closeButton=n.wrapper.find(".notyfy_close"),e.notyfy.store[n.options.id]=n},show:function(){function t(){n._triggerEvent("shown"),n.shown=!0}return n.wrapper.appendTo(n.container),e.inArray("click",n.options.closeWith)>-1&&n.wrapper.css("cursor","pointer").one("click",n.close),e.inArray("hover",n.options.closeWith)>-1&&n.wrapper.one("mouseenter",n.close),e.inArray("button",n.options.closeWith)>-1&&n.closeButton.one("click",n.close),-1==e.inArray("button",n.options.closeWith)&&n.closeButton.remove(),n._triggerEvent("show"),e.isFunction(n.options.showEffect)?(n.wrapper.clearQueue().stop(),n.options.showEffect.call(n,n.wrapper),n.wrapper.queue(t)):(n.wrapper.show(),t()),n.options.timeout&&(clearTimeout(n._delay),n._delay=setTimeout(function(){n.close()},parseInt(n.options.timeout,10))),n},close:function(){function t(){n._triggerEvent("hidden"),n.options.modal&&i.hideModalFor(n),i.setLayoutCountFor(n,-1),0==i.getLayoutCountFor(n)&&n.wrapper.remove(),"undefined"!=typeof n.wrapper&&null!==n.wrapper&&(n.wrapper.remove(),n.wrapper=null,n.closed=!0),delete e.notyfy.store[n.options.id],n.options.dismissQueue||(e.notyfy.ontap=!0,i.render())}if(!n.closed){if(!n.shown)return void(e.notyfy.queue=e.map(e.notyfy.queue,function(e){return e.options.id!=n.options.id?e:void 0}));n.wrapper.addClass("i-am-closing-now"),n._triggerEvent("hide"),e.isFunction(n.options.hideEffect)?(n.wrapper.clearQueue().stop(),n.options.hideEffect.call(n,n.wrapper),n.wrapper.queue(t)):(n.wrapper.hide(),t())}},setText:function(e){return n.closed||(n.options.text=e,n.wrapper.find(".notyfy_text").html(e)),n},setType:function(e){return n.closed||(n.options.type=e),n}}),n.init()}var i=e.notyfyRenderer={_modal:e("<div/>",{id:"notyfy_modal",data:{notyfy_modal_count:0}}),_modals:0,init:function(n){var a=new t(n);return e.notyfy.queue[a.options.force?"unshift":"push"](a),i.render(),a},render:function(){var t=e.notyfy.queue[0];"object"===e.type(t)?t.options.dismissQueue?i.show(e.notyfy.queue.shift()):e.notyfy.ontap&&(i.show(e.notyfy.queue.shift()),e.notyfy.ontap=!1):e.notyfy.ontap=!0},show:function(e){e.options.modal&&(i.createModalFor(e),i.setModalCount(1)),i.setLayoutCountFor(e,1),e.show()},createModalFor:function(){i._modal[0].parentNode||i._modal.prependTo(document.body).fadeIn("fast")},hideModalFor:function(){i.setModalCount(-1),0==i.getModalCount()&&i._modal.fadeOut("fast",function(){i._modal.detach()})},getLayoutCountFor:function(e){return e.container.data("notyfy_layout_count")||0},setLayoutCountFor:function(e,t){return e.container.data("notyfy_layout_count",i.getLayoutCountFor(e)+t)},getModalCount:function(){return i._modals},setModalCount:function(e){return i._modals+=e}},n=e(window);e.notyfy={ontap:!0,queue:[],store:{},layouts:{center:function(){this[0].style.top=n.height()/2-this.outerHeight()/2+"px",this[0].style.left=n.width()/2-this.outerWidth()/2+"px"},centerLeft:function(){this[0].style.top=n.height()/2-this.outerHeight()/2+"px"},centerRight:function(){this[0].style.top=n.height()/2-this.outerHeight()/2+"px"},topCenter:function(){this[0].style.left=n.width()/2-this.outerWidth()/2+"px"},bottomCenter:function(){this[0].style.left=n.width()/2-this.outerWidth()/2+"px"}},get:function(t){return e.notyfy.store.hasOwnProperty(t)?e.notyfy.store[t]:!1},close:function(t){return e.notyfy.get(t)?e.notyfy.get(t).close():!1},setText:function(t,i){return e.notyfy.get(t)?e.notyfy.get(t).setText(i):!1},setType:function(t,i){return e.notyfy.get(t)?e.notyfy.get(t).setType(i):!1},clearQueue:function(){e.notyfy.queue=[]},closeAll:function(){e.notyfy.clearQueue(),e.each(e.notyfy.store,function(e,t){t.close()})},consumeAlert:function(e){window.alert=function(t){e?e.text=t:e={text:t},i.init(e)}},stopConsumeAlert:function(){delete window.alert},defaults:{layout:"top",theme:!1,type:"alert",text:"",dismissQueue:!0,template:'<div class="notyfy_message"><span class="notyfy_text"></span><div class="notyfy_close"></div></div>',showEffect:function(e){e.animate({height:"toggle"},500,"swing")},hideEffect:function(e){e.animate({height:"toggle"},500,"swing")},timeout:!1,force:!1,modal:!1,buttons:!1,closeWith:["click"],events:{show:null,hide:null,shown:null,hidden:null}}},window.notyfy=function(e){return i.init(e)},e.fn.notyfy=function(t){return t.custom=e(this),i.init(t)}}(jQuery);