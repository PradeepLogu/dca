/*! @license Copyright 2011 Dan Vanderkam (danvdk@gmail.com) MIT-licensed (http://opensource.org/licenses/MIT) */
"use strict";function RGBColor(e){this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=e.replace(/ /g,""),e=e.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var i in t)e==i&&(e=t[i]);for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],a=0;a<n.length;a++){var s=n[a].re,r=n[a].process,o=s.exec(e);if(o){var l=r(o);this.r=l[0],this.g=l[1],this.b=l[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i}}var DygraphLayout=function(e){this.dygraph_=e,this.datasets=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.points=null,this.xTicks_=null,this.yTicks_=null};DygraphLayout.prototype.attr_=function(e){return this.dygraph_.attr_(e)},DygraphLayout.prototype.addDataset=function(e,t){this.datasets.push(t),this.setNames.push(e)},DygraphLayout.prototype.getPlotArea=function(){return this.computePlotArea_()},DygraphLayout.prototype.computePlotArea_=function(){var e={x:0,y:0};e.w=this.dygraph_.width_-e.x-this.attr_("rightGap"),e.h=this.dygraph_.height_;var t={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(t){var i={x:e.x,y:e.y,w:t,h:e.h};return e.x+=t,e.w-=t,i},reserveSpaceRight:function(t){var i={x:e.x+e.w-t,y:e.y,w:t,h:e.h};return e.w-=t,i},reserveSpaceTop:function(t){var i={x:e.x,y:e.y,w:e.w,h:t};return e.y+=t,e.h-=t,i},reserveSpaceBottom:function(t){var i={x:e.x,y:e.y+e.h-t,w:e.w,h:t};return e.h-=t,i},chartRect:function(){return{x:e.x,y:e.y,w:e.w,h:e.h}}};return this.dygraph_.cascadeEvents_("layout",t),this.attr_("showRangeSelector")&&(e.h-=this.attr_("rangeSelectorHeight")+4),e},DygraphLayout.prototype.setAnnotations=function(e){this.annotations=[];for(var t=this.attr_("xValueParser")||function(e){return e},i=0;i<e.length;i++){var n={};if(!e[i].xval&&!e[i].x)return void this.dygraph_.error("Annotations must have an 'x' property");if(e[i].icon&&(!e[i].hasOwnProperty("width")||!e[i].hasOwnProperty("height")))return void this.dygraph_.error("Must set width and height when setting annotation.icon property");Dygraph.update(n,e[i]),n.xval||(n.xval=t(n.x)),this.annotations.push(n)}},DygraphLayout.prototype.setXTicks=function(e){this.xTicks_=e},DygraphLayout.prototype.setYAxes=function(e){this.yAxes_=e},DygraphLayout.prototype.setDateWindow=function(e){this.dateWindow_=e},DygraphLayout.prototype.evaluate=function(){this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},DygraphLayout.prototype._evaluateLimits=function(){if(this.minxval=this.maxxval=null,this.dateWindow_)this.minxval=this.dateWindow_[0],this.maxxval=this.dateWindow_[1];else for(var e=0;e<this.datasets.length;++e){var t=this.datasets[e];if(t.length>1){var i=t[0][0];(!this.minxval||i<this.minxval)&&(this.minxval=i);var n=t[t.length-1][0];(!this.maxxval||n>this.maxxval)&&(this.maxxval=n)}}this.xrange=this.maxxval-this.minxval,this.xscale=0!==this.xrange?1/this.xrange:1;for(var a=0;a<this.yAxes_.length;a++){var s=this.yAxes_[a];s.minyval=s.computedValueRange[0],s.maxyval=s.computedValueRange[1],s.yrange=s.maxyval-s.minyval,s.yscale=0!==s.yrange?1/s.yrange:1,s.g.attr_("logscale")&&(s.ylogrange=Dygraph.log10(s.maxyval)-Dygraph.log10(s.minyval),s.ylogscale=0!==s.ylogrange?1/s.ylogrange:1,(!isFinite(s.ylogrange)||isNaN(s.ylogrange))&&s.g.error("axis "+a+" of graph at "+s.g+" can't be displayed in log scale for range ["+s.minyval+" - "+s.maxyval+"]"))}},DygraphLayout._calcYNormal=function(e,t){return e.logscale?1-(Dygraph.log10(t)-Dygraph.log10(e.minyval))*e.ylogscale:1-(t-e.minyval)*e.yscale},DygraphLayout.prototype._evaluateLineCharts=function(){var e=this.attr_("connectSeparatedPoints");this.points=new Array(this.datasets.length);for(var t=0;t<this.datasets.length;t++){for(var i=this.datasets[t],n=this.setNames[t],a=this.dygraph_.axisPropertiesForSeries(n),s=new Array(i.length),r=0;r<i.length;r++){var o=i[r],l=DygraphLayout.parseFloat_(o[0]),c=DygraphLayout.parseFloat_(o[1]),u=(l-this.minxval)*this.xscale,h=DygraphLayout._calcYNormal(a,c);e&&null===o[1]&&(c=null),s[r]={x:u,y:h,xval:l,yval:c,name:n}}this.points[t]=s}},DygraphLayout.parseFloat_=function(e){return null===e?0/0:e},DygraphLayout.prototype._evaluateLineTicks=function(){var e,t,i,n;for(this.xticks=[],e=0;e<this.xTicks_.length;e++)t=this.xTicks_[e],i=t.label,n=this.xscale*(t.v-this.minxval),n>=0&&1>=n&&this.xticks.push([n,i]);for(this.yticks=[],e=0;e<this.yAxes_.length;e++)for(var a=this.yAxes_[e],s=0;s<a.ticks.length;s++)t=a.ticks[s],i=t.label,n=this.dygraph_.toPercentYCoord(t.v,e),n>=0&&1>=n&&this.yticks.push([e,n,i])},DygraphLayout.prototype.evaluateWithError=function(){if(this.evaluate(),this.attr_("errorBars")||this.attr_("customBars"))for(var e=0,t=0;t<this.datasets.length;++t){var i=this.points[t],n=0,a=this.datasets[t],s=this.setNames[t],r=this.dygraph_.axisPropertiesForSeries(s);for(n=0;n<a.length;n++,e++){var o=a[n],l=DygraphLayout.parseFloat_(o[0]),c=DygraphLayout.parseFloat_(o[1]);if(l==i[n].xval&&c==i[n].yval){var u=DygraphLayout.parseFloat_(o[2]),h=DygraphLayout.parseFloat_(o[3]),d=c-u,p=c+h;i[n].y_top=DygraphLayout._calcYNormal(r,d),i[n].y_bottom=DygraphLayout._calcYNormal(r,p)}}}},DygraphLayout.prototype._evaluateAnnotations=function(){var e,t={};for(e=0;e<this.annotations.length;e++){var i=this.annotations[e];t[i.xval+","+i.series]=i}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var n=0;n<this.points.length;n++){var a=this.points[n];for(e=0;e<a.length;e++){var s=a[e],r=s.xval+","+s.name;r in t&&(s.annotation=t[r],this.annotated_points.push(s))}}},DygraphLayout.prototype.removeAllDatasets=function(){delete this.datasets,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.datasets=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]},DygraphLayout.prototype.unstackPointAtIndex=function(e,t){var i=this.points[e][t];if(!i.yval)return i;var n={};for(var a in i)n[a]=i[a];if(!this.attr_("stackedGraph"))return n;if(e==this.points.length-1)return n;var s=this.points[e+1];return s[t].xval==i.xval&&s[t].yval&&(n.yval-=s[t].yval),n};var DygraphCanvasRenderer=function(e,t,i,n){if(this.dygraph_=e,this.layout=n,this.element=t,this.elementContext=i,this.container=this.element.parentNode,this.height=this.element.height,this.width=this.element.width,!this.isIE&&!DygraphCanvasRenderer.isSupported(this.element))throw"Canvas is not supported.";if(this.area=n.getPlotArea(),this.container.style.position="relative",this.container.style.width=this.width+"px",this.dygraph_.isUsingExcanvas_)this._createIEClipArea();else if(!Dygraph.isAndroid()){var a=this.dygraph_.canvas_ctx_;a.beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip(),a=this.dygraph_.hidden_ctx_,a.beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip()}};DygraphCanvasRenderer.prototype.attr_=function(e,t){return this.dygraph_.attr_(e,t)},DygraphCanvasRenderer.prototype.clear=function(){var e;if(this.isIE)try{this.clearDelay&&(this.clearDelay.cancel(),this.clearDelay=null),e=this.elementContext}catch(t){return}e=this.elementContext,e.clearRect(0,0,this.width,this.height)},DygraphCanvasRenderer.isSupported=function(e){var t=null;try{t="undefined"==typeof e||null===e?document.createElement("canvas"):e,t.getContext("2d")}catch(i){var n=navigator.appVersion.match(/MSIE (\d\.\d)/),a=-1!=navigator.userAgent.toLowerCase().indexOf("opera");return!n||n[1]<6||a?!1:!0}return!0},DygraphCanvasRenderer.prototype.render=function(){this._updatePoints(),this._renderLineChart()},DygraphCanvasRenderer.prototype._createIEClipArea=function(){function e(e){if(0!==e.w&&0!==e.h){var n=document.createElement("div");n.className=t,n.style.backgroundColor=a,n.style.position="absolute",n.style.left=e.x+"px",n.style.top=e.y+"px",n.style.width=e.w+"px",n.style.height=e.h+"px",i.appendChild(n)}}for(var t="dygraph-clip-div",i=this.dygraph_.graphDiv,n=i.childNodes.length-1;n>=0;n--)i.childNodes[n].className==t&&i.removeChild(i.childNodes[n]);for(var a=document.bgColor,s=this.dygraph_.graphDiv;s!=document;){var r=s.currentStyle.backgroundColor;if(r&&"transparent"!=r){a=r;break}s=s.parentNode}var o=this.area;e({x:0,y:0,w:o.x,h:this.height}),e({x:o.x,y:0,w:this.width-o.x,h:o.y}),e({x:o.x+o.w,y:0,w:this.width-o.x-o.w,h:this.height}),e({x:o.x,y:o.y+o.h,w:this.width-o.x,h:this.height-o.h-o.y})},DygraphCanvasRenderer._getIteratorPredicate=function(e){return e?DygraphCanvasRenderer._predicateThatSkipsEmptyPoints:null},DygraphCanvasRenderer._predicateThatSkipsEmptyPoints=function(e,t){return null!==e[t].yval},DygraphCanvasRenderer._drawStyledLine=function(e,t,i,n,a,s,r){var o=e.dygraph,l=o.getOption("stepPlot");Dygraph.isArrayLike(n)||(n=null);var c=o.getOption("drawGapEdgePoints",e.setName),u=e.points,h=Dygraph.createIterator(u,0,u.length,DygraphCanvasRenderer._getIteratorPredicate(o.getOption("connectSeparatedPoints"))),d=n&&n.length>=2,p=e.drawingContext;p.save(),d&&p.installPattern(n);var f=DygraphCanvasRenderer._drawSeries(e,h,i,r,a,c,l,t);DygraphCanvasRenderer._drawPointsOnLine(e,f,s,t,r),d&&p.uninstallPattern(),p.restore()},DygraphCanvasRenderer._drawSeries=function(e,t,i,n,a,s,r,o){var l,c,u=null,h=null,d=null,p=[],f=!0,m=e.drawingContext;m.beginPath(),m.strokeStyle=o,m.lineWidth=i;for(var g=t.array_,v=t.end_,b=t.predicate_,_=t.start_;v>_;_++){if(c=g[_],b){for(;v>_&&!b(g,_);)_++;if(_==v)break;c=g[_]}if(null===c.canvasy||c.canvasy!=c.canvasy)r&&null!==u&&(m.moveTo(u,h),m.lineTo(c.canvasx,h)),u=h=null;else{if(l=!1,s||!u){t.nextIdx_=_;{t.next()}d=t.hasNext?t.peek.canvasy:null;var y=null===d||d!=d;l=!u&&y,s&&(!f&&!u||t.hasNext&&y)&&(l=!0)}null!==u?i&&(r&&(m.moveTo(u,h),m.lineTo(c.canvasx,h)),m.lineTo(c.canvasx,c.canvasy)):m.moveTo(c.canvasx,c.canvasy),(a||l)&&p.push([c.canvasx,c.canvasy]),u=c.canvasx,h=c.canvasy}f=!1}return m.stroke(),p},DygraphCanvasRenderer._drawPointsOnLine=function(e,t,i,n,a){for(var s=e.drawingContext,r=0;r<t.length;r++){var o=t[r];s.save(),i(e.dygraph,e.setName,s,o[0],o[1],n,a),s.restore()}},DygraphCanvasRenderer.prototype._updatePoints=function(){for(var e=this.layout.points,t=e.length;t--;)for(var i=e[t],n=i.length;n--;){var a=i[n];a.canvasx=this.area.w*a.x+this.area.x,a.canvasy=this.area.h*a.y+this.area.y}},DygraphCanvasRenderer.prototype._renderLineChart=function(e,t){{var i,n,a=t||this.elementContext,s=(this.attr_("errorBars")||this.attr_("customBars"),this.attr_("fillGraph"),this.layout.points),r=this.layout.setNames;r.length}this.colors=this.dygraph_.colorsMap_;var o=this.attr_("plotter"),l=o;Dygraph.isArrayLike(l)||(l=[l]);var c={};for(i=0;i<r.length;i++){n=r[i];var u=this.attr_("plotter",n);u!=o&&(c[n]=u)}for(i=0;i<l.length;i++)for(var h=l[i],d=i==l.length-1,p=0;p<s.length;p++)if(n=r[p],!e||n==e){var f=s[p],m=h;if(n in c){if(!d)continue;m=c[n]}var g=this.colors[n],v=this.dygraph_.getOption("strokeWidth",n);a.save(),a.strokeStyle=g,a.lineWidth=v,m({points:f,setName:n,drawingContext:a,color:g,strokeWidth:v,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(n),plotArea:this.area,seriesIndex:p,seriesCount:s.length,allSeriesPoints:s}),a.restore()}},DygraphCanvasRenderer._Plotters={linePlotter:function(e){DygraphCanvasRenderer._linePlotter(e)},fillPlotter:function(e){DygraphCanvasRenderer._fillPlotter(e)},errorPlotter:function(e){DygraphCanvasRenderer._errorPlotter(e)}},DygraphCanvasRenderer._linePlotter=function(e){var t=e.dygraph,i=e.setName,n=e.strokeWidth,a=t.getOption("strokeBorderWidth",i),s=t.getOption("drawPointCallback",i)||Dygraph.Circles.DEFAULT,r=t.getOption("strokePattern",i),o=t.getOption("drawPoints",i),l=t.getOption("pointSize",i);a&&n&&DygraphCanvasRenderer._drawStyledLine(e,t.getOption("strokeBorderColor",i),n+2*a,r,o,s,l),DygraphCanvasRenderer._drawStyledLine(e,e.color,n,r,o,s,l)},DygraphCanvasRenderer._errorPlotter=function(e){var t=e.dygraph,i=e.setName,n=t.getOption("errorBars")||t.getOption("customBars");if(n){var a=t.getOption("fillGraph",i);a&&t.warn("Can't use fillGraph option with error bars");var s,r=e.drawingContext,o=e.color,l=t.getOption("fillAlpha",i),c=t.getOption("stepPlot"),u=e.axis,h=e.points,d=Dygraph.createIterator(h,0,h.length,DygraphCanvasRenderer._getIteratorPredicate(t.getOption("connectSeparatedPoints"))),p=0/0,f=0/0,m=[-1,-1],g=(u.yscale,new RGBColor(o)),v="rgba("+g.r+","+g.g+","+g.b+","+l+")";r.fillStyle=v,r.beginPath();for(var b=function(e){return null===e||void 0===e||isNaN(e)};d.hasNext;){var _=d.next();!c&&b(_.y)||c&&!isNaN(f)&&b(f)?p=0/0:(c?(s=[_.y_bottom,_.y_top],f=_.y):s=[_.y_bottom,_.y_top],s[0]=e.plotArea.h*s[0]+e.plotArea.y,s[1]=e.plotArea.h*s[1]+e.plotArea.y,isNaN(p)||(c?(r.moveTo(p,m[0]),r.lineTo(_.canvasx,m[0]),r.lineTo(_.canvasx,m[1])):(r.moveTo(p,m[0]),r.lineTo(_.canvasx,s[0]),r.lineTo(_.canvasx,s[1])),r.lineTo(p,m[1]),r.closePath()),m=s,p=_.canvasx)}r.fill()}},DygraphCanvasRenderer._fillPlotter=function(e){if(0===e.seriesIndex){for(var t=e.dygraph,i=t.getLabels().slice(1),n=i.length;n>=0;n--)t.visibility()[n]||i.splice(n,1);var a=function(){for(var e=0;e<i.length;e++)if(t.getOption("fillGraph",i[e]))return!0;return!1}();if(a)for(var s,r=e.drawingContext,o=e.plotArea,l=e.allSeriesPoints,c=l.length,u=t.getOption("fillAlpha"),h=t.getOption("stepPlot"),d=t.getOption("stackedGraph"),p=t.getColors(),f={},m=c-1;m>=0;m--){var g=i[m];if(t.getOption("fillGraph",g)){var v=p[m],b=t.axisPropertiesForSeries(g),_=1+b.minyval*b.yscale;0>_?_=0:_>1&&(_=1),_=o.h*_+o.y;var y,w=l[m],k=Dygraph.createIterator(w,0,w.length,DygraphCanvasRenderer._getIteratorPredicate(t.getOption("connectSeparatedPoints"))),x=0/0,C=[-1,-1],S=(b.yscale,new RGBColor(v)),D="rgba("+S.r+","+S.g+","+S.b+","+u+")";for(r.fillStyle=D,r.beginPath();k.hasNext;){var T=k.next();if(Dygraph.isOK(T.y)){if(d){s=f[T.canvasx];var M;M=void 0===s?_:h?s[0]:s,y=[T.canvasy,M],f[T.canvasx]=h?-1===C[0]?[T.canvasy,_]:[T.canvasy,C[0]]:T.canvasy}else y=[T.canvasy,_];isNaN(x)||(r.moveTo(x,C[0]),h?(r.lineTo(T.canvasx,C[0]),s?r.lineTo(T.canvasx,s[1]):r.lineTo(T.canvasx,y[1])):(r.lineTo(T.canvasx,y[0]),r.lineTo(T.canvasx,y[1])),r.lineTo(x,C[1]),r.closePath()),C=y,x=T.canvasx}else x=0/0}r.fill()}}}};var Dygraph=function(e,t,i,n){void 0!==n?(this.warn("Using deprecated four-argument dygraph constructor"),this.__old_init__(e,t,i,n)):this.__init__(e,t,i)};Dygraph.NAME="Dygraph",Dygraph.VERSION="1.2",Dygraph.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},Dygraph.toString=function(){return this.__repr__()},Dygraph.DEFAULT_ROLL_PERIOD=1,Dygraph.DEFAULT_WIDTH=480,Dygraph.DEFAULT_HEIGHT=320,Dygraph.ANIMATION_STEPS=10,Dygraph.ANIMATION_DURATION=200,Dygraph.numberValueFormatter=function(e,t){var i=t("sigFigs");if(null!==i)return Dygraph.floatFormat(e,i);var n=t("digitsAfterDecimal"),a=t("maxNumberWidth");return 0!==e&&(Math.abs(e)>=Math.pow(10,a)||Math.abs(e)<Math.pow(10,-n))?e.toExponential(n):""+Dygraph.round_(e,n)},Dygraph.numberAxisLabelFormatter=function(e,t,i,n){return Dygraph.numberValueFormatter(e,i,n)},Dygraph.dateString_=function(e){var t=Dygraph.zeropad,i=new Date(e),n=""+i.getFullYear(),a=t(i.getMonth()+1),s=t(i.getDate()),r="",o=3600*i.getHours()+60*i.getMinutes()+i.getSeconds();return o&&(r=" "+Dygraph.hmsString_(e)),n+"/"+a+"/"+s+r},Dygraph.dateAxisFormatter=function(e,t){if(t>=Dygraph.DECADAL)return e.strftime("%Y");if(t>=Dygraph.MONTHLY)return e.strftime("%b %y");var i=3600*e.getHours()+60*e.getMinutes()+e.getSeconds()+e.getMilliseconds();return 0===i||t>=Dygraph.DAILY?new Date(e.getTime()+36e5).strftime("%d%b"):Dygraph.hmsString_(e.getTime())},Dygraph.Plotters=DygraphCanvasRenderer._Plotters,Dygraph.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,rightGap:5,showRoller:!1,xValueParser:Dygraph.dateParser,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,avoidMinZero:!1,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:!0,drawYAxis:!0,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelWidth:50,drawYGrid:!0,drawXGrid:!0,gridLineColor:"rgb(128,128,128)",interactionModel:null,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillColor:"#A7B1C4",plotter:[Dygraph.Plotters.fillPlotter,Dygraph.Plotters.errorPlotter,Dygraph.Plotters.linePlotter],axes:{x:{pixelsPerLabel:60,axisLabelFormatter:Dygraph.dateAxisFormatter,valueFormatter:Dygraph.dateString_,ticker:null},y:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null},y2:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,ticker:null}}},Dygraph.HORIZONTAL=1,Dygraph.VERTICAL=2,Dygraph.PLUGINS=[],Dygraph.addedAnnotationCSS=!1,Dygraph.prototype.__old_init__=function(e,t,i,n){if(null!==i){for(var a=["Date"],s=0;s<i.length;s++)a.push(i[s]);Dygraph.update(n,{labels:a})}this.__init__(e,t,n)},Dygraph.prototype.__init__=function(e,t,i){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&"undefined"!=typeof G_vmlCanvasManager&&"complete"!=document.readyState){var n=this;return void setTimeout(function(){n.__init__(e,t,i)},100)}if((null===i||void 0===i)&&(i={}),i=Dygraph.mapLegacyOptions_(i),!e)return void Dygraph.error("Constructing dygraph with a non-existent div!");this.isUsingExcanvas_="undefined"!=typeof G_vmlCanvasManager,this.maindiv_=e,this.file_=t,this.rollPeriod_=i.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=i.fractions||!1,this.dateWindow_=i.dateWindow||null,this.is_initial_draw_=!0,this.annotations_=[],this.zoomed_x_=!1,this.zoomed_y_=!1,e.innerHTML="",""===e.style.width&&i.width&&(e.style.width=i.width+"px"),""===e.style.height&&i.height&&(e.style.height=i.height+"px"),""===e.style.height&&0===e.clientHeight&&(e.style.height=Dygraph.DEFAULT_HEIGHT+"px",""===e.style.width&&(e.style.width=Dygraph.DEFAULT_WIDTH+"px")),this.width_=e.clientWidth,this.height_=e.clientHeight,i.stackedGraph&&(i.fillGraph=!0),i.showRangeSelector&&i.animatedZooms&&(this.warn("You should not set animatedZooms=true when using the range selector."),i.animatedZooms=!1),this.user_attrs_={},Dygraph.update(this.user_attrs_,i),this.attrs_={},Dygraph.updateDeep(this.attrs_,Dygraph.DEFAULT_ATTRS),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.createInterface_(),this.plugins_=[];for(var a=0;a<Dygraph.PLUGINS.length;a++){var s=Dygraph.PLUGINS[a],r=new s,o={plugin:r,events:{},options:{},pluginOptions:{}},l=r.activate(this);for(var c in l)o.events[c]=l[c];this.plugins_.push(o)}for(var a=0;a<this.plugins_.length;a++){var u=this.plugins_[a];for(var c in u.events)if(u.events.hasOwnProperty(c)){var h=u.events[c],d=[u.plugin,h];c in this.eventListeners_?this.eventListeners_[c].push(d):this.eventListeners_[c]=[d]}}this.start_()},Dygraph.prototype.cascadeEvents_=function(e,t){if(!(e in this.eventListeners_))return!0;var i={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!i.cancelable)throw"Cannot call preventDefault on non-cancelable event.";i.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){i.propagationStopped=!0}};Dygraph.update(i,t);var n=this.eventListeners_[e];if(n)for(var a=n.length-1;a>=0;a--){var s=n[a][0],r=n[a][1];if(r.call(s,i),i.propagationStopped)break}return i.defaultPrevented},Dygraph.prototype.isZoomed=function(e){if(null===e||void 0===e)return this.zoomed_x_||this.zoomed_y_;if("x"===e)return this.zoomed_x_;if("y"===e)return this.zoomed_y_;throw"axis parameter is ["+e+"] must be null, 'x' or 'y'."},Dygraph.prototype.toString=function(){var e=this.maindiv_,t=e&&e.id?e.id:e;return"[Dygraph "+t+"]"},Dygraph.prototype.attr_=function(e,t){var i=[];i.push(this.attrs_),this.user_attrs_&&(i.push(this.user_attrs_),t&&(this.user_attrs_.hasOwnProperty(t)&&i.push(this.user_attrs_[t]),t===this.highlightSet_&&this.user_attrs_.hasOwnProperty("highlightSeriesOpts")&&i.push(this.user_attrs_.highlightSeriesOpts)));for(var n=null,a=i.length-1;a>=0;--a){var s=i[a];if(s.hasOwnProperty(e)){n=s[e];break}}return n},Dygraph.prototype.getOption=function(e,t){return this.attr_(e,t)},Dygraph.prototype.optionsViewForAxis_=function(e){var t=this;return function(i){var n=t.user_attrs_.axes;return n&&n[e]&&n[e][i]?n[e][i]:"undefined"!=typeof t.user_attrs_[i]?t.user_attrs_[i]:(n=t.attrs_.axes,n&&n[e]&&n[e][i]?n[e][i]:"y"==e&&t.axes_[0].hasOwnProperty(i)?t.axes_[0][i]:"y2"==e&&t.axes_[1].hasOwnProperty(i)?t.axes_[1][i]:t.attr_(i))}},Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_},Dygraph.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Dygraph.prototype.xAxisExtremes=function(){var e=this.rawData_[0][0],t=this.rawData_[this.rawData_.length-1][0];return[e,t]},Dygraph.prototype.yAxisRange=function(e){if("undefined"==typeof e&&(e=0),0>e||e>=this.axes_.length)return null;var t=this.axes_[e];return[t.computedValueRange[0],t.computedValueRange[1]]},Dygraph.prototype.yAxisRanges=function(){for(var e=[],t=0;t<this.axes_.length;t++)e.push(this.yAxisRange(t));return e},Dygraph.prototype.toDomCoords=function(e,t,i){return[this.toDomXCoord(e),this.toDomYCoord(t,i)]},Dygraph.prototype.toDomXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,i=this.xAxisRange();return t.x+(e-i[0])/(i[1]-i[0])*t.w},Dygraph.prototype.toDomYCoord=function(e,t){var i=this.toPercentYCoord(e,t);if(null===i)return null;var n=this.plotter_.area;return n.y+i*n.h},Dygraph.prototype.toDataCoords=function(e,t,i){return[this.toDataXCoord(e),this.toDataYCoord(t,i)]},Dygraph.prototype.toDataXCoord=function(e){if(null===e)return null;var t=this.plotter_.area,i=this.xAxisRange();return i[0]+(e-t.x)/t.w*(i[1]-i[0])},Dygraph.prototype.toDataYCoord=function(e,t){if(null===e)return null;var i=this.plotter_.area,n=this.yAxisRange(t);if("undefined"==typeof t&&(t=0),this.axes_[t].logscale){var a=(e-i.y)/i.h,s=Dygraph.log10(n[1]),r=s-a*(s-Dygraph.log10(n[0])),o=Math.pow(Dygraph.LOG_SCALE,r);return o}return n[0]+(i.y+i.h-e)/i.h*(n[1]-n[0])},Dygraph.prototype.toPercentYCoord=function(e,t){if(null===e)return null;"undefined"==typeof t&&(t=0);var i,n=this.yAxisRange(t);if(this.axes_[t].logscale){var a=Dygraph.log10(n[1]);i=(a-Dygraph.log10(e))/(a-Dygraph.log10(n[0]))}else i=(n[1]-e)/(n[1]-n[0]);return i},Dygraph.prototype.toPercentXCoord=function(e){if(null===e)return null;var t=this.xAxisRange();return(e-t[0])/(t[1]-t[0])},Dygraph.prototype.numColumns=function(){return this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length},Dygraph.prototype.numRows=function(){return this.rawData_.length},Dygraph.prototype.fullXRange_=function(){return this.numRows()>0?[this.rawData_[0][0],this.rawData_[this.numRows()-1][0]]:[0,1]},Dygraph.prototype.getValue=function(e,t){return 0>e||e>this.rawData_.length?null:0>t||t>this.rawData_[e].length?null:this.rawData_[e][t]},Dygraph.prototype.createInterface_=function(){var e=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px",e.appendChild(this.graphDiv),this.canvas_=Dygraph.createCanvas(),this.canvas_.style.position="absolute",this.canvas_.width=this.width_,this.canvas_.height=this.height_,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",this.canvas_ctx_=Dygraph.getContext(this.canvas_),this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.hidden_ctx_=Dygraph.getContext(this.hidden_),this.attr_("showRangeSelector")&&(this.rangeSelector_=new DygraphRangeSelector(this)),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new DygraphLayout(this),this.rangeSelector_&&this.rangeSelector_.addToGraph(this.graphDiv,this.layout_);var t=this;this.mouseMoveHandler=function(e){t.mouseMove_(e)},this.addEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler),this.mouseOutHandler=function(e){t.mouseOut_(e)},this.addEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler),this.createDragInterface_(),this.resizeHandler=function(){t.resize()},this.addEvent(window,"resize",this.resizeHandler)},Dygraph.prototype.destroy=function(){for(var e=function(t){for(;t.hasChildNodes();)e(t.firstChild),t.removeChild(t.firstChild)},t=0;t<this.registeredEvents_.length;t++){var i=this.registeredEvents_[t];Dygraph.removeEvent(i.elem,i.type,i.fn)}this.registeredEvents_=[],Dygraph.removeEvent(this.mouseEventElement_,"mouseout",this.mouseOutHandler),Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler),Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseUpHandler_),e(this.maindiv_);var n=function(e){for(var t in e)"object"==typeof e[t]&&(e[t]=null)};Dygraph.removeEvent(window,"resize",this.resizeHandler),this.resizeHandler=null,n(this.layout_),n(this.plotter_),n(this)},Dygraph.prototype.createPlotKitCanvas_=function(e){var t=Dygraph.createCanvas();return t.style.position="absolute",t.style.top=e.style.top,t.style.left=e.style.left,t.width=this.width_,t.height=this.height_,t.style.width=this.width_+"px",t.style.height=this.height_+"px",t},Dygraph.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var e=document.createElement("div");return e.style.position="absolute",e.style.backgroundColor="white",e.style.filter="alpha(opacity=0)",e.style.width=this.width_+"px",e.style.height=this.height_+"px",this.graphDiv.appendChild(e),e}return this.canvas_},Dygraph.prototype.setColors_=function(){var e=this.getLabels(),t=e.length-1;this.colors_=[],this.colorsMap_={};var i,n=this.attr_("colors");if(n){for(i=0;t>i;i++)if(this.visibility()[i]){var a=n[i%n.length];this.colors_.push(a),this.colorsMap_[e[1+i]]=a}}else{var s=this.attr_("colorSaturation")||1,r=this.attr_("colorValue")||.5,o=Math.ceil(t/2);for(i=1;t>=i;i++)if(this.visibility()[i-1]){var l=i%2?Math.ceil(i/2):o+i/2,c=1*l/(1+t),a=Dygraph.hsvToRGB(c,s,r);this.colors_.push(a),this.colorsMap_[e[i]]=a}}},Dygraph.prototype.getColors=function(){return this.colors_},Dygraph.prototype.getPropertiesForSeries=function(e){for(var t=-1,i=this.getLabels(),n=1;n<i.length;n++)if(i[n]==e){t=n;break}return-1==t?null:{name:e,column:t,visible:this.visibility()[t-1],color:this.colorsMap_[e],axis:1+this.seriesToAxisMap_[e]}},Dygraph.prototype.createRollInterface_=function(){this.roller_||(this.roller_=document.createElement("input"),this.roller_.type="text",this.roller_.style.display="none",this.graphDiv.appendChild(this.roller_));var e=this.attr_("showRoller")?"block":"none",t=this.plotter_.area,i={position:"absolute",zIndex:10,top:t.y+t.h-25+"px",left:t.x+1+"px",display:e};this.roller_.size="2",this.roller_.value=this.rollPeriod_;for(var n in i)i.hasOwnProperty(n)&&(this.roller_.style[n]=i[n]);var a=this;this.roller_.onchange=function(){a.adjustRoll(a.roller_.value)}},Dygraph.prototype.dragGetX_=function(e,t){return Dygraph.pageX(e)-t.px},Dygraph.prototype.dragGetY_=function(e,t){return Dygraph.pageY(e)-t.py},Dygraph.prototype.createDragInterface_=function(){var e={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new Dygraph.IFrameTarp,initializeMouseDown:function(e,t,i){e.preventDefault?e.preventDefault():(e.returnValue=!1,e.cancelBubble=!0),i.px=Dygraph.findPosX(t.canvas_),i.py=Dygraph.findPosY(t.canvas_),i.dragStartX=t.dragGetX_(e,i),i.dragStartY=t.dragGetY_(e,i),i.cancelNextDblclick=!1,i.tarp.cover()}},t=this.attr_("interactionModel"),i=this,n=function(t){return function(n){t(n,i,e)}};for(var a in t)t.hasOwnProperty(a)&&this.addEvent(this.mouseEventElement_,a,n(t[a]));this.mouseUpHandler_=function(){if((e.isZooming||e.isPanning)&&(e.isZooming=!1,e.dragStartX=null,e.dragStartY=null),e.isPanning){e.isPanning=!1,e.draggingDate=null,e.dateRange=null;for(var t=0;t<i.axes_.length;t++)delete i.axes_[t].draggingValue,delete i.axes_[t].dragValueRange}e.tarp.uncover()},this.addEvent(document,"mouseup",this.mouseUpHandler_)},Dygraph.prototype.drawZoomRect_=function(e,t,i,n,a,s,r,o){var l=this.canvas_ctx_;s==Dygraph.HORIZONTAL?l.clearRect(Math.min(t,r),this.layout_.getPlotArea().y,Math.abs(t-r),this.layout_.getPlotArea().h):s==Dygraph.VERTICAL&&l.clearRect(this.layout_.getPlotArea().x,Math.min(n,o),this.layout_.getPlotArea().w,Math.abs(n-o)),e==Dygraph.HORIZONTAL?i&&t&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(Math.min(t,i),this.layout_.getPlotArea().y,Math.abs(i-t),this.layout_.getPlotArea().h)):e==Dygraph.VERTICAL&&a&&n&&(l.fillStyle="rgba(128,128,128,0.33)",l.fillRect(this.layout_.getPlotArea().x,Math.min(n,a),this.layout_.getPlotArea().w,Math.abs(a-n))),this.isUsingExcanvas_&&(this.currentZoomRectArgs_=[e,t,i,n,a,0,0,0])
},Dygraph.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height)},Dygraph.prototype.doZoomX_=function(e,t){this.currentZoomRectArgs_=null;var i=this.toDataXCoord(e),n=this.toDataXCoord(t);this.doZoomXDates_(i,n)},Dygraph.zoomAnimationFunction=function(e,t){var i=1.5;return(1-Math.pow(i,-e))/(1-Math.pow(i,-t))},Dygraph.prototype.doZoomXDates_=function(e,t){var i=this.xAxisRange(),n=[e,t];this.zoomed_x_=!0;var a=this;this.doAnimatedZoom(i,n,null,null,function(){a.attr_("zoomCallback")&&a.attr_("zoomCallback")(e,t,a.yAxisRanges())})},Dygraph.prototype.doZoomY_=function(e,t){this.currentZoomRectArgs_=null;for(var i=this.yAxisRanges(),n=[],a=0;a<this.axes_.length;a++){var s=this.toDataYCoord(e,a),r=this.toDataYCoord(t,a);n.push([r,s])}this.zoomed_y_=!0;var o=this;this.doAnimatedZoom(null,null,i,n,function(){if(o.attr_("zoomCallback")){var e=o.xAxisRange();o.attr_("zoomCallback")(e[0],e[1],o.yAxisRanges())}})},Dygraph.prototype.doUnzoom_=function(){var e=!1,t=!1,i=!1;null!==this.dateWindow_&&(e=!0,t=!0);for(var n=0;n<this.axes_.length;n++)"undefined"!=typeof this.axes_[n].valueWindow&&null!==this.axes_[n].valueWindow&&(e=!0,i=!0);if(this.clearSelection(),e){this.zoomed_x_=!1,this.zoomed_y_=!1;var a=this.rawData_[0][0],s=this.rawData_[this.rawData_.length-1][0];if(!this.attr_("animatedZooms")){for(this.dateWindow_=null,n=0;n<this.axes_.length;n++)null!==this.axes_[n].valueWindow&&delete this.axes_[n].valueWindow;return this.drawGraph_(),void(this.attr_("zoomCallback")&&this.attr_("zoomCallback")(a,s,this.yAxisRanges()))}var r=null,o=null,l=null,c=null;if(t&&(r=this.xAxisRange(),o=[a,s]),i){l=this.yAxisRanges();var u=this.gatherDatasets_(this.rolledSeries_,null),h=u[1];for(this.computeYAxisRanges_(h),c=[],n=0;n<this.axes_.length;n++){var d=this.axes_[n];c.push(null!==d.valueRange&&void 0!==d.valueRange?d.valueRange:d.extremeRange)}}var p=this;this.doAnimatedZoom(r,o,l,c,function(){p.dateWindow_=null;for(var e=0;e<p.axes_.length;e++)null!==p.axes_[e].valueWindow&&delete p.axes_[e].valueWindow;p.attr_("zoomCallback")&&p.attr_("zoomCallback")(a,s,p.yAxisRanges())})}},Dygraph.prototype.doAnimatedZoom=function(e,t,i,n,a){var s,r,o=this.attr_("animatedZooms")?Dygraph.ANIMATION_STEPS:1,l=[],c=[];if(null!==e&&null!==t)for(s=1;o>=s;s++)r=Dygraph.zoomAnimationFunction(s,o),l[s-1]=[e[0]*(1-r)+r*t[0],e[1]*(1-r)+r*t[1]];if(null!==i&&null!==n)for(s=1;o>=s;s++){r=Dygraph.zoomAnimationFunction(s,o);for(var u=[],h=0;h<this.axes_.length;h++)u.push([i[h][0]*(1-r)+r*n[h][0],i[h][1]*(1-r)+r*n[h][1]]);c[s-1]=u}var d=this;Dygraph.repeatAndCleanup(function(e){if(c.length)for(var t=0;t<d.axes_.length;t++){var i=c[e][t];d.axes_[t].valueWindow=[i[0],i[1]]}l.length&&(d.dateWindow_=l[e]),d.drawGraph_()},o,Dygraph.ANIMATION_DURATION/o,a)},Dygraph.prototype.getArea=function(){return this.plotter_.area},Dygraph.prototype.eventToDomCoords=function(e){var t=Dygraph.pageX(e)-Dygraph.findPosX(this.mouseEventElement_),i=Dygraph.pageY(e)-Dygraph.findPosY(this.mouseEventElement_);return[t,i]},Dygraph.prototype.findClosestRow=function(e){for(var t=1/0,i=-1,n=-1,a=this.layout_.points,s=0;s<a.length;s++)for(var r=a[s],o=r.length,l=0;o>l;l++){var c=r[l];if(Dygraph.isValidPoint(c,!0)){var u=Math.abs(c.canvasx-e);t>u&&(t=u,n=s,i=l)}}return this.idxToRow_(n,i)},Dygraph.prototype.findClosestPoint=function(e,t){for(var i,n,a,s,r,o,l=1/0,c=-1,u=0;u<this.layout_.datasets.length;++u)for(var h=this.layout_.points[u],d=0;d<h.length;++d){var s=h[d];Dygraph.isValidPoint(s)&&(n=s.canvasx-e,a=s.canvasy-t,i=n*n+a*a,l>i&&(l=i,r=s,o=u,c=d))}var p=this.layout_.setNames[o];return{row:c+this.getLeftBoundary_(),seriesName:p,point:r}},Dygraph.prototype.findStackedPoint=function(e,t){for(var i,n,a=this.findClosestRow(e),s=this.getLeftBoundary_(),r=a-s,o=(this.layout_.points,0);o<this.layout_.datasets.length;++o){var l=this.layout_.points[o];if(!(r>=l.length)){var c=l[r];if(Dygraph.isValidPoint(c)){var u=c.canvasy;if(e>c.canvasx&&r+1<l.length){var h=l[r+1];if(Dygraph.isValidPoint(h)){var d=h.canvasx-c.canvasx;if(d>0){var p=(e-c.canvasx)/d;u+=p*(h.canvasy-c.canvasy)}}}else if(e<c.canvasx&&r>0){var f=l[r-1];if(Dygraph.isValidPoint(f)){var d=c.canvasx-f.canvasx;if(d>0){var p=(c.canvasx-e)/d;u+=p*(f.canvasy-c.canvasy)}}}(0===o||t>u)&&(i=c,n=o)}}}var m=this.layout_.setNames[n];return{row:a,seriesName:m,point:i}},Dygraph.prototype.mouseMove_=function(e){var t=this.layout_.points;if(void 0!==t&&null!==t){var i=this.eventToDomCoords(e),n=i[0],a=i[1],s=this.attr_("highlightSeriesOpts"),r=!1;if(s&&!this.lockedSet_){var o;o=this.attr_("stackedGraph")?this.findStackedPoint(n,a):this.findClosestPoint(n,a),r=this.setSelection(o.row,o.seriesName)}else{var l=this.findClosestRow(n);r=this.setSelection(l)}var c=this.attr_("highlightCallback");c&&r&&c(e,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},Dygraph.prototype.getLeftBoundary_=function(){for(var e=0;e<this.boundaryIds_.length;e++)if(void 0!==this.boundaryIds_[e])return this.boundaryIds_[e][0];return 0},Dygraph.prototype.idxToRow_=function(e,t){if(0>t)return-1;var i=this.getLeftBoundary_();return i+t},Dygraph.prototype.animateSelection_=function(e){var t=10,i=30;void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var n=this.fadeLevel,a=0>e?n:t-n;if(0>=a)return void(this.fadeLevel&&this.updateSelection_(1));var s=++this.animateId,r=this;Dygraph.repeatAndCleanup(function(){r.animateId==s&&(r.fadeLevel+=e,0===r.fadeLevel?r.clearSelection():r.updateSelection_(r.fadeLevel/t))},a,i,function(){})},Dygraph.prototype.updateSelection_=function(e){var t,i=(this.cascadeEvents_("select",{selectedX:this.lastx_,selectedPoints:this.selPoints_}),this.canvas_ctx_);if(this.attr_("highlightSeriesOpts")){i.clearRect(0,0,this.width_,this.height_);var n=1-this.attr_("highlightSeriesBackgroundAlpha");if(n){var a=!0;if(a){if(void 0===e)return void this.animateSelection_(1);n*=e}i.fillStyle="rgba(255,255,255,"+n+")",i.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,i)}else if(this.previousVerticalX_>=0){var s=0,r=this.attr_("labels");for(t=1;t<r.length;t++){var o=this.attr_("highlightCircleSize",r[t]);o>s&&(s=o)}var l=this.previousVerticalX_;i.clearRect(l-s-1,0,2*s+2,this.height_)}if(this.isUsingExcanvas_&&this.currentZoomRectArgs_&&Dygraph.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_),this.selPoints_.length>0){var c=this.selPoints_[0].canvasx;for(i.save(),t=0;t<this.selPoints_.length;t++){var u=this.selPoints_[t];if(Dygraph.isOK(u.canvasy)){var h=this.attr_("highlightCircleSize",u.name),d=this.attr_("drawHighlightPointCallback",u.name),p=this.plotter_.colors[u.name];d||(d=Dygraph.Circles.DEFAULT),i.lineWidth=this.attr_("strokeWidth",u.name),i.strokeStyle=p,i.fillStyle=p,d(this.g,u.name,i,c,u.canvasy,p,h)}}i.restore(),this.previousVerticalX_=c}},Dygraph.prototype.setSelection=function(e,t,i){this.selPoints_=[],e!==!1&&(e-=this.getLeftBoundary_());var n=!1;if(e!==!1&&e>=0){e!=this.lastRow_&&(n=!0),this.lastRow_=e;for(var a=0;a<this.layout_.datasets.length;++a){var s=this.layout_.datasets[a];if(e<s.length){var r=this.layout_.points[a][e];this.attr_("stackedGraph")&&(r=this.layout_.unstackPointAtIndex(a,e)),null!==r.yval&&this.selPoints_.push(r)}}}else this.lastRow_>=0&&(n=!0),this.lastRow_=-1;return this.lastx_=this.selPoints_.length?this.selPoints_[0].xval:-1,void 0!==t&&(this.highlightSet_!==t&&(n=!0),this.highlightSet_=t),void 0!==i&&(this.lockedSet_=i),n&&this.updateSelection_(void 0),n},Dygraph.prototype.mouseOut_=function(e){this.attr_("unhighlightCallback")&&this.attr_("unhighlightCallback")(e),this.attr_("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},Dygraph.prototype.clearSelection=function(){return this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?void this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,void(this.highlightSet_=null))},Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var e=0;e<this.layout_.points.length;e++)for(var t=this.layout_.points[e],i=0;i<t.length;i++)if(t[i].x==this.selPoints_[0].x)return i+this.getLeftBoundary_();return-1},Dygraph.prototype.getHighlightSeries=function(){return this.highlightSet_},Dygraph.prototype.loadedEvent_=function(e){this.rawData_=this.parseCSV_(e),this.predraw_()},Dygraph.prototype.addXTicks_=function(){var e;e=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.fullXRange_();var t=this.optionsViewForAxis_("x"),i=t("ticker")(e[0],e[1],this.width_,t,this);this.layout_.setXTicks(i)},Dygraph.prototype.extremeValues_=function(e){var t,i,n=null,a=null,s=this.attr_("errorBars")||this.attr_("customBars");if(s){for(t=0;t<e.length;t++)if(i=e[t][1][0],null!==i&&!isNaN(i)){var r=i-e[t][1][1],o=i+e[t][1][2];r>i&&(r=i),i>o&&(o=i),(null===a||o>a)&&(a=o),(null===n||n>r)&&(n=r)}}else for(t=0;t<e.length;t++)i=e[t][1],null===i||isNaN(i)||((null===a||i>a)&&(a=i),(null===n||n>i)&&(n=i));return[n,a]},Dygraph.prototype.predraw_=function(){var e=new Date;this.computeYAxes_(),this.plotter_&&(this.cascadeEvents_("clearChart"),this.plotter_.clear()),this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rangeSelector_&&this.rangeSelector_.renderStaticLayer(),this.rolledSeries_=[null];for(var t=1;t<this.numColumns();t++){var i=this.attr_("logscale",t),n=this.extractSeries_(this.rawData_,t,i);n=this.rollingAverage(n,this.rollPeriod_),this.rolledSeries_.push(n)}this.drawGraph_();var a=new Date;this.drawingTimeMs_=a-e},Dygraph.prototype.gatherDatasets_=function(e,t){var i,n,a,s=[],r=[],o=[],l={},c=e.length-1;for(i=c;i>=1;i--)if(this.visibility()[i-1]){var u=[];for(n=0;n<e[i].length;n++)u.push(e[i][n]);var h=this.attr_("errorBars")||this.attr_("customBars");if(t){var d=t[0],p=t[1],f=[],m=null,g=null;for(a=0;a<u.length;a++)u[a][0]>=d&&null===m&&(m=a),u[a][0]<=p&&(g=a);for(null===m&&(m=0),m>0&&m--,null===g&&(g=u.length-1),g<u.length-1&&g++,s[i-1]=[m,g],a=m;g>=a;a++)f.push(u[a]);u=f}else s[i-1]=[0,u.length-1];var v=this.extremeValues_(u);if(h)for(n=0;n<u.length;n++)u[n]=[u[n][0],u[n][1][0],u[n][1][1],u[n][1][2]];else if(this.attr_("stackedGraph")){var b,_=u.length;for(n=0;_>n;n++){var y=u[n][0];void 0===r[y]&&(r[y]=0),b=u[n][1],null!==b?(r[y]+=b,u[n]=[y,r[y]],r[y]>v[1]&&(v[1]=r[y]),r[y]<v[0]&&(v[0]=r[y])):u[n]=[y,null]}}var w=this.attr_("labels")[i];l[w]=v,o[i]=u}if(this.attr_("stackedGraph"))for(a=o.length-1;a>=0;--a)if(o[a]){for(n=0;n<o[a].length;n++){var y=o[a][n][0];if(isNaN(r[y]))for(i=o.length-1;i>=0;i--)o[i]&&(o[i][n][1]=0/0)}break}return[o,l,s]},Dygraph.prototype.drawGraph_=function(){var e=new Date,t=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.attr_("highlightCircleSize");var i=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),n=i[0],a=i[1];this.boundaryIds_=i[2],this.setIndexByName_={};var s=this.attr_("labels");s.length>0&&(this.setIndexByName_[s[0]]=0);for(var r=0,o=1;o<n.length;o++)this.setIndexByName_[s[o]]=o,this.visibility()[o-1]&&(this.layout_.addDataset(s[o],n[o]),this.datasetIndex_[o]=r++);this.computeYAxisRanges_(a),this.layout_.setYAxes(this.axes_),this.addXTicks_();var l=this.zoomed_x_;if(this.layout_.setDateWindow(this.dateWindow_),this.zoomed_x_=l,this.layout_.evaluateWithError(),this.renderGraph_(t),this.attr_("timingName")){var c=new Date;console&&console.log(this.attr_("timingName")+" - drawGraph: "+(c-e)+"ms")}},Dygraph.prototype.renderGraph_=function(e){this.cascadeEvents_("clearChart"),this.plotter_.clear(),this.attr_("underlayCallback")&&this.attr_("underlayCallback")(this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var t={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",t),this.plotter_.render(),this.cascadeEvents_("didDrawChart",t),this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height),this.rangeSelector_&&this.rangeSelector_.renderInteractiveLayer(),null!==this.attr_("drawCallback")&&this.attr_("drawCallback")(this,e)},Dygraph.prototype.computeYAxes_=function(){var e,t,i,n,a,s,r;if(void 0!==this.axes_&&this.user_attrs_.hasOwnProperty("valueRange")===!1)for(t=[],a=0;a<this.axes_.length;a++)t.push(this.axes_[a].valueWindow);this.axes_=[{yAxisId:0,g:this}],this.seriesToAxisMap_={};var o=this.attr_("labels"),l={};for(e=1;e<o.length;e++)l[o[e]]=e-1;var c=["includeZero","valueRange","labelsKMB","labelsKMG2","pixelsPerYLabel","yAxisLabelWidth","axisLabelFontSize","axisTickSize","logscale"];for(e=0;e<c.length;e++){var u=c[e];r=this.attr_(u),r&&(this.axes_[0][u]=r)}for(i in l)if(l.hasOwnProperty(i))if(n=this.attr_("axis",i),null!==n){if("object"==typeof n){s={},Dygraph.update(s,this.axes_[0]),Dygraph.update(s,{valueRange:null});var h=this.axes_.length;s.yAxisId=h,s.g=this,Dygraph.update(s,n),this.axes_.push(s),this.seriesToAxisMap_[i]=h}}else this.seriesToAxisMap_[i]=0;for(i in l)if(l.hasOwnProperty(i)&&(n=this.attr_("axis",i),"string"==typeof n)){if(!this.seriesToAxisMap_.hasOwnProperty(n))return this.error("Series "+i+" wants to share a y-axis with series "+n+", which does not define its own axis."),null;var d=this.seriesToAxisMap_[n];this.seriesToAxisMap_[i]=d}if(void 0!==t)for(a=0;a<t.length;a++)this.axes_[a].valueWindow=t[a];for(n=0;n<this.axes_.length;n++)if(0===n)s=this.optionsViewForAxis_("y"+(n?"2":"")),r=s("valueRange"),r&&(this.axes_[n].valueRange=r);else{var p=this.user_attrs_.axes;p&&p.y2&&(r=p.y2.valueRange,r&&(this.axes_[n].valueRange=r))}},Dygraph.prototype.numAxes=function(){var e=0;for(var t in this.seriesToAxisMap_)if(this.seriesToAxisMap_.hasOwnProperty(t)){var i=this.seriesToAxisMap_[t];i>e&&(e=i)}return 1+e},Dygraph.prototype.axisPropertiesForSeries=function(e){return this.axes_[this.seriesToAxisMap_[e]]},Dygraph.prototype.computeYAxisRanges_=function(e){var t,i=[];for(t in this.seriesToAxisMap_)if(this.seriesToAxisMap_.hasOwnProperty(t)){for(var n=this.seriesToAxisMap_[t];i.length<=n;)i.push([]);i[n].push(t)}for(var a=0;a<this.axes_.length;a++){var s=this.axes_[a];if(i[a]){t=i[a];for(var r,o,l=1/0,c=-1/0,u=0;u<t.length;u++)e.hasOwnProperty(t[u])&&(r=e[t[u]][0],null!==r&&(l=Math.min(r,l)),o=e[t[u]][1],null!==o&&(c=Math.max(o,c)));s.includeZero&&l>0&&(l=0),1/0==l&&(l=0),c==-1/0&&(c=1);var h=c-l;0===h&&(h=c);var d,p;s.logscale?(d=c+.1*h,p=l):(d=c+.1*h,p=l-.1*h,this.attr_("avoidMinZero")||(0>p&&l>=0&&(p=0),d>0&&0>=c&&(d=0)),this.attr_("includeZero")&&(0>c&&(d=0),l>0&&(p=0))),s.extremeRange=[p,d]}else s.extremeRange=[0,1];s.computedValueRange=s.valueWindow?[s.valueWindow[0],s.valueWindow[1]]:s.valueRange?[s.valueRange[0],s.valueRange[1]]:s.extremeRange;var f=this.optionsViewForAxis_("y"+(a?"2":"")),m=f("ticker");if(0===a||s.independentTicks)s.ticks=m(s.computedValueRange[0],s.computedValueRange[1],this.height_,f,this);else{for(var g=this.axes_[0],v=g.ticks,b=g.computedValueRange[1]-g.computedValueRange[0],_=s.computedValueRange[1]-s.computedValueRange[0],y=[],w=0;w<v.length;w++){var k=(v[w].v-g.computedValueRange[0])/b,x=s.computedValueRange[0]+k*_;y.push(x)}s.ticks=m(s.computedValueRange[0],s.computedValueRange[1],this.height_,f,this,y)}}},Dygraph.prototype.extractSeries_=function(e,t,i){for(var n=[],a=0;a<e.length;a++){var s=e[a][0],r=e[a][t];i&&0>=r&&(r=null),n.push([s,r])}return n},Dygraph.prototype.rollingAverage=function(e,t){if(e.length<2)return e;t=Math.min(t,e.length);var i,n,a,s,r,o,l,c,u=[],h=this.attr_("sigma");if(this.fractions_){var d=0,p=0,f=100;for(a=0;a<e.length;a++){d+=e[a][1][0],p+=e[a][1][1],a-t>=0&&(d-=e[a-t][1][0],p-=e[a-t][1][1]);var m=e[a][0],g=p?d/p:0;if(this.attr_("errorBars"))if(this.attr_("wilsonInterval"))if(p){var v=0>g?0:g,b=p,_=h*Math.sqrt(v*(1-v)/b+h*h/(4*b*b)),y=1+h*h/p;i=(v+h*h/(2*p)-_)/y,n=(v+h*h/(2*p)+_)/y,u[a]=[m,[v*f,(v-i)*f,(n-v)*f]]}else u[a]=[m,[0,0,0]];else c=p?h*Math.sqrt(g*(1-g)/p):1,u[a]=[m,[f*g,f*c,f*c]];else u[a]=[m,f*g]}}else if(this.attr_("customBars")){i=0;var w=0;n=0;var k=0;for(a=0;a<e.length;a++){var x=e[a][1];if(r=x[1],u[a]=[e[a][0],[r,r-x[0],x[2]-r]],null===r||isNaN(r)||(i+=x[0],w+=r,n+=x[2],k+=1),a-t>=0){var C=e[a-t];null===C[1][1]||isNaN(C[1][1])||(i-=C[1][0],w-=C[1][1],n-=C[1][2],k-=1)}u[a]=k?[e[a][0],[1*w/k,1*(w-i)/k,1*(n-w)/k]]:[e[a][0],[null,null,null]]}}else if(this.attr_("errorBars"))for(a=0;a<e.length;a++){o=0;var S=0;for(l=0,s=Math.max(0,a-t+1);a+1>s;s++)r=e[s][1][0],null===r||isNaN(r)||(l++,o+=e[s][1][0],S+=Math.pow(e[s][1][1],2));l?(c=Math.sqrt(S)/l,u[a]=[e[a][0],[o/l,h*c,h*c]]):u[a]=[e[a][0],[null,null,null]]}else{if(1==t)return e;for(a=0;a<e.length;a++){for(o=0,l=0,s=Math.max(0,a-t+1);a+1>s;s++)r=e[s][1],null===r||isNaN(r)||(l++,o+=e[s][1]);u[a]=l?[e[a][0],o/l]:[e[a][0],null]}}return u},Dygraph.prototype.detectTypeFromString_=function(e){var t=!1,i=e.indexOf("-");i>0&&"e"!=e[i-1]&&"E"!=e[i-1]||e.indexOf("/")>=0||isNaN(parseFloat(e))?t=!0:8==e.length&&e>"19700101"&&"20371231">e&&(t=!0),t?(this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter):(this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Dygraph.prototype.parseFloat_=function(e,t,i){var n=parseFloat(e);if(!isNaN(n))return n;if(/^ *$/.test(e))return null;if(/^ *nan *$/i.test(e))return 0/0;var a="Unable to parse '"+e+"' as a number";return null!==i&&null!==t&&(a+=" on line "+(1+t)+" ('"+i+"') of CSV."),this.error(a),null},Dygraph.prototype.parseCSV_=function(e){var t,i,n=[],a=Dygraph.detectLineDelimiter(e),s=e.split(a||"\n"),r=this.attr_("delimiter");-1==s[0].indexOf(r)&&s[0].indexOf("	")>=0&&(r="	");var o=0;"labels"in this.user_attrs_||(o=1,this.attrs_.labels=s[0].split(r));for(var l,c=0,u=!1,h=this.attr_("labels").length,d=!1,p=o;p<s.length;p++){var f=s[p];if(c=p,0!==f.length&&"#"!=f[0]){var m=f.split(r);if(!(m.length<2)){var g=[];if(u||(this.detectTypeFromString_(m[0]),l=this.attr_("xValueParser"),u=!0),g[0]=l(m[0],this),this.fractions_)for(i=1;i<m.length;i++)t=m[i].split("/"),2!=t.length?(this.error('Expected fractional "num/den" values in CSV data but found a value \''+m[i]+"' on line "+(1+p)+" ('"+f+"') which is not of this form."),g[i]=[0,0]):g[i]=[this.parseFloat_(t[0],p,f),this.parseFloat_(t[1],p,f)];else if(this.attr_("errorBars"))for(m.length%2!=1&&this.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+p)+" has an odd number of values ("+(m.length-1)+"): '"+f+"'"),i=1;i<m.length;i+=2)g[(i+1)/2]=[this.parseFloat_(m[i],p,f),this.parseFloat_(m[i+1],p,f)];else if(this.attr_("customBars"))for(i=1;i<m.length;i++){var v=m[i];/^ *$/.test(v)?g[i]=[null,null,null]:(t=v.split(";"),3==t.length?g[i]=[this.parseFloat_(t[0],p,f),this.parseFloat_(t[1],p,f),this.parseFloat_(t[2],p,f)]:this.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+v+'" on line '+(1+p)))}else for(i=1;i<m.length;i++)g[i]=this.parseFloat_(m[i],p,f);if(n.length>0&&g[0]<n[n.length-1][0]&&(d=!0),g.length!=h&&this.error("Number of columns in line "+p+" ("+g.length+") does not agree with number of labels ("+h+") "+f),0===p&&this.attr_("labels")){var b=!0;for(i=0;b&&i<g.length;i++)g[i]&&(b=!1);if(b){this.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+f+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}n.push(g)}}}return d&&(this.warn("CSV is out of order; order it correctly to speed loading."),n.sort(function(e,t){return e[0]-t[0]})),n},Dygraph.prototype.parseArray_=function(e){if(0===e.length)return this.error("Can't plot empty data set"),null;if(0===e[0].length)return this.error("Data set cannot contain an empty row"),null;var t;if(null===this.attr_("labels"))for(this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],t=1;t<e[0].length;t++)this.attrs_.labels.push("Y"+t);else{var i=this.attr_("labels");if(i.length!=e[0].length)return this.error("Mismatch between number of labels ("+i+") and number of columns in array ("+e[0].length+")"),null}if(Dygraph.isDateLike(e[0][0])){this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter,this.attrs_.axes.x.ticker=Dygraph.dateTicker;var n=Dygraph.clone(e);for(t=0;t<e.length;t++){if(0===n[t].length)return this.error("Row "+(1+t)+" of data is empty"),null;if(null===n[t][0]||"function"!=typeof n[t][0].getTime||isNaN(n[t][0].getTime()))return this.error("x value in row "+(1+t)+" is not a Date"),null;n[t][0]=n[t][0].getTime()}return n}return this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.axisLabelFormatter=Dygraph.numberAxisLabelFormatter,this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,e},Dygraph.prototype.parseDataTable_=function(e){var t=function(e){var t=String.fromCharCode(65+e%26);for(e=Math.floor(e/26);e>0;)t=String.fromCharCode(65+(e-1)%26)+t.toLowerCase(),e=Math.floor((e-1)/26);return t},i=e.getNumberOfColumns(),n=e.getNumberOfRows(),a=e.getColumnType(0);if("date"==a||"datetime"==a)this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter;else{if("number"!=a)return this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+a+"')"),null;this.attrs_.xValueParser=function(e){return parseFloat(e)},this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var s,r,o=[],l={},c=!1;for(s=1;i>s;s++){var u=e.getColumnType(s);if("number"==u)o.push(s);else if("string"==u&&this.attr_("displayAnnotations")){var h=o[o.length-1];l.hasOwnProperty(h)?l[h].push(s):l[h]=[s],c=!0}else this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}var d=[e.getColumnLabel(0)];for(s=0;s<o.length;s++)d.push(e.getColumnLabel(o[s])),this.attr_("errorBars")&&(s+=1);this.attrs_.labels=d,i=d.length;var p=[],f=!1,m=[];for(s=0;n>s;s++){var g=[];if("undefined"!=typeof e.getValue(s,0)&&null!==e.getValue(s,0)){if(g.push("date"==a||"datetime"==a?e.getValue(s,0).getTime():e.getValue(s,0)),this.attr_("errorBars"))for(r=0;i-1>r;r++)g.push([e.getValue(s,1+2*r),e.getValue(s,2+2*r)]);else{for(r=0;r<o.length;r++){var v=o[r];if(g.push(e.getValue(s,v)),c&&l.hasOwnProperty(v)&&null!==e.getValue(s,l[v][0])){var b={};b.series=e.getColumnLabel(v),b.xval=g[0],b.shortText=t(m.length),b.text="";for(var _=0;_<l[v].length;_++)_&&(b.text+="\n"),b.text+=e.getValue(s,l[v][_]);m.push(b)}}for(r=0;r<g.length;r++)isFinite(g[r])||(g[r]=null)}p.length>0&&g[0]<p[p.length-1][0]&&(f=!0),p.push(g)}else this.warn("Ignoring row "+s+" of DataTable because of undefined or null first column.")}f&&(this.warn("DataTable is out of order; order it correctly to speed loading."),p.sort(function(e,t){return e[0]-t[0]})),this.rawData_=p,m.length>0&&this.setAnnotations(m,!0)},Dygraph.prototype.start_=function(){var e=this.file_;if("function"==typeof e&&(e=e()),Dygraph.isArrayLike(e))this.rawData_=this.parseArray_(e),this.predraw_();else if("object"==typeof e&&"function"==typeof e.getColumnRange)this.parseDataTable_(e),this.predraw_();else if("string"==typeof e){var t=Dygraph.detectLineDelimiter(e);if(t)this.loadedEvent_(e);else{var i=new XMLHttpRequest,n=this;i.onreadystatechange=function(){4==i.readyState&&(200===i.status||0===i.status)&&n.loadedEvent_(i.responseText)},i.open("GET",e,!0),i.send(null)}}else this.error("Unknown data format: "+typeof e)},Dygraph.prototype.updateOptions=function(e,t){"undefined"==typeof t&&(t=!1);var i=e.file,n=Dygraph.mapLegacyOptions_(e);"rollPeriod"in n&&(this.rollPeriod_=n.rollPeriod),"dateWindow"in n&&(this.dateWindow_=n.dateWindow,"isZoomedIgnoreProgrammaticZoom"in n||(this.zoomed_x_=null!==n.dateWindow)),"valueRange"in n&&!("isZoomedIgnoreProgrammaticZoom"in n)&&(this.zoomed_y_=null!==n.valueRange);var a=Dygraph.isPixelChangingOptionList(this.attr_("labels"),n);Dygraph.updateDeep(this.user_attrs_,n),i?(this.file_=i,t||this.start_()):t||(a?this.predraw_():this.renderGraph_(!1))},Dygraph.mapLegacyOptions_=function(e){var t={};for(var i in e)"file"!=i&&e.hasOwnProperty(i)&&(t[i]=e[i]);var n=function(e,i,n){t.axes||(t.axes={}),t.axes[e]||(t.axes[e]={}),t.axes[e][i]=n},a=function(i,a,s){"undefined"!=typeof e[i]&&(n(a,s,e[i]),delete t[i])};return a("xValueFormatter","x","valueFormatter"),a("pixelsPerXLabel","x","pixelsPerLabel"),a("xAxisLabelFormatter","x","axisLabelFormatter"),a("xTicker","x","ticker"),a("yValueFormatter","y","valueFormatter"),a("pixelsPerYLabel","y","pixelsPerLabel"),a("yAxisLabelFormatter","y","axisLabelFormatter"),a("yTicker","y","ticker"),t},Dygraph.prototype.resize=function(e,t){if(!this.resize_lock){this.resize_lock=!0,null===e!=(null===t)&&(this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),e=t=null);var i=this.width_,n=this.height_;e?(this.maindiv_.style.width=e+"px",this.maindiv_.style.height=t+"px",this.width_=e,this.height_=t):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),(i!=this.width_||n!=this.height_)&&(this.maindiv_.innerHTML="",this.roller_=null,this.attrs_.labelsDiv=null,this.createInterface_(),this.annotations_.length&&this.layout_.setAnnotations(this.annotations_),this.predraw_()),this.resize_lock=!1}},Dygraph.prototype.adjustRoll=function(e){this.rollPeriod_=e,this.predraw_()},Dygraph.prototype.visibility=function(){for(this.attr_("visibility")||(this.attrs_.visibility=[]);this.attr_("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.attr_("visibility")},Dygraph.prototype.setVisibility=function(e,t){var i=this.visibility();0>e||e>=i.length?this.warn("invalid series number in setVisibility: "+e):(i[e]=t,this.predraw_())},Dygraph.prototype.size=function(){return{width:this.width_,height:this.height_}},Dygraph.prototype.setAnnotations=function(e,t){Dygraph.addAnnotationRule(),this.annotations_=e,this.layout_.setAnnotations(this.annotations_),t||this.predraw_()},Dygraph.prototype.annotations=function(){return this.annotations_},Dygraph.prototype.getLabels=function(){return this.attr_("labels").slice()},Dygraph.prototype.indexFromSetName=function(e){return this.setIndexByName_[e]},Dygraph.prototype.datasetIndexFromSetName_=function(e){return this.datasetIndex_[this.indexFromSetName(e)]},Dygraph.addAnnotationRule=function(){if(!Dygraph.addedAnnotationCSS){var e="border: 1px solid black; background-color: white; text-align: center;",t=document.createElement("style");t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t);for(var i=0;i<document.styleSheets.length;i++)if(!document.styleSheets[i].disabled){var n=document.styleSheets[i];try{if(n.insertRule){var a=n.cssRules?n.cssRules.length:0;n.insertRule(".dygraphDefaultAnnotation { "+e+" }",a)}else n.addRule&&n.addRule(".dygraphDefaultAnnotation",e);return void(Dygraph.addedAnnotationCSS=!0)}catch(s){}}this.warn("Unable to add default annotation CSS rule; display may be off.")}};var DateGraph=Dygraph;Dygraph.LOG_SCALE=10,Dygraph.LN_TEN=Math.log(Dygraph.LOG_SCALE),Dygraph.log10=function(e){return Math.log(e)/Dygraph.LN_TEN},Dygraph.DEBUG=1,Dygraph.INFO=2,Dygraph.WARNING=3,Dygraph.ERROR=3,Dygraph.LOG_STACK_TRACES=!1,Dygraph.DOTTED_LINE=[2,2],Dygraph.DASHED_LINE=[7,3],Dygraph.DOT_DASH_LINE=[7,2,2,2],Dygraph.log=function(e,t){var i;if("undefined"!=typeof printStackTrace)try{for(i=printStackTrace({guess:!1});-1!=i[0].indexOf("stacktrace");)i.splice(0,1);i.splice(0,2);for(var n=0;n<i.length;n++)i[n]=i[n].replace(/\([^)]*\/(.*)\)/,"@$1").replace(/\@.*\/([^\/]*)/,"@$1").replace("[object Object].","");var a=i.splice(0,1)[0];t+=" ("+a.replace(/^.*@ ?/,"")+")"}catch(s){}if("undefined"!=typeof console)switch(e){case Dygraph.DEBUG:console.debug("dygraphs: "+t);break;case Dygraph.INFO:console.info("dygraphs: "+t);break;case Dygraph.WARNING:console.warn("dygraphs: "+t);break;case Dygraph.ERROR:console.error("dygraphs: "+t)}Dygraph.LOG_STACK_TRACES&&console.log(i.join("\n"))},Dygraph.info=function(e){Dygraph.log(Dygraph.INFO,e)},Dygraph.prototype.info=Dygraph.info,Dygraph.warn=function(e){Dygraph.log(Dygraph.WARNING,e)},Dygraph.prototype.warn=Dygraph.warn,Dygraph.error=function(e){Dygraph.log(Dygraph.ERROR,e)},Dygraph.prototype.error=Dygraph.error,Dygraph.getContext=function(e){return e.getContext("2d")},Dygraph.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):(e[t+i]=function(){i(window.event)},e.attachEvent("on"+t,e[t+i]))},Dygraph.prototype.addEvent=function(e,t,i){Dygraph.addEvent(e,t,i),this.registeredEvents_.push({elem:e,type:t,fn:i})},Dygraph.removeEvent=function(e,t,i){if(e.removeEventListener)e.removeEventListener(t,i,!1);else{try{e.detachEvent("on"+t,e[t+i])}catch(n){}e[t+i]=null}},Dygraph.cancelEvent=function(e){return e=e?e:window.event,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1},Dygraph.hsvToRGB=function(e,t,i){var n,a,s;if(0===t)n=i,a=i,s=i;else{var r=Math.floor(6*e),o=6*e-r,l=i*(1-t),c=i*(1-t*o),u=i*(1-t*(1-o));switch(r){case 1:n=c,a=i,s=l;break;case 2:n=l,a=i,s=u;break;case 3:n=l,a=c,s=i;break;case 4:n=u,a=l,s=i;break;case 5:n=i,a=l,s=c;break;case 6:case 0:n=i,a=u,s=l}}return n=Math.floor(255*n+.5),a=Math.floor(255*a+.5),s=Math.floor(255*s+.5),"rgb("+n+","+a+","+s+")"},Dygraph.findPosX=function(e){var t=0;if(e.offsetParent)for(var i=e;;){if(t+=i.offsetLeft,!i.offsetParent)break;i=i.offsetParent}else e.x&&(t+=e.x);for(;e&&e!=document.body;)t-=e.scrollLeft,e=e.parentNode;return t},Dygraph.findPosY=function(e){var t=0;if(e.offsetParent)for(var i=e;;){if(t+=i.offsetTop,!i.offsetParent)break;i=i.offsetParent}else e.y&&(t+=e.y);for(;e&&e!=document.body;)t-=e.scrollTop,e=e.parentNode;return t},Dygraph.pageX=function(e){if(e.pageX)return!e.pageX||e.pageX<0?0:e.pageX;var t=document,i=document.body;return e.clientX+(t.scrollLeft||i.scrollLeft)-(t.clientLeft||0)},Dygraph.pageY=function(e){if(e.pageY)return!e.pageY||e.pageY<0?0:e.pageY;var t=document,i=document.body;return e.clientY+(t.scrollTop||i.scrollTop)-(t.clientTop||0)},Dygraph.isOK=function(e){return e&&!isNaN(e)},Dygraph.isValidPoint=function(e,t){return e?null===e.yval?!1:null===e.x||void 0===e.x?!1:null===e.y||void 0===e.y?!1:isNaN(e.x)||!t&&isNaN(e.y)?!1:!0:!1},Dygraph.floatFormat=function(e,t){var i=Math.min(Math.max(1,t||2),21);return Math.abs(e)<.001&&0!==e?e.toExponential(i-1):e.toPrecision(i)},Dygraph.zeropad=function(e){return 10>e?"0"+e:""+e},Dygraph.hmsString_=function(e){var t=Dygraph.zeropad,i=new Date(e);return i.getSeconds()?t(i.getHours())+":"+t(i.getMinutes())+":"+t(i.getSeconds()):t(i.getHours())+":"+t(i.getMinutes())},Dygraph.round_=function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i},Dygraph.binarySearch=function(e,t,i,n,a){if((null===n||void 0===n||null===a||void 0===a)&&(n=0,a=t.length-1),n>a)return-1;(null===i||void 0===i)&&(i=0);var s=function(e){return e>=0&&e<t.length},r=parseInt((n+a)/2,10),o=t[r];if(o==e)return r;var l;return o>e?i>0&&(l=r-1,s(l)&&t[l]<e)?r:Dygraph.binarySearch(e,t,i,n,r-1):e>o?0>i&&(l=r+1,s(l)&&t[l]>e)?r:Dygraph.binarySearch(e,t,i,r+1,a):void 0},Dygraph.dateParser=function(e){var t,i;if((-1==e.search("-")||-1!=e.search("T")||-1!=e.search("Z"))&&(i=Dygraph.dateStrToMillis(e),i&&!isNaN(i)))return i;if(-1!=e.search("-")){for(t=e.replace("-","/","g");-1!=t.search("-");)t=t.replace("-","/");i=Dygraph.dateStrToMillis(t)}else 8==e.length?(t=e.substr(0,4)+"/"+e.substr(4,2)+"/"+e.substr(6,2),i=Dygraph.dateStrToMillis(t)):i=Dygraph.dateStrToMillis(e);return(!i||isNaN(i))&&Dygraph.error("Couldn't parse "+e+" as a date"),i},Dygraph.dateStrToMillis=function(e){return new Date(e).getTime()},Dygraph.update=function(e,t){if("undefined"!=typeof t&&null!==t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},Dygraph.updateDeep=function(e,t){function i(e){return"object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}if("undefined"!=typeof t&&null!==t)for(var n in t)t.hasOwnProperty(n)&&(null===t[n]?e[n]=null:Dygraph.isArrayLike(t[n])?e[n]=t[n].slice():i(t[n])?e[n]=t[n]:"object"==typeof t[n]?(("object"!=typeof e[n]||null===e[n])&&(e[n]={}),Dygraph.updateDeep(e[n],t[n])):e[n]=t[n]);
return e},Dygraph.isArrayLike=function(e){var t=typeof e;return"object"!=t&&("function"!=t||"function"!=typeof e.item)||null===e||"number"!=typeof e.length||3===e.nodeType?!1:!0},Dygraph.isDateLike=function(e){return"object"!=typeof e||null===e||"function"!=typeof e.getTime?!1:!0},Dygraph.clone=function(e){for(var t=[],i=0;i<e.length;i++)t.push(Dygraph.isArrayLike(e[i])?Dygraph.clone(e[i]):e[i]);return t},Dygraph.createCanvas=function(){var e=document.createElement("canvas"),t=/MSIE/.test(navigator.userAgent)&&!window.opera;return t&&"undefined"!=typeof G_vmlCanvasManager&&(e=G_vmlCanvasManager.initElement(e)),e},Dygraph.isAndroid=function(){return/Android/.test(navigator.userAgent)},Dygraph.Iterator=function(e,t,i,n){t=t||0,i=i||e.length,this.hasNext=!0,this.peek=null,this.start_=t,this.array_=e,this.predicate_=n,this.end_=Math.min(e.length,t+i),this.nextIdx_=t-1,this.next()},Dygraph.Iterator.prototype.next=function(){if(!this.hasNext)return null;for(var e=this.peek,t=this.nextIdx_+1,i=!1;t<this.end_;){if(!this.predicate_||this.predicate_(this.array_,t)){this.peek=this.array_[t],i=!0;break}t++}return this.nextIdx_=t,i||(this.hasNext=!1,this.peek=null),e},Dygraph.createIterator=function(e,t,i,n){return new Dygraph.Iterator(e,t,i,n)},Dygraph.repeatAndCleanup=function(e,t,i,n){var a=0,s=(new Date).getTime();return e(a),1==t?void n():void function r(){if(!(a>=t)){var o=s+(1+a)*i;setTimeout(function(){a++,e(a),a>=t-1?n():r()},o-(new Date).getTime())}}()},Dygraph.isPixelChangingOptionList=function(e,t){var i={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLabelColor:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,digitsAfterDecimal:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawXGrid:!0,drawYGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,isZoomedIgnoreProgrammaticZoom:!0,labelsDiv:!0,labelsDivStyles:!0,labelsDivWidth:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,maxNumberWidth:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotStrokeColor:!0,showLabelsOnHighlight:!0,showRoller:!0,sigFigs:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,xAxisLabelFormatter:!0,xTicker:!0,xValueFormatter:!0,yAxisLabelFormatter:!0,yValueFormatter:!0,zoomCallback:!0},n=!1,a={};if(e)for(var s=1;s<e.length;s++)a[e[s]]=!0;for(var r in t){if(n)break;if(t.hasOwnProperty(r))if(a[r])for(var o in t[r]){if(n)break;t[r].hasOwnProperty(o)&&!i[o]&&(n=!0)}else i[r]||(n=!0)}return n},Dygraph.compareArrays=function(e,t){if(!Dygraph.isArrayLike(e)||!Dygraph.isArrayLike(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},Dygraph.regularShape_=function(e,t,i,n,a,s,r){s=s?s:0,r=r?r:2*Math.PI/t,e.beginPath();var o=s,l=o,c=function(){var e=n+Math.sin(l)*i,t=a+-Math.cos(l)*i;return[e,t]},u=c(),h=u[0],d=u[1];e.moveTo(h,d);for(var p=0;t>p;p++){l=p==t-1?o:l+r;var f=c();e.lineTo(f[0],f[1])}e.fill(),e.stroke()},Dygraph.shapeFunction_=function(e,t,i){return function(n,a,s,r,o,l,c){s.strokeStyle=l,s.fillStyle="white",Dygraph.regularShape_(s,e,c,r,o,t,i)}},Dygraph.DrawPolygon_=function(e,t,i,n,a,s,r,o){new Dygraph.RegularShape_(e,t,o).draw(i,n,a,r)},Dygraph.Circles={DEFAULT:function(e,t,i,n,a,s,r){i.beginPath(),i.fillStyle=s,i.arc(n,a,r,0,2*Math.PI,!1),i.fill()},TRIANGLE:Dygraph.shapeFunction_(3),SQUARE:Dygraph.shapeFunction_(4,Math.PI/4),DIAMOND:Dygraph.shapeFunction_(4),PENTAGON:Dygraph.shapeFunction_(5),HEXAGON:Dygraph.shapeFunction_(6),CIRCLE:function(e,t,i,n,a,s,r){i.beginPath(),i.strokeStyle=s,i.fillStyle="white",i.arc(n,a,r,0,2*Math.PI,!1),i.fill(),i.stroke()},STAR:Dygraph.shapeFunction_(5,0,4*Math.PI/5),PLUS:function(e,t,i,n,a,s,r){i.strokeStyle=s,i.beginPath(),i.moveTo(n+r,a),i.lineTo(n-r,a),i.closePath(),i.stroke(),i.beginPath(),i.moveTo(n,a+r),i.lineTo(n,a-r),i.closePath(),i.stroke()},EX:function(e,t,i,n,a,s,r){i.strokeStyle=s,i.beginPath(),i.moveTo(n+r,a+r),i.lineTo(n-r,a-r),i.closePath(),i.stroke(),i.beginPath(),i.moveTo(n+r,a-r),i.lineTo(n-r,a+r),i.closePath(),i.stroke()}},Dygraph.IFrameTarp=function(){this.tarps=[]},Dygraph.IFrameTarp.prototype.cover=function(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++){var i=e[t],n=Dygraph.findPosX(i),a=Dygraph.findPosY(i),s=i.offsetWidth,r=i.offsetHeight,o=document.createElement("div");o.style.position="absolute",o.style.left=n+"px",o.style.top=a+"px",o.style.width=s+"px",o.style.height=r+"px",o.style.zIndex=999,document.body.appendChild(o),this.tarps.push(o)}},Dygraph.IFrameTarp.prototype.uncover=function(){for(var e=0;e<this.tarps.length;e++)this.tarps[e].parentNode.removeChild(this.tarps[e]);this.tarps=[]},Dygraph.detectLineDelimiter=function(e){for(var t=0;t<e.length;t++){var i=e[t];if("\r"==i)return i;if("\n"==i)return t<e.length&&"\r"==e[t+1]?"\n\r":i}return null},Dygraph.GVizChart=function(e){this.container=e},Dygraph.GVizChart.prototype.draw=function(e,t){this.container.innerHTML="","undefined"!=typeof this.date_graph&&this.date_graph.destroy(),this.date_graph=new Dygraph(this.container,e,t)},Dygraph.GVizChart.prototype.setSelection=function(e){var t=!1;e.length&&(t=e[0].row),this.date_graph.setSelection(t)},Dygraph.GVizChart.prototype.getSelection=function(){var e=[],t=this.date_graph.getSelection();if(0>t)return e;for(var i=this.date_graph.layout_.datasets,n=0;n<i.length;++n)e.push({row:t,column:n+1});return e},Dygraph.Interaction={},Dygraph.Interaction.startPan=function(e,t,i){var n,a;i.isPanning=!0;var s=t.xAxisRange();if(i.dateRange=s[1]-s[0],i.initialLeftmostDate=s[0],i.xUnitsPerPixel=i.dateRange/(t.plotter_.area.w-1),t.attr_("panEdgeFraction")){var r=t.width_*t.attr_("panEdgeFraction"),o=t.xAxisExtremes(),l=t.toDomXCoord(o[0])-r,c=t.toDomXCoord(o[1])+r,u=t.toDataXCoord(l),h=t.toDataXCoord(c);i.boundedDates=[u,h];var d=[],p=t.height_*t.attr_("panEdgeFraction");for(n=0;n<t.axes_.length;n++){a=t.axes_[n];var f=a.extremeRange,m=t.toDomYCoord(f[0],n)+p,g=t.toDomYCoord(f[1],n)-p,v=t.toDataYCoord(m),b=t.toDataYCoord(g);d[n]=[v,b]}i.boundedValues=d}for(i.is2DPan=!1,i.axes=[],n=0;n<t.axes_.length;n++){a=t.axes_[n];var _={},y=t.yAxisRange(n);a.logscale?(_.initialTopValue=Dygraph.log10(y[1]),_.dragValueRange=Dygraph.log10(y[1])-Dygraph.log10(y[0])):(_.initialTopValue=y[1],_.dragValueRange=y[1]-y[0]),_.unitsPerPixel=_.dragValueRange/(t.plotter_.area.h-1),i.axes.push(_),(a.valueWindow||a.valueRange)&&(i.is2DPan=!0)}},Dygraph.Interaction.movePan=function(e,t,i){i.dragEndX=t.dragGetX_(e,i),i.dragEndY=t.dragGetY_(e,i);var n=i.initialLeftmostDate-(i.dragEndX-i.dragStartX)*i.xUnitsPerPixel;i.boundedDates&&(n=Math.max(n,i.boundedDates[0]));var a=n+i.dateRange;if(i.boundedDates&&a>i.boundedDates[1]&&(n-=a-i.boundedDates[1],a=n+i.dateRange),t.dateWindow_=[n,a],i.is2DPan)for(var s=0;s<t.axes_.length;s++){var r=t.axes_[s],o=i.axes[s],l=i.dragEndY-i.dragStartY,c=l*o.unitsPerPixel,u=i.boundedValues?i.boundedValues[s]:null,h=o.initialTopValue+c;u&&(h=Math.min(h,u[1]));var d=h-o.dragValueRange;u&&d<u[0]&&(h-=d-u[0],d=h-o.dragValueRange),r.valueWindow=r.logscale?[Math.pow(Dygraph.LOG_SCALE,d),Math.pow(Dygraph.LOG_SCALE,h)]:[d,h]}t.drawGraph_(!1)},Dygraph.Interaction.endPan=function(e,t,i){i.dragEndX=t.dragGetX_(e,i),i.dragEndY=t.dragGetY_(e,i);var n=Math.abs(i.dragEndX-i.dragStartX),a=Math.abs(i.dragEndY-i.dragStartY);2>n&&2>a&&void 0!==t.lastx_&&-1!=t.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(t,e,i),i.isPanning=!1,i.is2DPan=!1,i.initialLeftmostDate=null,i.dateRange=null,i.valueRange=null,i.boundedDates=null,i.boundedValues=null,i.axes=null},Dygraph.Interaction.startZoom=function(e,t,i){i.isZooming=!0,i.zoomMoved=!1},Dygraph.Interaction.moveZoom=function(e,t,i){i.zoomMoved=!0,i.dragEndX=t.dragGetX_(e,i),i.dragEndY=t.dragGetY_(e,i);var n=Math.abs(i.dragStartX-i.dragEndX),a=Math.abs(i.dragStartY-i.dragEndY);i.dragDirection=a/2>n?Dygraph.VERTICAL:Dygraph.HORIZONTAL,t.drawZoomRect_(i.dragDirection,i.dragStartX,i.dragEndX,i.dragStartY,i.dragEndY,i.prevDragDirection,i.prevEndX,i.prevEndY),i.prevEndX=i.dragEndX,i.prevEndY=i.dragEndY,i.prevDragDirection=i.dragDirection},Dygraph.Interaction.treatMouseOpAsClick=function(e,t,i){var n=e.attr_("clickCallback"),a=e.attr_("pointClickCallback"),s=null;if(a){for(var r=-1,o=Number.MAX_VALUE,l=0;l<e.selPoints_.length;l++){var c=e.selPoints_[l],u=Math.pow(c.canvasx-i.dragEndX,2)+Math.pow(c.canvasy-i.dragEndY,2);!isNaN(u)&&(-1==r||o>u)&&(o=u,r=l)}var h=e.attr_("highlightCircleSize")+2;h*h>=o&&(s=e.selPoints_[r])}s&&a(t,s),n&&n(t,e.lastx_,e.selPoints_)},Dygraph.Interaction.endZoom=function(e,t,i){i.isZooming=!1,i.dragEndX=t.dragGetX_(e,i),i.dragEndY=t.dragGetY_(e,i);var n=Math.abs(i.dragEndX-i.dragStartX),a=Math.abs(i.dragEndY-i.dragStartY);2>n&&2>a&&void 0!==t.lastx_&&-1!=t.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(t,e,i),n>=10&&i.dragDirection==Dygraph.HORIZONTAL?(t.doZoomX_(Math.min(i.dragStartX,i.dragEndX),Math.max(i.dragStartX,i.dragEndX)),i.cancelNextDblclick=!0):a>=10&&i.dragDirection==Dygraph.VERTICAL?(t.doZoomY_(Math.min(i.dragStartY,i.dragEndY),Math.max(i.dragStartY,i.dragEndY)),i.cancelNextDblclick=!0):i.zoomMoved&&t.clearZoomRect_(),i.dragStartX=null,i.dragStartY=null},Dygraph.Interaction.startTouch=function(e,t,i){e.preventDefault();for(var n=[],a=0;a<e.touches.length;a++){var s=e.touches[a];n.push({pageX:s.pageX,pageY:s.pageY,dataX:t.toDataXCoord(s.pageX),dataY:t.toDataYCoord(s.pageY)})}if(i.initialTouches=n,1==n.length)i.initialPinchCenter=n[0],i.touchDirections={x:!0,y:!0};else if(2==n.length){i.initialPinchCenter={pageX:.5*(n[0].pageX+n[1].pageX),pageY:.5*(n[0].pageY+n[1].pageY),dataX:.5*(n[0].dataX+n[1].dataX),dataY:.5*(n[0].dataY+n[1].dataY)};var r=180/Math.PI*Math.atan2(i.initialPinchCenter.pageY-n[0].pageY,n[0].pageX-i.initialPinchCenter.pageX);r=Math.abs(r),r>90&&(r=90-r),i.touchDirections={x:67.5>r,y:r>22.5}}i.initialRange={x:t.xAxisRange(),y:t.yAxisRange()}},Dygraph.Interaction.moveTouch=function(e,t,i){var n,a=[];for(n=0;n<e.touches.length;n++){var s=e.touches[n];a.push({pageX:s.pageX,pageY:s.pageY})}var r,o=i.initialTouches,l=i.initialPinchCenter;r=1==a.length?a[0]:{pageX:.5*(a[0].pageX+a[1].pageX),pageY:.5*(a[0].pageY+a[1].pageY)};var c={pageX:r.pageX-l.pageX,pageY:r.pageY-l.pageY},u=i.initialRange.x[1]-i.initialRange.x[0],h=i.initialRange.y[0]-i.initialRange.y[1];c.dataX=c.pageX/t.plotter_.area.w*u,c.dataY=c.pageY/t.plotter_.area.h*h;var d,p;if(1==a.length)d=1,p=1;else if(2==a.length){var f=o[1].pageX-l.pageX;d=(a[1].pageX-r.pageX)/f;var m=o[1].pageY-l.pageY;p=(a[1].pageY-r.pageY)/m}if(d=Math.min(8,Math.max(.125,d)),p=Math.min(8,Math.max(.125,p)),i.touchDirections.x&&(t.dateWindow_=[l.dataX-c.dataX+(i.initialRange.x[0]-l.dataX)/d,l.dataX-c.dataX+(i.initialRange.x[1]-l.dataX)/d]),i.touchDirections.y)for(n=0;1>n;n++){var g=t.axes_[n];g.logscale||(g.valueWindow=[l.dataY-c.dataY+(i.initialRange.y[0]-l.dataY)/p,l.dataY-c.dataY+(i.initialRange.y[1]-l.dataY)/p])}t.drawGraph_(!1)},Dygraph.Interaction.endTouch=function(e,t,i){0!==e.touches.length&&Dygraph.Interaction.startTouch(e,t,i)},Dygraph.Interaction.defaultModel={mousedown:function(e,t,i){e.button&&2==e.button||(i.initializeMouseDown(e,t,i),e.altKey||e.shiftKey?Dygraph.startPan(e,t,i):Dygraph.startZoom(e,t,i))},mousemove:function(e,t,i){i.isZooming?Dygraph.moveZoom(e,t,i):i.isPanning&&Dygraph.movePan(e,t,i)},mouseup:function(e,t,i){i.isZooming?Dygraph.endZoom(e,t,i):i.isPanning&&Dygraph.endPan(e,t,i)},touchstart:function(e,t,i){Dygraph.Interaction.startTouch(e,t,i)},touchmove:function(e,t,i){Dygraph.Interaction.moveTouch(e,t,i)},touchend:function(e,t,i){Dygraph.Interaction.endTouch(e,t,i)},mouseout:function(e,t,i){i.isZooming&&(i.dragEndX=null,i.dragEndY=null)},dblclick:function(e,t,i){return i.cancelNextDblclick?void(i.cancelNextDblclick=!1):void(e.altKey||e.shiftKey||t.doUnzoom_())}},Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel,Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel,Dygraph.endZoom=Dygraph.Interaction.endZoom,Dygraph.moveZoom=Dygraph.Interaction.moveZoom,Dygraph.startZoom=Dygraph.Interaction.startZoom,Dygraph.endPan=Dygraph.Interaction.endPan,Dygraph.movePan=Dygraph.Interaction.movePan,Dygraph.startPan=Dygraph.Interaction.startPan,Dygraph.Interaction.nonInteractiveModel_={mousedown:function(e,t,i){i.initializeMouseDown(e,t,i)},mouseup:function(e,t,i){i.dragEndX=t.dragGetX_(e,i),i.dragEndY=t.dragGetY_(e,i);var n=Math.abs(i.dragEndX-i.dragStartX),a=Math.abs(i.dragEndY-i.dragStartY);2>n&&2>a&&void 0!==t.lastx_&&-1!=t.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(t,e,i)}},Dygraph.Interaction.dragIsPanInteractionModel={mousedown:function(e,t,i){i.initializeMouseDown(e,t,i),Dygraph.startPan(e,t,i)},mousemove:function(e,t,i){i.isPanning&&Dygraph.movePan(e,t,i)},mouseup:function(e,t,i){i.isPanning&&Dygraph.endPan(e,t,i)}};var DygraphRangeSelector=function(e){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera,this.isUsingExcanvas_=e.isUsingExcanvas_,this.dygraph_=e,this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.createCanvases_(),this.isUsingExcanvas_&&this.createIEPanOverlay_(),this.createZoomHandles_(),this.initInteraction_()};DygraphRangeSelector.prototype.addToGraph=function(e,t){this.layout_=t,this.resize_(),e.appendChild(this.bgcanvas_),e.appendChild(this.fgcanvas_),e.appendChild(this.leftZoomHandle_),e.appendChild(this.rightZoomHandle_)},DygraphRangeSelector.prototype.renderStaticLayer=function(){this.resize_(),this.drawStaticLayer_()},DygraphRangeSelector.prototype.renderInteractiveLayer=function(){this.isChangingRange_||(this.placeZoomHandles_(),this.drawInteractiveLayer_())},DygraphRangeSelector.prototype.resize_=function(){function e(e,t){e.style.top=t.y+"px",e.style.left=t.x+"px",e.width=t.w,e.height=t.h,e.style.width=e.width+"px",e.style.height=e.height+"px"}var t=this.layout_.getPlotArea(),i=this.attr_("xAxisHeight")||this.attr_("axisLabelFontSize")+2*this.attr_("axisTickSize");this.canvasRect_={x:t.x,y:t.y+t.h+i+4,w:t.w,h:this.attr_("rangeSelectorHeight")},e(this.bgcanvas_,this.canvasRect_),e(this.fgcanvas_,this.canvasRect_)},DygraphRangeSelector.prototype.attr_=function(e){return this.dygraph_.attr_(e)},DygraphRangeSelector.prototype.createCanvases_=function(){this.bgcanvas_=Dygraph.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=Dygraph.getContext(this.bgcanvas_),this.fgcanvas_=Dygraph.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=Dygraph.getContext(this.fgcanvas_)},DygraphRangeSelector.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement("div"),this.iePanOverlay_.style.position="absolute",this.iePanOverlay_.style.backgroundColor="white",this.iePanOverlay_.style.filter="alpha(opacity=0)",this.iePanOverlay_.style.display="none",this.iePanOverlay_.style.cursor="move",this.fgcanvas_.appendChild(this.iePanOverlay_)},DygraphRangeSelector.prototype.createZoomHandles_=function(){var e=new Image;e.className="dygraph-rangesel-zoomhandle",e.style.position="absolute",e.style.zIndex=10,e.style.visibility="hidden",e.style.cursor="col-resize",/MSIE 7/.test(navigator.userAgent)?(e.width=7,e.height=14,e.style.backgroundColor="white",e.style.border="1px solid #333333"):(e.width=9,e.height=16,e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="),this.isMobileDevice_&&(e.width*=2,e.height*=2),this.leftZoomHandle_=e,this.rightZoomHandle_=e.cloneNode(!1)},DygraphRangeSelector.prototype.initInteraction_=function(){var e,t,i,n,a,s,r,o,l,c,u,h,d,p,f,m=this,g=this.isIE_?document:window,v=0,b=null,_=!1,y=!1,w=!this.isMobileDevice_&&!this.isUsingExcanvas_,k=new Dygraph.IFrameTarp;e=function(e){var t=m.dygraph_.xAxisExtremes(),i=(t[1]-t[0])/m.canvasRect_.w,n=t[0]+(e.leftHandlePos-m.canvasRect_.x)*i,a=t[0]+(e.rightHandlePos-m.canvasRect_.x)*i;return[n,a]},h=function(e){var t=window.outerWidth/document.documentElement.clientWidth;return isNaN(t)?e:e/t},t=function(e){return Dygraph.cancelEvent(e),_=!0,v=e.screenX,b=e.target?e.target:e.srcElement,m.dygraph_.addEvent(g,"mousemove",i),m.dygraph_.addEvent(g,"mouseup",n),m.fgcanvas_.style.cursor="col-resize",k.cover(),!0},i=function(e){if(!_)return!1;Dygraph.cancelEvent(e);var t=e.screenX-v;if(Math.abs(t)<4||0===e.screenX)return!0;v=e.screenX,t=h(t);var i,n=m.getZoomHandleStatus_();b==m.leftZoomHandle_?(i=n.leftHandlePos+t,i=Math.min(i,n.rightHandlePos-b.width-3),i=Math.max(i,m.canvasRect_.x)):(i=n.rightHandlePos+t,i=Math.min(i,m.canvasRect_.x+m.canvasRect_.w),i=Math.max(i,n.leftHandlePos+b.width+3));var s=b.width/2;return b.style.left=i-s+"px",m.drawInteractiveLayer_(),w&&a(),!0},n=function(){return _?(_=!1,k.uncover(),Dygraph.removeEvent(g,"mousemove",i),Dygraph.removeEvent(g,"mouseup",n),m.fgcanvas_.style.cursor="default",w||a(),!0):!1},a=function(){try{var t=m.getZoomHandleStatus_();if(m.isChangingRange_=!0,t.isZoomed){var i=e(t);m.dygraph_.doZoomXDates_(i[0],i[1])}else m.dygraph_.doUnzoom_()}finally{m.isChangingRange_=!1}},s=function(e){if(m.isUsingExcanvas_)return e.srcElement==m.iePanOverlay_;var t=m.leftZoomHandle_.getBoundingClientRect(),i=t.left+t.width/2;t=m.rightZoomHandle_.getBoundingClientRect();var n=t.left+t.width/2;return e.clientX>i&&e.clientX<n},r=function(e){return!y&&s(e)&&m.getZoomHandleStatus_().isZoomed?(Dygraph.cancelEvent(e),y=!0,v=e.screenX,m.dygraph_.addEvent(g,"mousemove",o),m.dygraph_.addEvent(g,"mouseup",l),!0):!1},o=function(e){if(!y)return!1;Dygraph.cancelEvent(e);var t=e.screenX-v;if(Math.abs(t)<4)return!0;v=e.screenX,t=h(t);var i=m.getZoomHandleStatus_(),n=i.leftHandlePos,a=i.rightHandlePos,s=a-n;n+t<=m.canvasRect_.x?(n=m.canvasRect_.x,a=n+s):a+t>=m.canvasRect_.x+m.canvasRect_.w?(a=m.canvasRect_.x+m.canvasRect_.w,n=a-s):(n+=t,a+=t);var r=m.leftZoomHandle_.width/2;return m.leftZoomHandle_.style.left=n-r+"px",m.rightZoomHandle_.style.left=a-r+"px",m.drawInteractiveLayer_(),w&&c(),!0},l=function(){return y?(y=!1,Dygraph.removeEvent(g,"mousemove",o),Dygraph.removeEvent(g,"mouseup",l),w||c(),!0):!1},c=function(){try{m.isChangingRange_=!0,m.dygraph_.dateWindow_=e(m.getZoomHandleStatus_()),m.dygraph_.drawGraph_(!1)}finally{m.isChangingRange_=!1}},u=function(e){if(!_&&!y){var t=s(e)?"move":"default";t!=m.fgcanvas_.style.cursor&&(m.fgcanvas_.style.cursor=t)}},d=function(e){"touchstart"==e.type&&1==e.targetTouches.length?t(e.targetTouches[0])&&Dygraph.cancelEvent(e):"touchmove"==e.type&&1==e.targetTouches.length?i(e.targetTouches[0])&&Dygraph.cancelEvent(e):n(e)},p=function(e){"touchstart"==e.type&&1==e.targetTouches.length?r(e.targetTouches[0])&&Dygraph.cancelEvent(e):"touchmove"==e.type&&1==e.targetTouches.length?o(e.targetTouches[0])&&Dygraph.cancelEvent(e):l(e)},f=function(e,t){for(var i=["touchstart","touchend","touchmove","touchcancel"],n=0;n<i.length;n++)m.dygraph_.addEvent(e,i[n],t)},this.dygraph_.attrs_.interactionModel=Dygraph.Interaction.dragIsPanInteractionModel,this.dygraph_.attrs_.panEdgeFraction=1e-4;var x=window.opera?"mousedown":"dragstart";this.dygraph_.addEvent(this.leftZoomHandle_,x,t),this.dygraph_.addEvent(this.rightZoomHandle_,x,t),this.isUsingExcanvas_?this.dygraph_.addEvent(this.iePanOverlay_,"mousedown",r):(this.dygraph_.addEvent(this.fgcanvas_,"mousedown",r),this.dygraph_.addEvent(this.fgcanvas_,"mousemove",u)),this.hasTouchInterface_&&(f(this.leftZoomHandle_,d),f(this.rightZoomHandle_,d),f(this.fgcanvas_,p))},DygraphRangeSelector.prototype.drawStaticLayer_=function(){var e=this.bgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(t){Dygraph.warn(t)}var i=.5;this.bgcanvas_ctx_.lineWidth=1,e.strokeStyle="gray",e.beginPath(),e.moveTo(i,i),e.lineTo(i,this.canvasRect_.h-i),e.lineTo(this.canvasRect_.w-i,this.canvasRect_.h-i),e.lineTo(this.canvasRect_.w-i,i),e.stroke()},DygraphRangeSelector.prototype.drawMiniPlot_=function(){var e=this.attr_("rangeSelectorPlotFillColor"),t=this.attr_("rangeSelectorPlotStrokeColor");if(e||t){var i=this.computeCombinedSeriesAndLimits_(),n=i.yMax-i.yMin,a=this.bgcanvas_ctx_,s=.5,r=this.dygraph_.xAxisExtremes(),o=Math.max(r[1]-r[0],1e-30),l=(this.canvasRect_.w-s)/o,c=(this.canvasRect_.h-s)/n,u=this.canvasRect_.w-s,h=this.canvasRect_.h-s;a.beginPath(),a.moveTo(s,h);for(var d=0;d<i.data.length;d++){var p=i.data[d],f=(p[0]-r[0])*l,m=h-(p[1]-i.yMin)*c;isFinite(f)&&isFinite(m)&&a.lineTo(f,m)}if(a.lineTo(u,h),a.closePath(),e){var g=this.bgcanvas_ctx_.createLinearGradient(0,0,0,h);g.addColorStop(0,"white"),g.addColorStop(1,e),this.bgcanvas_ctx_.fillStyle=g,a.fill()}t&&(this.bgcanvas_ctx_.strokeStyle=t,this.bgcanvas_ctx_.lineWidth=1.5,a.stroke())}},DygraphRangeSelector.prototype.computeCombinedSeriesAndLimits_=function(){var e,t,i,n,a,s,r,o,l=this.dygraph_.rawData_,c=this.attr_("logscale"),u=[];for(n=0;n<l.length;n++)if(l[n].length>1&&null!==l[n][1]){if(i="number"!=typeof l[n][1])for(e=[],t=[],s=0;s<l[n][1].length;s++)e.push(0),t.push(0);break}for(n=0;n<l.length;n++){var h=l[n];if(r=h[0],i)for(s=0;s<e.length;s++)e[s]=t[s]=0;else e=t=0;for(a=1;a<h.length;a++)if(this.dygraph_.visibility()[a-1]){var d;if(i)for(s=0;s<e.length;s++)d=h[a][s],null===d||isNaN(d)||(e[s]+=d,t[s]++);else{if(d=h[a],null===d||isNaN(d))continue;e+=d,t++}}if(i){for(s=0;s<e.length;s++)e[s]/=t[s];o=e.slice(0)}else o=e/t;u.push([r,o])}if(u=this.dygraph_.rollingAverage(u,this.dygraph_.rollPeriod_),"number"!=typeof u[0][1])for(n=0;n<u.length;n++)o=u[n][1],u[n][1]=o[0];var p=Number.MAX_VALUE,f=-Number.MAX_VALUE;for(n=0;n<u.length;n++)o=u[n][1],null!==o&&isFinite(o)&&(!c||o>0)&&(p=Math.min(p,o),f=Math.max(f,o));var m=.25;if(c)for(f=Dygraph.log10(f),f+=f*m,p=Dygraph.log10(p),n=0;n<u.length;n++)u[n][1]=Dygraph.log10(u[n][1]);else{var g,v=f-p;g=v<=Number.MIN_VALUE?f*m:v*m,f+=g,p-=g}return{data:u,yMin:p,yMax:f}},DygraphRangeSelector.prototype.placeZoomHandles_=function(){var e=this.dygraph_.xAxisExtremes(),t=this.dygraph_.xAxisRange(),i=e[1]-e[0],n=Math.max(0,(t[0]-e[0])/i),a=Math.max(0,(e[1]-t[1])/i),s=this.canvasRect_.x+this.canvasRect_.w*n,r=this.canvasRect_.x+this.canvasRect_.w*(1-a),o=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),l=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=s-l+"px",this.leftZoomHandle_.style.top=o+"px",this.rightZoomHandle_.style.left=r-l+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},DygraphRangeSelector.prototype.drawInteractiveLayer_=function(){var e=this.fgcanvas_ctx_;e.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var t=1,i=this.canvasRect_.w-t,n=this.canvasRect_.h-t,a=this.getZoomHandleStatus_();if(e.strokeStyle="black",a.isZoomed){var s=Math.max(t,a.leftHandlePos-this.canvasRect_.x),r=Math.min(i,a.rightHandlePos-this.canvasRect_.x);e.fillStyle="rgba(240, 240, 240, 0.6)",e.fillRect(0,0,s,this.canvasRect_.h),e.fillRect(r,0,this.canvasRect_.w-r,this.canvasRect_.h),e.beginPath(),e.moveTo(t,t),e.lineTo(s,t),e.lineTo(s,n),e.lineTo(r,n),e.lineTo(r,t),e.lineTo(i,t),e.stroke(),this.isUsingExcanvas_&&(this.iePanOverlay_.style.width=r-s+"px",this.iePanOverlay_.style.left=s+"px",this.iePanOverlay_.style.height=n+"px",this.iePanOverlay_.style.display="inline")}else e.beginPath(),e.moveTo(t,t),e.lineTo(t,n),e.lineTo(i,n),e.lineTo(i,t),e.stroke(),this.iePanOverlay_&&(this.iePanOverlay_.style.display="none")},DygraphRangeSelector.prototype.getZoomHandleStatus_=function(){var e=this.leftZoomHandle_.width/2,t=parseInt(this.leftZoomHandle_.style.left,10)+e,i=parseInt(this.rightZoomHandle_.style.left,10)+e;return{leftHandlePos:t,rightHandlePos:i,isZoomed:t-1>this.canvasRect_.x||i+1<this.canvasRect_.x+this.canvasRect_.w}},Dygraph.numericLinearTicks=function(e,t,i,n,a,s){var r=function(e){return"logscale"===e?!1:n(e)};return Dygraph.numericTicks(e,t,i,r,a,s)},Dygraph.numericTicks=function(e,t,i,n,a,s){var r,o,l,c,u=function(e,t){return 0>t?1/Math.pow(e,-t):Math.pow(e,t)},h=n("pixelsPerLabel"),d=[];if(s)for(r=0;r<s.length;r++)d.push({v:s[r]});else{if(n("logscale")){c=Math.floor(i/h);var p=Dygraph.binarySearch(e,Dygraph.PREFERRED_LOG_TICK_VALUES,1),f=Dygraph.binarySearch(t,Dygraph.PREFERRED_LOG_TICK_VALUES,-1);-1==p&&(p=0),-1==f&&(f=Dygraph.PREFERRED_LOG_TICK_VALUES.length-1);var m=null;if(f-p>=c/4){for(var g=f;g>=p;g--){var v=Dygraph.PREFERRED_LOG_TICK_VALUES[g],b=Math.log(v/e)/Math.log(t/e)*i,_={v:v};null===m?m={tickValue:v,pixel_coord:b}:Math.abs(b-m.pixel_coord)>=h?m={tickValue:v,pixel_coord:b}:_.label="",d.push(_)}d.reverse()}}if(0===d.length){var y,w=n("labelsKMG2");y=w?[1,2,4,8]:[1,2,5];var k,x,C;for(r=-10;50>r;r++){var S;S=w?u(16,r):u(10,r);var D=0;for(o=0;o<y.length&&(k=S*y[o],x=Math.floor(e/k)*k,C=Math.ceil(t/k)*k,c=Math.abs(C-x)/k,D=i/c,!(D>h));o++);if(D>h)break}for(x>C&&(k*=-1),r=0;c>r;r++)l=x+r*k,d.push({v:l})}}var T,M=[],A=[];n("labelsKMB")&&(T=1e3,M=["K","M","B","T","Q"]),n("labelsKMG2")&&(T&&Dygraph.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),T=1024,M=["k","M","G","T","P","E","Z","Y"],A=["m","u","n","p","f","a","z","y"]);var P=n("axisLabelFormatter");for(r=0;r<d.length;r++)if(void 0===d[r].label){l=d[r].v;var E=Math.abs(l),N=P(l,0,n,a);if(M.length>0){var I=u(T,M.length);for(o=M.length-1;o>=0;o--,I/=T)if(E>=I){N=Dygraph.round_(l/I,n("digitsAfterDecimal"))+M[o];break}}n("labelsKMG2")&&(l=String(l.toExponential()),2===l.split("e-").length&&l.split("e-")[1]>=3&&l.split("e-")[1]<=24&&(N=l.split("e-")[1]%3>0?Dygraph.round_(l.split("e-")[0]/u(10,l.split("e-")[1]%3),n("digitsAfterDecimal")):Number(l.split("e-")[0]).toFixed(2),N+=A[Math.floor(l.split("e-")[1]/3)-1])),d[r].label=N}return d},Dygraph.dateTicker=function(e,t,i,n,a){var s=Dygraph.pickDateTickGranularity(e,t,i,n);return s>=0?Dygraph.getDateAxis(e,t,s,n,a):[]},Dygraph.SECONDLY=0,Dygraph.TWO_SECONDLY=1,Dygraph.FIVE_SECONDLY=2,Dygraph.TEN_SECONDLY=3,Dygraph.THIRTY_SECONDLY=4,Dygraph.MINUTELY=5,Dygraph.TWO_MINUTELY=6,Dygraph.FIVE_MINUTELY=7,Dygraph.TEN_MINUTELY=8,Dygraph.THIRTY_MINUTELY=9,Dygraph.HOURLY=10,Dygraph.TWO_HOURLY=11,Dygraph.SIX_HOURLY=12,Dygraph.DAILY=13,Dygraph.WEEKLY=14,Dygraph.MONTHLY=15,Dygraph.QUARTERLY=16,Dygraph.BIANNUAL=17,Dygraph.ANNUAL=18,Dygraph.DECADAL=19,Dygraph.CENTENNIAL=20,Dygraph.NUM_GRANULARITIES=21,Dygraph.SHORT_SPACINGS=[],Dygraph.SHORT_SPACINGS[Dygraph.SECONDLY]=1e3,Dygraph.SHORT_SPACINGS[Dygraph.TWO_SECONDLY]=2e3,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_SECONDLY]=5e3,Dygraph.SHORT_SPACINGS[Dygraph.TEN_SECONDLY]=1e4,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_SECONDLY]=3e4,Dygraph.SHORT_SPACINGS[Dygraph.MINUTELY]=6e4,Dygraph.SHORT_SPACINGS[Dygraph.TWO_MINUTELY]=12e4,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_MINUTELY]=3e5,Dygraph.SHORT_SPACINGS[Dygraph.TEN_MINUTELY]=6e5,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_MINUTELY]=18e5,Dygraph.SHORT_SPACINGS[Dygraph.HOURLY]=36e5,Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY]=72e5,Dygraph.SHORT_SPACINGS[Dygraph.SIX_HOURLY]=216e5,Dygraph.SHORT_SPACINGS[Dygraph.DAILY]=864e5,Dygraph.SHORT_SPACINGS[Dygraph.WEEKLY]=6048e5,Dygraph.PREFERRED_LOG_TICK_VALUES=function(){for(var e=[],t=-39;39>=t;t++)for(var i=Math.pow(10,t),n=1;9>=n;n++){var a=i*n;e.push(a)}return e}(),Dygraph.pickDateTickGranularity=function(e,t,i,n){for(var a=n("pixelsPerLabel"),s=0;s<Dygraph.NUM_GRANULARITIES;s++){var r=Dygraph.numDateTicks(e,t,s);if(i/r>=a)return s}return-1},Dygraph.numDateTicks=function(e,t,i){if(i<Dygraph.MONTHLY){var n=Dygraph.SHORT_SPACINGS[i];return Math.floor(.5+1*(t-e)/n)}var a=1,s=12;i==Dygraph.QUARTERLY&&(s=3),i==Dygraph.BIANNUAL&&(s=2),i==Dygraph.ANNUAL&&(s=1),i==Dygraph.DECADAL&&(s=1,a=10),i==Dygraph.CENTENNIAL&&(s=1,a=100);var r=31557807360,o=1*(t-e)/r;return Math.floor(.5+1*o*s/a)},Dygraph.getDateAxis=function(e,t,i,n,a){var s,r=n("axisLabelFormatter"),o=[];if(i<Dygraph.MONTHLY){var l=Dygraph.SHORT_SPACINGS[i],c=l/1e3,u=new Date(e);u.setMilliseconds(0);var h;for(60>=c?(h=u.getSeconds(),u.setSeconds(h-h%c)):(u.setSeconds(0),c/=60,60>=c?(h=u.getMinutes(),u.setMinutes(h-h%c)):(u.setMinutes(0),c/=60,24>=c?(h=u.getHours(),u.setHours(h-h%c)):(u.setHours(0),c/=24,7==c&&u.setDate(u.getDate()-u.getDay())))),e=u.getTime(),s=e;t>=s;s+=l)o.push({v:s,label:r(new Date(s),i,n,a)})}else{var d,p=1;i==Dygraph.MONTHLY?d=[0,1,2,3,4,5,6,7,8,9,10,11]:i==Dygraph.QUARTERLY?d=[0,3,6,9]:i==Dygraph.BIANNUAL?d=[0,6]:i==Dygraph.ANNUAL?d=[0]:i==Dygraph.DECADAL?(d=[0],p=10):i==Dygraph.CENTENNIAL?(d=[0],p=100):Dygraph.warn("Span of dates is too long");for(var f=new Date(e).getFullYear(),m=new Date(t).getFullYear(),g=Dygraph.zeropad,v=f;m>=v;v++)if(v%p===0)for(var b=0;b<d.length;b++){var _=v+"/"+g(1+d[b])+"/01";s=Dygraph.dateStrToMillis(_),e>s||s>t||o.push({v:s,label:r(new Date(s),i,n,a)})}}return o},Dygraph.DEFAULT_ATTRS.axes.x.ticker=Dygraph.dateTicker,Dygraph.DEFAULT_ATTRS.axes.y.ticker=Dygraph.numericTicks,Dygraph.DEFAULT_ATTRS.axes.y2.ticker=Dygraph.numericTicks,Date.ext={},Date.ext.util={},Date.ext.util.xPad=function(e,t,i){for("undefined"==typeof i&&(i=10);parseInt(e,10)<i&&i>1;i/=10)e=t.toString()+e;return e.toString()},Date.prototype.locale="en-GB",document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang),Date.ext.locales={},Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},Date.ext.locales["en-US"]=Date.ext.locales.en,Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z",Date.ext.locales["en-US"].x="%D",Date.ext.locales["en-US"].X="%r",Date.ext.locales["en-GB"]=Date.ext.locales.en,Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"],Date.ext.formats={a:function(e){return Date.ext.locales[e.locale].a[e.getDay()]},A:function(e){return Date.ext.locales[e.locale].A[e.getDay()]},b:function(e){return Date.ext.locales[e.locale].b[e.getMonth()]},B:function(e){return Date.ext.locales[e.locale].B[e.getMonth()]},c:"toLocaleString",C:function(e){return Date.ext.util.xPad(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return Date.ext.util.xPad(parseInt(Date.ext.util.G(e)/100,10),0)},G:function(e){var t=e.getFullYear(),i=parseInt(Date.ext.formats.V(e),10),n=parseInt(Date.ext.formats.W(e),10);return n>i?t++:0===n&&i>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return Date.ext.util.xPad(0===t?12:t,0)},j:function(e){var t=e-new Date(""+e.getFullYear()+"/1/1 GMT");t+=6e4*e.getTimezoneOffset();var i=parseInt(t/6e4/60/24,10)+1;return Date.ext.util.xPad(i,0,100)},m:function(e){return Date.ext.util.xPad(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e){return Date.ext.locales[e.locale].p[e.getHours()>=12?1:0]},P:function(e){return Date.ext.locales[e.locale].P[e.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){var t=parseInt(Date.ext.formats.j(e),10),i=6-e.getDay(),n=parseInt((t+i)/7,10);return Date.ext.util.xPad(n,0)},V:function(e){var t=parseInt(Date.ext.formats.W(e),10),i=new Date(""+e.getFullYear()+"/1/1").getDay(),n=t+(i>4||1>=i?0:1);return 53==n&&new Date(""+e.getFullYear()+"/12/31").getDay()<4?n=1:0===n&&(n=Date.ext.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),Date.ext.util.xPad(n,0)},w:"getDay",W:function(e){var t=parseInt(Date.ext.formats.j(e),10),i=7-Date.ext.formats.u(e),n=parseInt((t+i)/7,10);return Date.ext.util.xPad(n,0,10)},y:function(e){return Date.ext.util.xPad(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),i=Date.ext.util.xPad(parseInt(Math.abs(t/60),10),0),n=Date.ext.util.xPad(t%60,0);return(t>0?"-":"+")+i+n},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(){return"%"}},Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},Date.ext.aggregates.z=Date.ext.formats.z(new Date),Date.ext.aggregates.Z=Date.ext.formats.Z(new Date),Date.ext.unsupported={},Date.prototype.strftime=function(e){this.locale in Date.ext.locales||(this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale.replace(/-[a-zA-Z]+$/,""):"en-GB");
for(var t=this;e.match(/%[cDhnrRtTxXzZ]/);)e=e.replace(/%([cDhnrRtTxXzZ])/g,function(e,i){var n=Date.ext.aggregates[i];return"locale"==n?Date.ext.locales[t.locale][i]:n});var i=e.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(e,i){var n=Date.ext.formats[i];return"string"==typeof n?t[n]():"function"==typeof n?n.call(t,t):"object"==typeof n&&"string"==typeof n[0]?Date.ext.util.xPad(t[n[0]](),n[1]):i});return t=null,i},CanvasRenderingContext2D.prototype.installPattern=function(e){if("undefined"!=typeof this.isPatternInstalled)throw"Must un-install old line pattern before installing a new one.";this.isPatternInstalled=!0;var t=[0,0],i=[],n=this.beginPath,a=this.lineTo,s=this.moveTo,r=this.stroke;this.uninstallPattern=function(){this.beginPath=n,this.lineTo=a,this.moveTo=s,this.stroke=r,this.uninstallPattern=void 0,this.isPatternInstalled=void 0},this.beginPath=function(){i=[],n.call(this)},this.moveTo=function(e,t){i.push([[e,t]]),s.call(this,e,t)},this.lineTo=function(e,t){var n=i[i.length-1];n.push([e,t])},this.stroke=function(){if(0===i.length)return void r.call(this);for(var n=0;n<i.length;n++)for(var o=i[n],l=o[0][0],c=o[0][1],u=1;u<o.length;u++){var h=o[u][0],d=o[u][1];this.save();var p=h-l,f=d-c,m=Math.sqrt(p*p+f*f),g=Math.atan2(f,p);this.translate(l,c),s.call(this,0,0),this.rotate(g);for(var v=t[0],b=0;m>b;){var _=e[v];b+=t[1]?t[1]:_,b>m?(t=[v,b-m],b=m):t=[(v+1)%e.length,0],v%2===0?a.call(this,b,0):s.call(this,b,0),v=(v+1)%e.length}this.restore(),l=h,c=d}r.call(this),i=[]}},CanvasRenderingContext2D.prototype.uninstallPattern=function(){throw"Must install a line pattern before uninstalling it."},Dygraph.Plugins={},Dygraph.Plugins.Annotations=function(){var e=function(){this.annotations_=[]};return e.prototype.toString=function(){return"Annotations Plugin"},e.prototype.activate=function(){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},e.prototype.detachLabels=function(){for(var e=0;e<this.annotations_.length;e++){var t=this.annotations_[e];t.parentNode&&t.parentNode.removeChild(t),this.annotations_[e]=null}this.annotations_=[]},e.prototype.clearChart=function(){this.detachLabels()},e.prototype.didDrawChart=function(e){var t=e.dygraph,i=t.layout_.annotated_points;if(i&&0!==i.length)for(var n=e.canvas.parentNode,a={position:"absolute",fontSize:t.getOption("axisLabelFontSize")+"px",zIndex:10,overflow:"hidden"},s=function(e,i,n){return function(a){var s=n.annotation;s.hasOwnProperty(e)?s[e](s,n,t,a):t.getOption(i)&&t.getOption(i)(s,n,t,a)}},r=e.dygraph.plotter_.area,o=0;o<i.length;o++){var l=i[o];if(!(l.canvasx<r.x||l.canvasx>r.x+r.w||l.canvasy<r.y||l.canvasy>r.y+r.h)){var c=l.annotation,u=6;c.hasOwnProperty("tickHeight")&&(u=c.tickHeight);var h=document.createElement("div");for(var d in a)a.hasOwnProperty(d)&&(h.style[d]=a[d]);c.hasOwnProperty("icon")||(h.className="dygraphDefaultAnnotation"),c.hasOwnProperty("cssClass")&&(h.className+=" "+c.cssClass);var p=c.hasOwnProperty("width")?c.width:16,f=c.hasOwnProperty("height")?c.height:16;if(c.hasOwnProperty("icon")){var m=document.createElement("img");m.src=c.icon,m.width=p,m.height=f,h.appendChild(m)}else l.annotation.hasOwnProperty("shortText")&&h.appendChild(document.createTextNode(l.annotation.shortText));h.style.left=l.canvasx-p/2+"px",h.style.top=c.attachAtBottom?r.h-f-u+"px":l.canvasy-f-u+"px",h.style.width=p+"px",h.style.height=f+"px",h.title=l.annotation.text,h.style.color=t.colorsMap_[l.name],h.style.borderColor=t.colorsMap_[l.name],c.div=h,t.addEvent(h,"click",s("clickHandler","annotationClickHandler",l,this)),t.addEvent(h,"mouseover",s("mouseOverHandler","annotationMouseOverHandler",l,this)),t.addEvent(h,"mouseout",s("mouseOutHandler","annotationMouseOutHandler",l,this)),t.addEvent(h,"dblclick",s("dblClickHandler","annotationDblClickHandler",l,this)),n.appendChild(h),this.annotations_.push(h);var g=e.drawingContext;g.save(),g.strokeStyle=t.colorsMap_[l.name],g.beginPath(),c.attachAtBottom?(g.moveTo(l.canvasx,r.h),g.lineTo(l.canvasx,r.h-2-u)):(g.moveTo(l.canvasx,l.canvasy),g.lineTo(l.canvasx,l.canvasy-2-u)),g.closePath(),g.stroke(),g.restore()}}},e.prototype.destroy=function(){this.detachLabels()},e}(),Dygraph.Plugins.Axes=function(){var e=function(){this.xlabels_=[],this.ylabels_=[]};return e.prototype.toString=function(){return"Axes Plugin"},e.prototype.activate=function(){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},e.prototype.layout=function(e){var t=e.dygraph;if(t.getOption("drawYAxis")){var i=t.getOption("yAxisLabelWidth")+2*t.getOption("axisTickSize");e.reserveSpaceLeft(i)}if(t.getOption("drawXAxis")){var n;n=t.getOption("xAxisHeight")?t.getOption("xAxisHeight"):t.getOption("axisLabelFontSize")+2*t.getOption("axisTickSize");{e.reserveSpaceBottom(n)}}if(2==t.numAxes()){var i=t.getOption("yAxisLabelWidth")+2*t.getOption("axisTickSize");e.reserveSpaceRight(i)}else t.numAxes()>2&&t.error("Only two y-axes are supported at this time. (Trying to use "+t.numAxes()+")")},e.prototype.detachLabels=function(){function e(e){for(var t=0;t<e.length;t++){var i=e[t];i.parentNode&&i.parentNode.removeChild(i)}}e(this.xlabels_),e(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},e.prototype.clearChart=function(e){e.dygraph;this.detachLabels()},e.prototype.willDrawChart=function(e){function t(e){return Math.round(e)+.5}function i(e){return Math.round(e)-.5}var n=e.dygraph;if(n.getOption("drawXAxis")||n.getOption("drawYAxis")){var a,s,r,o,l,c=e.drawingContext,u=e.canvas.parentNode,h=e.canvas.width,d=e.canvas.height,p={position:"absolute",fontSize:n.getOption("axisLabelFontSize")+"px",zIndex:10,color:n.getOption("axisLabelColor"),width:n.getOption("axisLabelWidth")+"px",lineHeight:"normal",overflow:"hidden"},f=function(e,t,i){var n=document.createElement("div");for(var a in p)p.hasOwnProperty(a)&&(n.style[a]=p[a]);var s=document.createElement("div");return s.className="dygraph-axis-label dygraph-axis-label-"+t+(i?" dygraph-axis-label-"+i:""),s.innerHTML=e,n.appendChild(s),n};c.save(),c.strokeStyle=n.getOption("axisLineColor"),c.lineWidth=n.getOption("axisLineWidth");var m=n.layout_,g=e.dygraph.plotter_.area;if(n.getOption("drawYAxis")){if(m.yticks&&m.yticks.length>0){var v=n.numAxes();for(l=0;l<m.yticks.length;l++){if(o=m.yticks[l],"function"==typeof o)return;s=g.x;var b=1,_="y1";1==o[0]&&(s=g.x+g.w,b=-1,_="y2"),r=g.y+o[1]*g.h,a=f(o[2],"y",2==v?_:null);var y=r-n.getOption("axisLabelFontSize")/2;0>y&&(y=0),y+n.getOption("axisLabelFontSize")+3>d?a.style.bottom="0px":a.style.top=y+"px",0===o[0]?(a.style.left=g.x-n.getOption("yAxisLabelWidth")-n.getOption("axisTickSize")+"px",a.style.textAlign="right"):1==o[0]&&(a.style.left=g.x+g.w+n.getOption("axisTickSize")+"px",a.style.textAlign="left"),a.style.width=n.getOption("yAxisLabelWidth")+"px",u.appendChild(a),this.ylabels_.push(a)}var w=this.ylabels_[0],k=n.getOption("axisLabelFontSize"),x=parseInt(w.style.top,10)+k;x>d-k&&(w.style.top=parseInt(w.style.top,10)-k/2+"px")}var C;if(n.getOption("drawAxesAtZero")){var S=n.toPercentXCoord(0);(S>1||0>S)&&(S=0),C=t(g.x+S*g.w)}else C=t(g.x);c.beginPath(),c.moveTo(C,i(g.y)),c.lineTo(C,i(g.y+g.h)),c.closePath(),c.stroke(),2==n.numAxes()&&(c.beginPath(),c.moveTo(i(g.x+g.w),i(g.y)),c.lineTo(i(g.x+g.w),i(g.y+g.h)),c.closePath(),c.stroke())}if(n.getOption("drawXAxis")){if(m.xticks)for(l=0;l<m.xticks.length;l++){o=m.xticks[l],s=g.x+o[0]*g.w,r=g.y+g.h,a=f(o[1],"x"),a.style.textAlign="center",a.style.top=r+n.getOption("axisTickSize")+"px";var D=s-n.getOption("axisLabelWidth")/2;D+n.getOption("axisLabelWidth")>h&&(D=h-n.getOption("xAxisLabelWidth"),a.style.textAlign="right"),0>D&&(D=0,a.style.textAlign="left"),a.style.left=D+"px",a.style.width=n.getOption("xAxisLabelWidth")+"px",u.appendChild(a),this.xlabels_.push(a)}c.beginPath();var T;if(n.getOption("drawAxesAtZero")){var S=n.toPercentYCoord(0,0);(S>1||0>S)&&(S=1),T=i(g.y+S*g.h)}else T=i(g.y+g.h);c.moveTo(t(g.x),T),c.lineTo(t(g.x+g.w),T),c.closePath(),c.stroke()}c.restore()}},e}(),Dygraph.Plugins.ChartLabels=function(){var e=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};e.prototype.toString=function(){return"ChartLabels Plugin"},e.prototype.activate=function(){return{layout:this.layout,didDrawChart:this.didDrawChart}};var t=function(e){var t=document.createElement("div");return t.style.position="absolute",t.style.left=e.x+"px",t.style.top=e.y+"px",t.style.width=e.w+"px",t.style.height=e.h+"px",t};e.prototype.detachLabels_=function(){for(var e=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],t=0;t<e.length;t++){var i=e[t];i&&i.parentNode&&i.parentNode.removeChild(i)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var i=function(e,t,i,n,a){var s=document.createElement("div");s.style.position="absolute",s.style.left=1==i?"0px":t.x+"px",s.style.top=t.y+"px",s.style.width=t.w+"px",s.style.height=t.h+"px",s.style.fontSize=e.getOption("yLabelWidth")-2+"px";var r=document.createElement("div");r.style.position="absolute",r.style.width=t.h+"px",r.style.height=t.w+"px",r.style.top=t.h/2-t.w/2+"px",r.style.left=t.w/2-t.h/2+"px",r.style.textAlign="center";var o="rotate("+(1==i?"-":"")+"90deg)";r.style.transform=o,r.style.WebkitTransform=o,r.style.MozTransform=o,r.style.OTransform=o,r.style.msTransform=o,"undefined"!=typeof document.documentMode&&document.documentMode<9&&(r.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+(1==i?"3":"1")+")",r.style.left="0px",r.style.top="0px");var l=document.createElement("div");return l.className=n,l.innerHTML=a,r.appendChild(l),s.appendChild(r),s};return e.prototype.layout=function(e){this.detachLabels_();var n=e.dygraph,a=e.chart_div;if(n.getOption("title")){var s=e.reserveSpaceTop(n.getOption("titleHeight"));this.title_div_=t(s),this.title_div_.style.textAlign="center",this.title_div_.style.fontSize=n.getOption("titleHeight")-8+"px",this.title_div_.style.fontWeight="bold";var r=document.createElement("div");r.className="dygraph-label dygraph-title",r.innerHTML=n.getOption("title"),this.title_div_.appendChild(r),a.appendChild(this.title_div_)}if(n.getOption("xlabel")){var o=e.reserveSpaceBottom(n.getOption("xLabelHeight"));this.xlabel_div_=t(o),this.xlabel_div_.style.textAlign="center",this.xlabel_div_.style.fontSize=n.getOption("xLabelHeight")-2+"px";var r=document.createElement("div");r.className="dygraph-label dygraph-xlabel",r.innerHTML=n.getOption("xlabel"),this.xlabel_div_.appendChild(r),a.appendChild(this.xlabel_div_)}if(n.getOption("ylabel")){var l=e.reserveSpaceLeft(0);this.ylabel_div_=i(n,l,1,"dygraph-label dygraph-ylabel",n.getOption("ylabel")),a.appendChild(this.ylabel_div_)}if(n.getOption("y2label")&&2==n.numAxes()){var c=e.reserveSpaceRight(0);this.y2label_div_=i(n,c,2,"dygraph-label dygraph-y2label",n.getOption("y2label")),a.appendChild(this.y2label_div_)}},e.prototype.didDrawChart=function(e){var t=e.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=t.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=t.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=t.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=t.getOption("y2label"))},e.prototype.clearChart=function(){},e.prototype.destroy=function(){this.detachLabels_()},e}(),Dygraph.Plugins.Grid=function(){var e=function(){};return e.prototype.toString=function(){return"Gridline Plugin"},e.prototype.activate=function(){return{willDrawChart:this.willDrawChart}},e.prototype.willDrawChart=function(e){function t(e){return Math.round(e)+.5}function i(e){return Math.round(e)-.5}var n,a,s,r,o=e.dygraph,l=e.drawingContext,c=o.layout_,u=e.dygraph.plotter_.area;if(o.getOption("drawYGrid")){for(r=c.yticks,l.save(),l.strokeStyle=o.getOption("gridLineColor"),l.lineWidth=o.getOption("gridLineWidth"),s=0;s<r.length;s++)0===r[s][0]&&(n=t(u.x),a=i(u.y+r[s][1]*u.h),l.beginPath(),l.moveTo(n,a),l.lineTo(n+u.w,a),l.closePath(),l.stroke());l.restore()}if(o.getOption("drawXGrid")){for(r=c.xticks,l.save(),l.strokeStyle=o.getOption("gridLineColor"),l.lineWidth=o.getOption("gridLineWidth"),s=0;s<r.length;s++)n=t(u.x+r[s][0]*u.w),a=i(u.y+u.h),l.beginPath(),l.moveTo(n,a),l.lineTo(n,u.y),l.closePath(),l.stroke();l.restore()}},e.prototype.destroy=function(){},e}(),Dygraph.Plugins.Legend=function(){var e=function(){this.legend_div_=null,this.is_generated_div_=!1};e.prototype.toString=function(){return"Legend Plugin"};var t,i;e.prototype.activate=function(e){var t,i=e.getOption("labelsDivWidth"),n=e.getOption("labelsDiv");if(n&&null!==n)t="string"==typeof n||n instanceof String?document.getElementById(n):n;else{var a={position:"absolute",fontSize:"14px",zIndex:10,width:i+"px",top:"0px",left:e.size().width-i-2+"px",background:"white",lineHeight:"normal",textAlign:"left",overflow:"hidden"};Dygraph.update(a,e.getOption("labelsDivStyles")),t=document.createElement("div"),t.className="dygraph-legend";for(var s in a)if(a.hasOwnProperty(s))try{t.style[s]=a[s]}catch(r){this.warn("You are using unsupported css properties for your browser in labelsDivStyles")}e.graphDiv.appendChild(t),this.is_generated_div_=!0}return this.legend_div_=t,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var n=function(e){var t=document.createElement("span");t.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),e.appendChild(t);var i=t.offsetWidth;return e.removeChild(t),i};return e.prototype.select=function(e){var i=e.selectedX,n=e.selectedPoints,a=t(e.dygraph,i,n,this.one_em_width_);this.legend_div_.innerHTML=a},e.prototype.deselect=function(e){var i=n(this.legend_div_);this.one_em_width_=i;var a=t(e.dygraph,void 0,void 0,i);this.legend_div_.innerHTML=a},e.prototype.didDrawChart=function(e){this.deselect(e)},e.prototype.predraw=function(e){if(this.is_generated_div_){e.dygraph.graphDiv.appendChild(this.legend_div_);var t=e.dygraph.plotter_.area,i=e.dygraph.getOption("labelsDivWidth");this.legend_div_.style.left=t.x+t.w-i-1+"px",this.legend_div_.style.top=t.y+"px",this.legend_div_.style.width=i+"px"}},e.prototype.destroy=function(){this.legend_div_=null},t=function(e,t,n,a){if(e.getOption("showLabelsOnHighlight")!==!0)return"";var s,r,o,l,c,u=e.getLabels();if("undefined"==typeof t){if("always"!=e.getOption("legend"))return"";for(r=e.getOption("labelsSeparateLines"),s="",o=1;o<u.length;o++){var h=e.getPropertiesForSeries(u[o]);h.visible&&(""!==s&&(s+=r?"<br/>":" "),c=e.getOption("strokePattern",u[o]),l=i(c,h.color,a),s+="<span style='font-weight: bold; color: "+h.color+";'>"+l+" "+u[o]+"</span>")}return s}var d=e.optionsViewForAxis_("x"),p=d("valueFormatter");s=p(t,d,u[0],e),""!==s&&(s+=":");var f=[],m=e.numAxes();for(o=0;m>o;o++)f[o]=e.optionsViewForAxis_("y"+(o?1+o:""));var g=e.getOption("labelsShowZeroValues");r=e.getOption("labelsSeparateLines");var v=e.getHighlightSeries();for(o=0;o<n.length;o++){var b=n[o];if((0!==b.yval||g)&&Dygraph.isOK(b.canvasy)){r&&(s+="<br/>");var h=e.getPropertiesForSeries(b.name),_=f[h.axis-1],y=_("valueFormatter"),w=y(b.yval,_,b.name,e),k=b.name==v?" class='highlight'":"";s+="<span"+k+"> <b><span style='color: "+h.color+";'>"+b.name+"</span></b>:"+w+"</span>"}}return s},i=function(e,t,i){var n=/MSIE/.test(navigator.userAgent)&&!window.opera;if(n)return"&mdash;";if(!e||e.length<=1)return'<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+t+';"></div>';var a,s,r,o,l,c=0,u=0,h=[];for(a=0;a<=e.length;a++)c+=e[a%e.length];if(l=Math.floor(i/(c-e[0])),l>1){for(a=0;a<e.length;a++)h[a]=e[a]/i;u=h.length}else{for(l=1,a=0;a<e.length;a++)h[a]=e[a]/c;u=h.length+1}var d="";for(s=0;l>s;s++)for(a=0;u>a;a+=2)r=h[a%h.length],o=a<e.length?h[(a+1)%h.length]:0,d+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+o+"em; padding-left: "+r+"em; height: 1px; border-bottom: 2px solid "+t+';"></div>';return d},e}(),Dygraph.PLUGINS.push(Dygraph.Plugins.Legend,Dygraph.Plugins.Axes,Dygraph.Plugins.ChartLabels,Dygraph.Plugins.Annotations,Dygraph.Plugins.Grid);