/*
string.js - Copyright (C) 2012-2013, JP Richardson <jprichardson@gmail.com>
*/
!function(){"use strict";function e(e,t){e.s=null!==t&&void 0!==t?"string"==typeof t?t:t.toString():t,e.orig=t,null!==t&&void 0!==t?e.__defineGetter__?e.__defineGetter__("length",function(){return e.s.length}):e.length=t.length:e.length=-1}function t(t){e(this,t)}function i(){for(var e in d)(function(e){var t=d[e];u.hasOwnProperty(e)||(h.push(e),u[e]=function(){return String.prototype.s=this,t.apply(this,arguments)})})(e)}function n(){for(var e=0;e<h.length;++e)delete String.prototype[h[e]];h.length=0}function a(){for(var e=s(),t={},i=0;i<e.length;++i){var n=e[i],a=u[n];try{var r=typeof a.apply("teststring",[]);t[n]=r}catch(o){}}return t}function s(){var e=[];if(Object.getOwnPropertyNames)return e=Object.getOwnPropertyNames(u),e.splice(e.indexOf("valueOf"),1),e.splice(e.indexOf("toString"),1),e;var t={};for(var i in String.prototype)t[i]=i;for(var i in Object.prototype)delete t[i];for(var i in t)e.push(i);return e}function r(e){return new t(e)}function o(e,t){var i,n=[];for(i=0;i<e.length;i++)n.push(e[i]),t&&t.call(e,e[i],i);return n}var l="1.8.0",c={},u=String.prototype,d=t.prototype={between:function(e,t){var i=this.s,n=i.indexOf(e),a=i.indexOf(t,n+e.length);return new this.constructor(-1==a&&null!=t?"":-1==a&&null==t?i.substring(n+e.length):i.slice(n+e.length,a))},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(e,t,i){return i?i.toUpperCase():""});return new this.constructor(e)},capitalize:function(){return new this.constructor(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(e){return this.s.charAt(e)},chompLeft:function(e){var t=this.s;return 0===t.indexOf(e)?(t=t.slice(e.length),new this.constructor(t)):this},chompRight:function(e){if(this.endsWith(e)){var t=this.s;return t=t.slice(0,t.length-e.length),new this.constructor(t)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new this.constructor(e)},contains:function(e){return this.s.indexOf(e)>=0},count:function(e){for(var t=0,i=this.s.indexOf(e);i>=0;)t+=1,i=this.s.indexOf(e,i+1);return t},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new this.constructor(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(e,t){return String.fromCharCode(t)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(e,t){return String.fromCharCode(parseInt(t,16))}).replace(/&([^;\W]+;?)/g,function(e,t){var i=t.replace(/;$/,""),n=c[t]||t.match(/;$/)&&c[i];return"number"==typeof n?String.fromCharCode(n):"string"==typeof n?n:e}),new this.constructor(e)},endsWith:function(e){var t=this.s.length-e.length;return t>=0&&this.s.indexOf(e,t)===t},escapeHTML:function(){return new this.constructor(this.s.replace(/[&<>"']/g,function(e){return"&"+g[e]+";"}))},ensureLeft:function(e){var t=this.s;return 0===t.indexOf(e)?this:new this.constructor(e+t)},ensureRight:function(e){var t=this.s;return this.endsWith(e)?this:new this.constructor(t+e)},humanize:function(){if(null===this.s||void 0===this.s)return new this.constructor("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new this.constructor(e)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var t=this.s.substr(0,e);return new this.constructor(t)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,t){if(null==t&&(t=" "),this.s.length>=e)return new this.constructor(this.s);e-=this.s.length;var i=Array(Math.ceil(e/2)+1).join(t),n=Array(Math.floor(e/2)+1).join(t);return new this.constructor(i+this.s+n)},padLeft:function(e,t){return null==t&&(t=" "),new this.constructor(this.s.length>=e?this.s:Array(e-this.s.length+1).join(t)+this.s)},padRight:function(e,t){return null==t&&(t=" "),new this.constructor(this.s.length>=e?this.s:this.s+Array(e-this.s.length+1).join(t))},parseCSV:function(e,t,i,n){e=e||",",i=i||"\\","undefined"==typeof t&&(t='"');var a=0,s=[],r=[],o=this.s.length,l=!1,c=this,u=function(e){return c.s.charAt(e)};if("undefined"!=typeof n)var d=[];for(t||(l=!0);o>a;){var h=u(a);switch(h){case i:if(l&&(i!==t||u(a+1)===t)){a+=1,s.push(u(a));break}if(i!==t)break;case t:l=!l;break;case e:l&&t?s.push(h):(r.push(s.join("")),s.length=0);break;case n:l?s.push(h):d&&(r.push(s.join("")),d.push(r),r=[],s.length=0);break;default:l&&s.push(h)}a+=1}return r.push(s.join("")),d?(d.push(r),d):r},replaceAll:function(e,t){var i=this.s.split(e).join(t);return new this.constructor(i)},right:function(e){if(e>=0){var t=this.s.substr(this.s.length-e,e);return new this.constructor(t)}return this.left(-e)},setValue:function(t){return e(this,t),this},slugify:function(){var e=new t(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new this.constructor(e)},startsWith:function(e){return 0===this.s.lastIndexOf(e,0)},stripPunctuation:function(){return new this.constructor(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,t=arguments.length>0?arguments:[""];return o(t,function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")}),new this.constructor(e)},template:function(e,t,i){var n=this.s,t=t||r.TMPL_OPEN,i=i||r.TMPL_CLOSE,a=t.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),s=i.replace(/[-[\]()*\s]/g,"\\$&").replace(/\$/g,"\\$"),o=new RegExp(a+"(.+?)"+s,"g"),l=n.match(o)||[];return l.forEach(function(a){var s=a.substring(t.length,a.length-i.length);"undefined"!=typeof e[s]&&(n=n.replace(a,e[s]))}),new this.constructor(n)},times:function(e){return new this.constructor(new Array(e+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var e=this.s.toLowerCase();return"true"===e||"yes"===e||"on"===e}return this.orig===!0||1===this.orig},toFloat:function(e){var t=parseFloat(this.s);return e?parseFloat(t.toFixed(e)):t},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e="undefined"==typeof u.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new this.constructor(e)},trimLeft:function(){var e;return e=u.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new this.constructor(e)},trimRight:function(){var e;return e=u.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new this.constructor(e)},truncate:function(e,i){var n=this.s;if(e=~~e,i=i||"...",n.length<=e)return new this.constructor(n);var a=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,a);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):new t(s.slice(0,s.length-1)).trimRight().s,new t((s+i).length>n.length?n:n.slice(0,s.length)+i)},toCSV:function(){function e(e){return null!==e&&""!==e}var i=",",n='"',a="\\",s=!0,r=!1,o=[];if("object"==typeof arguments[0]?(i=arguments[0].delimiter||i,i=arguments[0].separator||i,n=arguments[0].qualifier||n,s=!!arguments[0].encloseNumbers,a=arguments[0].escape||a,r=!!arguments[0].keys):"string"==typeof arguments[0]&&(i=arguments[0]),"string"==typeof arguments[1]&&(n=arguments[1]),null===arguments[1]&&(n=null),this.orig instanceof Array)o=this.orig;else for(var l in this.orig)this.orig.hasOwnProperty(l)&&o.push(r?l:this.orig[l]);for(var c=a+n,u=[],d=0;d<o.length;++d){var h=e(n);if("number"==typeof o[d]&&(h&=s),h&&u.push(n),null!==o[d]&&void 0!==o[d]){var p=new t(o[d]).replaceAll(n,c).s;u.push(p)}else u.push("");h&&u.push(n),i&&u.push(i)}return u.length=u.length-1,new this.constructor(u.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new t(this.s.charAt(0)).isUpper()&&(e="_"+e),new this.constructor(e)},unescapeHTML:function(){return new this.constructor(this.s.replace(/\&([^;]+);/g,function(e,t){var i;return t in m?m[t]:(i=t.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(i[1],16)):(i=t.match(/^#(\d+)$/))?String.fromCharCode(~~i[1]):e}))},valueOf:function(){return this.s.valueOf()}},h=[],p=a();for(var f in p)(function(e){var t=u[e];"function"==typeof t&&(d[e]||(d[e]="string"===p[e]?function(){return new this.constructor(t.apply(this,arguments))}:t))})(f);d.repeat=d.times,d.include=d.contains,d.toInteger=d.toInt,d.toBool=d.toBoolean,d.decodeHTMLEntities=d.decodeHtmlEntities,d.constructor=t,r.extendPrototype=i,r.restorePrototype=n,r.VERSION=l,r.TMPL_OPEN="{{",r.TMPL_CLOSE="}}",r.ENTITIES=c,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=r:"function"==typeof define&&define.amd?define([],function(){return r}):window.S=r;var m={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},g={};for(var v in m)g[m[v]]=v;c={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this);